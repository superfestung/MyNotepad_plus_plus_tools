<html>
  <head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>FIFO variables ($AC_FIFO)</title>
  </head>
  <body id="bodyID">
    <div id="nsbanner">
      <div id="TitleRowDefault">
        <h1 class="title">FIFO variables ($AC_FIFO)</h1>
      </div>
    </div>
    <div id="nstext" valign="bottom">
      <p>
      </p>
      <ul>
      </ul>
      <p>A FIFO variable provides a complex data structure based on R parameters. The data structure comprises one administration part and one net data part. The net data part is structured as a stack according to the FIFO principle (first in, first out). Using the index of the FIFO variables, the different functions are addressed in the administration part as well as the net data.</p>
      <a id="image_83871634315_0">
      </a> <img border="0" src="images/167864663435.png" width="460" height="278"/><a id="table_"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_legend" border="0"><colgroup><col width="6.9%"><col width="93.0%"></colgroup><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">①</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Administration part</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">②</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Net data part</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">③</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">R parameter range above the FIFO variables: Read and write permitted</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">④</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">R parameter range below the FIFO variables: Only read permitted</p></td></tr></table></p><table cellpadding="0" cellspacing="0" border="0"><tr><td><font size="1px"></font></td></tr></table><table class="safety" border="1" bgcolor="#eeeeee"><colgroup><col width="5%"><col width="95%"></colgroup><tr><td><b>Note</b></td></tr><tr><td><p class="safety">The statements regarding R parameters also apply to FIFO variables. See Chapter "<a href="156663850891.html">R parameters ($R)</a>".</p></td></tr></table><a name="block_1"></a><h3 class="Blocktitle">Syntax</h3><h4 class="Blocklabel">Write</h4>$AC_FIFO&lt;n>[&lt;i>] = &lt;value>$AC_FIFO[&lt;n>, &lt;i>] = &lt;value><h4 class="Blocklabel">Read</h4>&lt;variable> = $AC_FIFO&lt;n>[&lt;i>]&lt;variable> = $AC_FIFO[&lt;n>, &lt;i>]<a name="block_2"></a><h3 class="Blocktitle">Meaning</h3><a id="table_308a0f76-195d-454b-bff2-ae1d5f295ba9"></a> <a id="table_0"></a> <a id="table_308a0f76-195d-454b-bff2-ae1d5f295ba9"></a> <a id="table_0"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_default" border="1"><colgroup><col width="15.0%"><col width="10.0%"><col width="8.0%"><col width="67.0%"></colgroup><tr valign="top"><td rowspan="2"><p type="p_table_l" style="margin-top: 4px" align="left"><code>$AC_FIFO</code>:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">FIFO data structure in the R parameters, starting from value in MD28262 $MC_START_AC_FIFO</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Data type:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">REAL</p></td></tr><tr valign="top"><td rowspan="3"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;n></code>:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Number of FIFO variables</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Data type:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">INT</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Value range:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">1, 2, ... max. number (see additional information)</p></td></tr><tr valign="top"><td rowspan="14"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;i></code>:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Index of the FIFO variables with which the various functions and data within the data structure of the FIFO variables is accessed.</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Value range:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">0, 1, 2, ... (MD28264 $MC_LEN_AC_FIFO - 1)</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center"><b>Value</b></p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left"><b>Meaning</b></p></td></tr><tr valign="top"><td colspan="3"><p type="p_table_c" style="margin-top: 4px" align="center"><b>Administrative data</b></p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">0</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left"><b>Write</b></p><p>A value is written to the FIFO stack by assigning a value to the FIFO stack via index 0 ($AC_FIFO[ 0 ] = &lt;value>). The assigned value is written to the next free location in the FIFO stack. </p><p>If all memory locations in the FIFO stack are already occupied, an alarm is displayed:</p><ul class="table"><li><p>When writing in an NC program: Alarm 20149</p></li><li><p>When writing in a synchronized action: Alarm 17020</p></li></ul><p><b>Read</b></p><p>A value is read from the FIFO stack by assigning the FIFO stack to a variable with index 0 (&lt;variable> = $AC_FIFO[ 0 ]). The oldest value is read and then removed from the FIFO stack.</p><p type="p_table_l" align="left"><b>Note</b></p><ul class="table"><li><p>Reading in the NC program / synchronized action</p><p>If a value is read in an NC program / synchronized action with index 0, the oldest value is read and removed from the FIFO stack as described above.</p></li><li><p>Reading on the user interface, e.g. SINUMERIK Operate</p><p>If a value is read or displayed with index 0 on the user interface, e.g. SINUMERIK Operate: "Diagnosis" > "NC/PLC Variables", the value is read internally with index 1 (oldest value) <b>without</b> changing the FIFO stack.</p></li></ul></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">1</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left"><b>Write / Read</b>: The "oldest" net data is addressed; the FIFO stack is <b>not</b> changed</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">2</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left"><b>Write / Read</b>: The "newest" net data is addressed; the FIFO stack is <b>not</b> changed</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">3</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left"><b>Read</b>: Returns the sum of the values of all net data</p><p type="p_table_l" align="left">Enable via MD28266 $MC_MODE_AC_FIFO, bit 0 required. See paragraph below "Summation across all net data"</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">4</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left"><b>Read</b>: Supplies the number of net data currently stored in the FIFO stack.</p><p type="p_table_l" align="left"><b>Write</b>: Reset to the initial state is realized by writing the value of 0 to FIFO variable, index 4.</p><p type="p_table_l" align="left">Example: <code>$AC_FIFO1[4] = 0</code></p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">5</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left"><b>Read</b>: Returns the current write index, relative to the beginning of the FIFO stack</p></td></tr><tr valign="top"><td colspan="3"><p type="p_table_c" style="margin-top: 4px" align="center"><b>Net data</b></p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">6</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Write/read: The 1st field element of the net data range is addressed</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">7</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Write/read: The 2nd field element of the net data range is addressed</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">n</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Write/read: The nth field element of the net data range is addressed</p></td></tr><tr valign="top"><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left"><b>More information</b></p><p type="p_table_l" align="left">List Manual System Variables</p></td></tr></table></p><a name="block_3"></a><h3 class="Blocktitle">Machine data</h3><h4 class="Blocklabel">Number of FIFO variables per channel</h4><p>The number of FIFO variables per channel is set using:</p><p>MD28260 $MC_NUM_AC_FIFO = &lt;number of FIFO variables per channel></p><h4 class="Blocklabel">Beginning of the R parameter range of FIFO variables</h4><p>The R-parameter, from which the range of FIFO variables for the channel begins, is set using:</p><p>MD28262 $MC_START_AC_FIFO = &lt;number of the start R parameter>  </p><table cellpadding="0" cellspacing="0" border="0"><tr><td><font size="1px"></font></td></tr></table><table class="safety" border="1" bgcolor="#eeeeee"><colgroup><col width="5%"><col width="95%"></colgroup><tr><td><b>Note</b></td></tr><tr><td><h4 class="Blocklabel">Free R-parameters</h4><p class="safety">Only the R-parameters whose numbers are below the start R parameter of the FIFO variables, can be written to the NC program.</p></td></tr></table><h4 class="Blocklabel">Number of field elements for each FIFO variable </h4><p>The maximum number of field elements per FIFO variable is set using:</p><p>MD28264 $MC_LEN_AC_FIFO = &lt;number of field elements per FIFO variable>  </p><h4 class="Blocklabel">Total number of R parameters in the channel</h4><p>The total number of R parameters, which are required in the channel, is set using:</p><a id="table_1"></a> <a id="table_1"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_invisible" border="0"><colgroup><col width="40.0%"><col width="60.0%"></colgroup><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">MD28050 $MC_MM_NUM_R_PARAM =</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">MD28262 $MC_START_AC_FIFO + </p><p type="p_table_l" align="left">MD28260 $MC_NUM_AC_FIFO * </p><p type="p_table_l" align="left">(MD28264 $MC_LEN_AC_FIFO + 6)</p></td></tr></table></p><h4 class="Blocklabel">Summation of all net data</h4><p>The sum of the values of all net data is only provided via $AC_FIFO[ <b>3</b> ] if the function is activated via machine data:</p><p>MD28266 $MC_MODE_AC_FIFO, bit 0 = &lt;value></p><a id="table_2"></a> <a id="table_2"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_default" border="1"><colgroup><col width="8.8%"><col width="91.1%"></colgroup><tr valign="top"><th><p type="p_table_cb" align="center">Value</p></th><th><p type="p_table_lb" align="left">Meaning</p></th></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">FALSE</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">The sum of the values of all net data is <b>not </b>provided</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">TRUE</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">The sum of the values of all net data is provided</p></td></tr></table></p><a name="block_4"></a><h3 class="Blocktitle">Example</h3><p>Serial determination of the length of workpieces that move past an automatic measuring station on a conveyor belt.</p><a id="image_1061684235_0"></a> <img border="0" src="images/167864488075.png" width="500" height="147"/><p>The measurement results are written to or read from the $AC_FIFO1 system variable via synchronized actions.</p><ul><li><p><b>Read</b>: With index 0, the "oldest" net data element is read and deleted from the FIFO stack.</p></li><li><p><b>Write</b>: With index 0, the value is written to the next free net data element.</p></li></ul><a id="image_2610524683_0"></a> <img border="0" src="images/167864573451.png" width="500" height="365"/></div>
  </body>
</html>