<html>
  <head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Couplings (CP..., LEAD..., TRAIL..., CTAB...)</title>
  </head>
  <body id="bodyID">
    <div id="nsbanner">
      <div id="TitleRowDefault">
        <h1 class="title">Couplings (CP..., LEAD..., TRAIL..., CTAB...)</h1>
      </div>
    </div>
    <div id="nstext" valign="bottom">
      <p>
      </p>
      <ul>
      </ul>
      <p>The commands listed in Section "<a href="156663925771.html">Language elements for synchronized actions and technology cycles</a>" can be programmed in synchronous actions for the functions coupled motion (TRAIL...), curve tables (CTAB...), master value coupling (LEAD...) and generic coupling (CP...).         </p>
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td>
            <font size="1px">
            </font>
          </td>
        </tr>
      </table>
      <table class="safety" border="1" bgcolor="#eeeeee">
        <colgroup>
          <col width="5%">
          <col width="95%">
        </colgroup>
        <tr>
          <td>
            <b>Note</b>
          </td>
        </tr>
        <tr>
          <td>
            <h4 class="Blocklabel">Generic coupling</h4>
            <p class="safety">Note that the "generic coupling" CP... commands are always executed in synchronous actions in the sequence of the programming from left to right. This means that in contrast to the programming in the part program, the effect of the various commands depends on the sequence in the synchronous action.</p>
            <h4 class="Blocklabel">Curve tables</h4>
            <p class="safety">The CTAB and CTABINV commands can be used in the condition and in the action.</p>
          </td>
        </tr>
      </table>
      <a name="block_1">
      </a>
      <h3 class="Blocktitle">More information</h3>
      <p>Detailed information on coupling commands can be found in:</p>
      <ul>
        <li>
          <p>Coupled motion, curve tables, master value coupling</p>
          <p>Programming Manual NC Programming</p>
        </li>
        <li>
          <p>Generic coupling</p>
          <p>Function Description Axes and Spindles</p>
        </li>
      </ul>
      <a name="block_2">
      </a>
      <h3 class="Blocktitle">Coupled motion</h3>
      <p>When the coupling is activated from the synchronous action, the leading axis can be in motion. In this case the following axis is accelerated up to the set velocity. The position of the leading axis at the time of synchronization of the velocity is the starting position for coupled-axis motion. </p>
      <a name="block_3">
      </a>
      <h3 class="Blocktitle">Master value coupling</h3>
      <h4 class="Blocklabel">Syntax</h4>... DO LEADON(&lt;FA>, &lt;LA>, &lt;NO>, &lt;OVW>)<h4 class="Blocklabel">Meaning</h4><a id="table_d0a5131a-c442-4b70-b15f-97f7874dd025"></a> <a id="table_0"></a> <TableTitle></TableTitle><a id="table_d0a5131a-c442-4b70-b15f-97f7874dd025"></a> <a id="table_0"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_invisible" border="0"><colgroup><col width="31.7%"><col width="68.2%"></colgroup><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;FA></code>:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Name of the following axis</p><p type="p_table_l" align="left">Type: AXIS</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;LA></code>:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Name of the leading axis </p><p type="p_table_l" align="left">Type: AXIS</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;NO></code>:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Number of the curve table </p><p type="p_table_l" align="left">Type: INT</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;OVW></code>:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Status of the overwrite permission</p><p type="p_table_l" align="left">Type: BOOL<br />0: Overwriting of the table is <b>not </b>permitted<br />1: Overwriting of the table is permitted</p></td></tr></table></p><ul><li><p>Synchronous actions can be used to change the basic curve table without a resynchronization even during an active master value coupling.</p><p>The following axis attempts as fast as possible to follow the position values specified by the new curve table.</p></li><li><p>In order to be able to program an axis to be coupled via synchronous actions, the axis must first be released with the <code>RELEASE</code> command.</p><p>Example:</p></li></ul><a id="table_f69a6d68-292a-4b40-b752-ac7a4811d835"></a> <a id="table_1"></a> <a id="table_f69a6d68-292a-4b40-b752-ac7a4811d835"></a> <a id="table_1"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_sourcecode" border="1" id="EDF"><colgroup><col width="100.0%"></colgroup><tr valign="top"><th><p type="p_table_lb" align="left">Program code</p></th></tr><tr valign="top"><td>...</td></tr><tr valign="top"><td>N60 RELEASE(X)</td></tr><tr valign="top"><td>N50 ID=1 EVERY SR1==1 DO LEADON(C, X, 1)</td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><a name="block_4"></a><h3 class="Blocktitle">Example: On-the-fly parting</h3><p>An extruded material which passes continuously through the operating area of a cutting tool must be cut into parts of equal length.</p><ul><li><p>X axis: Axis in which the extruded material moves (WCS)</p></li><li><p>X1 axis: Machine axis of the extruded material (MCS)</p></li><li><p>Y axis: Axis in which the cutting tool "tracks" the extruded material</p></li></ul><p>It is assumed that the infeed and control of the cutting tool are controlled via the PLC user program. The signals at the PLC interface can be evaluated to determine whether the extruded material and cutting tool are synchronized.</p><a id="table_4d73583f-d666-4ea7-9109-d87b1c1b7cbd"></a> <a id="table_2"></a> <a id="table_4d73583f-d666-4ea7-9109-d87b1c1b7cbd"></a> <a id="table_2"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_sourcecode" border="1" id="EFG"><colgroup><col width="100.0%"></colgroup><tr valign="top"><th><p type="p_table_lb" align="left">Program code</p></th></tr><tr valign="top"><td>N100 R3=1500    ;Length of a part to be cut off</td></tr><tr valign="top"><td>N200 R2=100000 R13=R2/300</td></tr><tr valign="top"><td>N300 R4=100000</td></tr><tr valign="top"><td>N400 R6=30      ;Start position Y axis</td></tr><tr valign="top"><td>N500 R1=1       ;Start condition for conveyor axis</td></tr><tr valign="top"><td>N600 LEADOF(Y,X)   ;Delete coupling </td></tr><tr valign="top"><td>N700 CTABDEF(Y,X,1,0)   ;Table definition</td></tr><tr valign="top"><td>N800 X=30 Y=30          ;Value pairs</td></tr><tr valign="top"><td>N900 X=R13 Y=R13</td></tr><tr valign="top"><td>N1000 X=2*R13 Y=30</td></tr><tr valign="top"><td>N1100 CTABEND           ;End of table definition</td></tr><tr valign="top"><td>N1200 PRESETON(X1,0)    ;PRESET at beginning</td></tr><tr valign="top"><td>N1300 Y=R6 G0           ;Start position Y axis, axis is linear</td></tr><tr valign="top"><td>; PRESET after length R3, new start after parting</td></tr><tr valign="top"><td>N1400 ID=1 WHENEVER $AA_IW[X]>$R3 DO PESETON(X1,0)</td></tr><tr valign="top"><td>N1500 RELEASE(Y)</td></tr><tr valign="top"><td>; Couple Y to X via table 1, for X &lt; 10</td></tr><tr valign="top"><td>N1800 ID=6 EVERY $AA_IM[X]&lt;10 DO LEADON(Y,X,1)</td></tr><tr valign="top"><td>; > 30 before traversed parting distance, deactivate coupling</td></tr><tr valign="top"><td>N1900 ID=10 EVERY $AA_IM[X]>$R3-30 DO LEADOF(Y,X)</td></tr><tr valign="top"><td>N2000 WAITP(X)</td></tr><tr valign="top"><td>; Set extruded material axis continuously in motion</td></tr><tr valign="top"><td>N2100 ID=7 WHEN $R1==1 DO MOV[X]=1 FA[X]=$R4</td></tr><tr valign="top"><td>N2200 M30</td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><a name="block_5"></a><h3 class="Blocktitle">Generic coupling</h3><ul><li><p>When a coupling module is activated in a synchronous action, the following axis <b>must </b>already be active in the channel and be in the state "neutral axis" or "axis already assigned to the part program of the channel". The corresponding axis state can be generated, if necessary, in the synchronous action by programming <code>GET[&lt;following axis>]</code>.</p></li><li><p>The commands of the generic coupling <code>CP...</code> are processed directly in synchronous actions by the coupling module. The command therefore takes effect immediately.</p></li><li><p>With the programming of a coupling factor (<code>CPLNUM</code>, <code>CPLDEN</code>) or table number (<code>CPLCTID</code>), a previously activated non-linear coupling relationship, e.g. a curve table, is deactivated.</p></li></ul><h4 class="Blocklabel">Generic coupling: Using the TRAIL, LEAD, EG or COUP coupling type.</h4><p class="comment">If in the framework of the generic coupling, a behavior corresponding to one of the known coupling types "Coupled motion", "Master value coupling", "Electronic gear" or "Synchronous spindle" is required, the command <code>CPSETTYPE</code> is also possible in synchronous actions when creating or defining the coupling module:</p><p class="comment"><code>CPSETTYPE[FAx] = &lt;coupling type></code></p><a id="table_c6d8e890-10b8-4682-b272-a0e90a1d9c02"></a> <a id="table_3"></a> <a id="table_c6d8e890-10b8-4682-b272-a0e90a1d9c02"></a> <a id="table_3"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_default" border="1"><colgroup><col width="24.2%"><col width="75.7%"></colgroup><tr valign="top"><th><p type="p_table_lb" align="left" class="comment"><code>&lt;Coupling type></code></p></th><th><p type="p_table_lb" align="left" class="comment">Meaning</p></th></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment">CP</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment">Freely programmable</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment">TRAIL</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment">"Coupled motion" coupling type</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment">LEAD</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment">"Master value coupling" coupling type</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment">EG</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment">"Electronic gearbox" coupling type</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment">COUP</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment">"Synchronous spindle" coupling type</p></td></tr></table></p><a name="block_6"></a><h3 class="Blocktitle">Constraints</h3><h4 class="Blocklabel">Synchronism status of a following axis</h4><p>The system variable $AA_SYNC[&lt;axis>] can be used to read the synchronism status of a following axis in the part program or synchronous action.</p><h4 class="Blocklabel">Axis replacement with cross-channel coupling</h4><p>For axis replacement, the following and leading axes must be known to the calling channel. Axis replacement of leading axes can be performed independently of the state of the coupling. A defined or active coupling does not produce any other supplementary conditions.</p><table cellpadding="0" cellspacing="0" border="0"><tr><td><font size="1px"></font></td></tr></table><table class="safety" border="1" bgcolor="#eeeeee"><colgroup><col width="5%"><col width="95%"></colgroup><tr><td><b>Note</b></td></tr><tr><td><p class="safety">With the activation of the coupling, the following axis becomes the main run axis and is not available for an axis replacement. The following axis is thus logged out of the channel. With this type of coupling, an overlaid movement is therefore not possible.</p></td></tr></table><p>See also Section "<a href="156663993995.html">Axis replacement (GET, RELEASE, AXTOCHAN)</a>"</p><h4 class="Blocklabel">Conflict prevention when changing from following axis to channel axis</h4><p>In order to be able to traverse a following axis traversed via synchronous actions as a channel axis again, you must ensure that the coupling is deactivated before the channel requests the relevant axis.</p><p>The following example shows an <b>error case</b>:</p><a id="table_015bda97-777c-4895-82b9-b1bc709abf44"></a> <a id="table_4"></a> <a id="table_015bda97-777c-4895-82b9-b1bc709abf44"></a> <a id="table_4"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_sourcecode" border="1" id="EGEAC"><colgroup><col width="100.0%"></colgroup><tr valign="top"><th><p type="p_table_lb" align="left">Program code</p></th></tr><tr valign="top"><td>...</td></tr><tr valign="top"><td>N50 WHEN TRUE DO TRAILOF(Y, X)</td></tr><tr valign="top"><td>N60 Y100</td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><p>The Y axis is not released early enough in <code>N50</code> because <code>TRAILOF</code> only becomes active with <code>N60</code> through the non-modal synchronous action.</p><p class="comment">Corrected example: </p><a id="table_ff4aaae6-e79b-4790-b147-f808035c3413"></a> <a id="table_5"></a> <a id="table_ff4aaae6-e79b-4790-b147-f808035c3413"></a> <a id="table_5"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_sourcecode" border="1" id="EFFAC"><colgroup><col width="100.0%"></colgroup><tr valign="top"><th><p type="p_table_lb" align="left" class="comment">Program code</p></th></tr><tr valign="top"><td>...</td></tr><tr valign="top"><td>N50 WHEN TRUE DO TRAILOF(Y, X)</td></tr><tr valign="top"><td>N55 WAITP(Y)       ; Wait for end of travel of the positioning axis</td></tr><tr valign="top"><td>N60 Y100</td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><a name="block_7"></a><h3 class="Blocktitle">Examples</h3><p>Define coupling: Y = following axis, X = leading axis</p><a id="table_b2b90b8e-64ee-4f90-84a5-38e47c8466f8"></a> <a id="table_6"></a> <a id="table_b2b90b8e-64ee-4f90-84a5-38e47c8466f8"></a> <a id="table_6"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_sourcecode" border="1" id="ECGAC"><colgroup><col width="100.0%"></colgroup><tr valign="top"><th><p type="p_table_lb" align="left">Program code</p></th></tr><tr valign="top"><td>... DO CPLDEF[Y]=X CPLNUM[Y,X]=1.5</td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><p>Activate coupling and define coupling relationship.</p><ul><li><p>N10 with the correct sequence: First <code>CPLON</code> then <code>CPLNUM</code></p></li><li><p>N20 with <b>incorrect </b>sequence: First <code>CPLNUM</code> then CPLON</p></li></ul><a id="table_b8c719f3-1d39-45f1-b10b-ec6c499a314c"></a> <a id="table_7"></a> <a id="table_b8c719f3-1d39-45f1-b10b-ec6c499a314c"></a> <a id="table_7"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_sourcecode" border="1" id="EBHAC"><colgroup><col width="100.0%"></colgroup><tr valign="top"><th><p type="p_table_lb" align="left" class="comment">Program code</p></th></tr><tr valign="top"><td>N10 ... DO CPLON[Y]=X CPLNUM[X,Y]=1.5</td></tr><tr valign="top"><td>N20 ... DO CPLNUM[X,Y]=2 CPLON[Y]=X        ; Error</td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><p class="comment">Activate coupling, deactivation/activation with implicit resynchronization</p><a id="table_c101eeca-e6f3-46b0-b983-19cb2a2167b2"></a> <a id="table_8"></a> <a id="table_c101eeca-e6f3-46b0-b983-19cb2a2167b2"></a> <a id="table_8"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_sourcecode" border="1" id="EVHAC"><colgroup><col width="100.0%"></colgroup><tr valign="top"><th><p type="p_table_lb" align="left" class="comment">Program code</p></th></tr><tr valign="top"><td>N10 ... DO CPLON[X]=Y CPLNUM[X,Y]=3</td></tr><tr valign="top"><td>N20 Y100 F100</td></tr><tr valign="top"><td>N30 ... DO CPLOF=X CPLON[X]=Y CPLNUM[X,Y]=3</td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><p class="comment">Activate coupling, deactivate and traverse as a command axis </p><a id="table_cd132623-71e1-474f-85e1-a8de953b948f"></a> <a id="table_9"></a> <a id="table_cd132623-71e1-474f-85e1-a8de953b948f"></a> <a id="table_9"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_sourcecode" border="1" id="EMIAC"><colgroup><col width="100.0%"></colgroup><tr valign="top"><th><p type="p_table_lb" align="left" class="comment">Program code</p></th></tr><tr valign="top"><td>N10 ... DO CPLON[X]=Y CPLNUM[X,Y]=3</td></tr><tr valign="top"><td>N20 Y100 F100</td></tr><tr valign="top"><td>N30 ... DO CPLOF=X MOV[X]=10</td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><p class="comment"></p></div>
  </body>
</html>