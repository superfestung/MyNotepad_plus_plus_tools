<html>
  <head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Modifying the orientation transformation after the machine measurement (CORRTRAFO)</title>
  </head>
  <body id="bodyID">
    <div id="nsbanner">
      <div id="TitleRowDefault">
        <h1 class="title">Modifying the orientation transformation after the machine measurement (CORRTRAFO)</h1>
      </div>
    </div>
    <div id="nstext" valign="bottom">
      <p>
      </p>
      <ul>
      </ul>
      <p>For machines with orientation transformations that were defined by means of kinematic chains, the user can use the predefined CORRTRAFO function in order to modify the offset vectors or the direction vectors of the orientation axes in the kinematic model of the machine after a machine measurement. </p>
      <p>
      </p>
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td>
            <font size="1px">
            </font>
          </td>
        </tr>
      </table>
      <table class="safety" border="1" bgcolor="#eeeeee">
        <colgroup>
          <col width="5%">
          <col width="95%">
        </colgroup>
        <tr>
          <td>
            <b>Note</b>
          </td>
        </tr>
        <tr>
          <td>
            <p class="safety">The correction values written with the CORRTRAFO function are not immediately effective in the transformation. The correction values do not become effective until after a transformation deselection, NEWCONF and transformation selection.</p>
          </td>
        </tr>
      </table>
      <a name="block_1">
      </a>
      <h3 class="Blocktitle">Syntax</h3>&lt;Corr_Status> = CORRTRAFO(&lt;Corr_Vect>, &lt;Corr_Index>, &lt;Corr_Mode>, [ &lt;No_Alarm>])<a name="block_2"></a><h3 class="Blocktitle">Meaning</h3><a id="table_c377441f-3a81-405b-b709-21228bfdf632"></a> <a id="table_0"></a> <a id="table_c377441f-3a81-405b-b709-21228bfdf632"></a> <a id="table_0"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_default" border="1"><colgroup><col width="21.0%"><col width="12.5%"><col width="5.0%"><col width="3.0%"><col width="3.0%"><col width="55.5%"></colgroup><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>CORRTRAFO</code>:</p></td><td colspan="5"><p type="p_table_l" style="margin-top: 4px" align="left">Function call</p></td></tr><tr valign="top"><td rowspan="20"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;Corr_Status></code>:</p></td><td colspan="5"><p type="p_table_l" style="margin-top: 4px" align="left">Function return value</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Data type:</p></td><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">INT</p></td></tr><tr valign="top"><td rowspan="18"><p type="p_table_l" style="margin-top: 4px" align="left">Values:</p></td><td><p type="p_table_r" style="margin-top: 4px" align="right">0</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">The function was executed without an error.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">1</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">No transformation is active.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">2</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">The currently active transformation is not an orientation transformation.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">3</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">The active orientation transformation was not defined with kinematic chains.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">10</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">The <code>&lt;Corr_Index></code> call parameter is negative.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">11</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">The <code>&lt;Corr_Mode></code> call parameter is negative.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">12</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Invalid reference to a section of a subchain (units position of <code>&lt;Corr_Index></code>). The value must not be greater than the number of orientation axes in the subchain.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">13</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Invalid reference to the orientation axis of a subchain (units position of <code>&lt;Corr_Index></code>). The value must be less than the number of orientation axes in the subchain.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">14</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Invalid reference to a subchain (tens position of <code>&lt;Corr_Index></code>). Only the values 0 and 1 are permissible (reference to part or tool chain). This error number occurs if the subchain to which <code>&lt;Corr_Index></code> refers does not exist.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">15</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">There is no correction element in the section referred to with the <code>&lt;Corr_Index></code> parameter ($NT_CORR_ELEM_P or $NT_CORR_ELEM_T).</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">20</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Invalid correction mode (units position of <code>&lt;Corr_Mode></code>). Only the values 0 and 1 are permissible.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">21</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Invalid correction mode (tens and/or hundreds position of <code>&lt;Corr_Mode></code>). Only the units position can be not equal to zero when writing an axis direction.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">30</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">The hundreds position of <code>&lt;Corr_Mode></code> is invalid. Only the values 0 and 1 are permissible.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">31</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">The thousands position of <code>&lt;Corr_Mode></code> is invalid. Only the values 0 and 1 are permissible.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">40</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">The direction vector that is to be taken as axis direction is the zero vector. This error can only happen if the thousands position of <code>&lt;Corr_Mode></code> is equal to 0. If the thousands position of this parameter is equal to 1 (monitoring of the maximum correction deactivated), the zero vector can also be written.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">41</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">For the correction of an offset vector, the difference to the current value in at least one coordinate is greater than the maximum value specified by the setting data SD41610 $SN_CORR_TRAFO_LIN_MAX. The <code>&lt;Corr_Vect></code> parameter will be overwritten by an error vector. This also applies when the processing is aborted with alarm (see <code>&lt;No_Alarm></code> parameter).</p><p type="p_table_l" align="left">In the components whose correction value has exceeded the permissible limit, the error vector has the difference, with the correct sign, between the determined correction value and the limit.</p><p type="p_table_l" align="left">The content of the components that have not exceeded their limit is zero.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">42</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">For the correction of a direction vector, the angular displacement compared to the current direction is greater than the maximum value specified by the setting data SD41611 $SN_CORR_TRAFO_DIR_MAX.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">43</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">The attempt to write a system variable was rejected because of missing write rights.</p></td></tr><tr valign="top"><td rowspan="2"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;</code><code>Corr_Vect</code><code>></code>:</p></td><td colspan="5"><p type="p_table_l" style="margin-top: 4px" align="left">Correction vector</p><p type="p_table_l" align="left">The content of the correction vector is defined by the following parameters &lt;Corr_Index> and <code>&lt;Corr_Mode></code>.</p><p type="p_table_l" align="left">If <code>&lt;Corr_Status> = 41</code>, the content of the vector is overwritten (see above).</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Data type:</p></td><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">REAL</p></td></tr><tr valign="top"><td rowspan="7"><p type="p_table_l" style="margin-top: 4px" align="left">&lt;<code>Corr_Index</code>>:</p></td><td colspan="5"><p type="p_table_l" style="margin-top: 4px" align="left">Section whose correction element is to be modified /<br />index of the orientation axis whose direction vector is to be modified</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Data type:</p></td><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">INT</p></td></tr><tr valign="top"><td colspan="5"><p type="p_table_l" style="margin-top: 4px" align="left">The <code>&lt;Corr_Index></code> parameter is decimal coded (units to tens position):</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Units<br />position:</p></td><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">Contains the index of the section or the orientation axis in the subchain.</p></td></tr><tr valign="top"><td rowspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Tens<br />position:</p></td><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">Refers to the subchain.</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_r" style="margin-top: 4px" align="right"><b>0</b>x</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Workpiece chain</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_r" style="margin-top: 4px" align="right"><b>1</b>x</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Tool chain</p></td></tr><tr valign="top"><td rowspan="18"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;</code><code>Corr_Mode</code><code>>:</code></p></td><td colspan="5"><p type="p_table_l" style="margin-top: 4px" align="left">Correction mode</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Data type:</p></td><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">INT</p></td></tr><tr valign="top"><td colspan="5"><p type="p_table_l" style="margin-top: 4px" align="left">The <code>&lt;Corr_Index></code> parameter is decimal coded (units to thousands position):</p></td></tr><tr valign="top"><td rowspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Units<br />position:</p></td><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">Specifies which element is to be corrected.</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_r" style="margin-top: 4px" align="right">xxx<b>0</b></p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Correction of a linear offset vector</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_r" style="margin-top: 4px" align="right">xxx<b>1</b></p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Correction of the direction vector of an orientation axis</p></td></tr><tr valign="top"><td rowspan="5"><p type="p_table_l" style="margin-top: 4px" align="left">Tens<br />position:</p></td><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">Specifies how the correction element to which the content of <code>&lt;Corr_Index></code> refers, is to be modified.</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_r" style="margin-top: 4px" align="right">xx<b>0</b>x</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">The correction vector is written immediately to the correction element.</p><p type="p_table_l" align="left">This variant can be used to immediately write the correction element without the index &lt;n> of the relevant system data ($NK_OFF_DIR[&lt;n>, ...]) having to be known.</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_r" style="margin-top: 4px" align="right">xx<b>1</b>x</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">As 0, but with the difference that the transferred correction value is interpreted in world coordinates.</p><p type="p_table_l" align="left">A difference between variants 0 and 1 can always occur when the kinematic chain in the initial state (positions of all orientation axes equal to 0) contains other rotations.</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_r" style="margin-top: 4px" align="right">xx<b>2</b>x</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">As 1, but with the difference that the correction value refers to the entire section, i.e. a value is entered in the correction element so that the entire section reaches the length defined by the correction value.</p></td></tr><tr valign="top"><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left"><b>Note:</b><br />The values 1 and 2 are not permissible when writing the direction vector of an orientation axis.</p></td></tr><tr valign="top"><td rowspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">Hundreds<br />position:</p></td><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">Specifies how the content of the <code>&lt;Corr_Vect></code> parameter is to be interpreted.</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_r" style="margin-top: 4px" align="right">x<b>0</b>xx</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">The transferred correction vector <code>&lt;Corr_Vect></code> contains the entire new length of the correction element or the section to which the <code>&lt;Corr_Index></code> in conjunction with the tens position of <code>&lt;Corr_Mode></code> refers (absolute correction).</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_r" style="margin-top: 4px" align="right">x<b>1</b>xx</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">The transferred correction vector <code>&lt;Corr_Vect></code> only contains the difference compared to the current length of the correction element or the section to which the <code>&lt;Corr_Index></code> in conjunction with the tens position of <code>&lt;Corr_Mode></code> refers (incremental correction).</p></td></tr><tr valign="top"><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left"><b>Note:</b><br />For the correction of the direction vector of an orientation axis, the content of the hundreds position must be 0.</p></td></tr><tr valign="top"><td rowspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Thousands<br />position:</p></td><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">Specifies whether the correction is to be limited by the following maximum value:</p><ul class="table"><li><p>SD41610 $SN_CORR_TRAFO_LIN_MAX</p><p>or</p></li><li><p>SD41611 $SN_CORR_TRAFO_DIR_MAX</p></li></ul></td></tr><tr valign="top"><td colspan="2"><p type="p_table_r" style="margin-top: 4px" align="right"><b>0</b>xxx</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Monitoring of the maximum correction is active.</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_r" style="margin-top: 4px" align="right"><b>1</b>xxx</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Monitoring of the maximum correction is not active.</p></td></tr><tr valign="top"><td rowspan="4"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;</code><code>No_Alarm</code><code>></code>:</p></td><td colspan="5"><p type="p_table_l" style="margin-top: 4px" align="left">Behavior in the event of an error (return value > 0) (<b>optional</b>) </p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Data type:</p></td><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">BOOL</p></td></tr><tr valign="top"><td rowspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Value:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">FALSE (default)</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">In the event of an error, the program processing is stopped and alarm 14103 is displayed.</p></td></tr><tr valign="top"><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">TRUE</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">In the event of an error, the program processing is not stopped and no alarm is displayed.</p><p type="p_table_l" align="left">Application: User-specific reaction corresponding to the return value</p></td></tr></table></p><table cellpadding="0" cellspacing="0" border="0"><tr><td><font size="1px"></font></td></tr></table><table class="safety" border="1" bgcolor="#eeeeee"><colgroup><col width="5%"><col width="95%"></colgroup><tr><td><b>Note</b></td></tr><tr><td><p class="safety">In the event of an error when the function is called, either an alarm is output or an error number returned (see &lt;No_Alarm> parameter), so that the user can respond in a suitable way to the error state. The cause of the error is described in more detail through an alarm parameter. An error number returned instead of an alarm is identical to the alarm parameter.</p></td></tr></table></div>
    <p>See also:<br />    <a href="156663249547.html">Modifying the orientation transformation after the machine measurement (CORRTRAFO): Further information</a></p>
  </body>
</html>