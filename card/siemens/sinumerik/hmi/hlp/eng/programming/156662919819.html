<html>
  <head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Axis-specific measurement (MEASA, MEAWA, MEAC) (option) Further information</title>
  </head>
  <body id="bodyID">
    <div id="nsbanner">
      <div id="TitleRowDefault">
        <h1 class="title">Axis-specific measurement (MEASA, MEAWA, MEAC) (option) Further information</h1>
      </div>
    </div>
    <div id="nstext" valign="bottom">
      <p>
      </p>
      <a name="block_1">
      </a>
      <h3 class="Blocktitle">More information</h3>
      <h4 class="Blocklabel">MEASA or MEAWA </h4>
      <p>With MEASA or MEAWA for the programmed axis, up to four measured values are acquired for each measurement and the measurement results are then saved in system variables.</p>
      <p>The following diagram shows the principle of operation of MEASA/MEAWA:</p>
      <a id="image_148862975499_0">
      </a> <img border="0" src="images/162241748491.png" width="397" height="246"/><p>MEASA or MEAWA is used in this example to measure one drilled hole for the X axis along a programmed traversing path. The two trigger events TE1 and TE2 required for this are evaluated in the mode "one after the other in the programmed order". A contact-free switching probe is used (e.g. inductive probe). </p><p>When using function variant "Measurement with delete distance-to-go (MEASA)", axis motion is stopped after <b>all</b> programmed trigger events:</p><a id="image_792654859_0"></a> <img border="0" src="images/166799940363.png" width="397" height="227"/><p>MEAWA is used for special measuring tasks in which a programmed position always has to be approached.</p><table cellpadding="0" cellspacing="0" border="0"><tr><td><font size="1px"></font></td></tr></table><table class="safety" border="1" bgcolor="#eeeeee"><colgroup><col width="5%"><col width="95%"></colgroup><tr><td><b>Note</b></td></tr><tr><td><p class="safety">MEASA cannot be programmed in synchronized actions. As an alternative, MEAWA plus delete distance-to-go can be programmed as a synchronized action.</p><p class="safety">If the measuring job with MEAWA is started from synchronized actions, the measured values will only be available in the machine coordinate system.</p></td></tr></table><h4 class="Blocklabel">Reading measurement results (MEASA/MEAWA)</h4><p>The probe measured values for MEASA/MEAWA can be read via the following system variables in the part program and in synchronized actions:</p><a id="table_aebff490-86a5-aa91-6e57-c3094b162300"></a> <a id="table_0"></a> <a id="table_aebff490-86a5-aa91-6e57-c3094b162300"></a> <a id="table_0"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_default" border="1"><colgroup><col width="25.0%"><col width="75.0%"></colgroup><tr valign="top"><th><p type="p_table_lb" align="left">System variable</p></th><th><p type="p_table_lb" align="left">Meaning</p></th></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">$AA_MM1[&lt;Axis>]</p><p type="p_table_l" align="left">...</p><p type="p_table_l" align="left">$AA_MM4[&lt;Axis>]</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Probe measured value for trigger event 1 in the machine coordinate system</p><p type="p_table_l" align="left">...</p><p type="p_table_l" align="left">Probe measured value for trigger event 4 in the machine coordinate system</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">$AA_MW1[&lt;Axis>]</p><p type="p_table_l" align="left">...</p><p type="p_table_l" align="left">$AA_MW4[&lt;Axis>]</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Probe measured value for trigger event 1 in the workpiece coordinate system</p><p type="p_table_l" align="left">...</p><p type="p_table_l" align="left">Probe measured value for trigger event 4 in the workpiece coordinate system</p></td></tr></table></p><p>If a measuring job is executed by two measuring systems, each of the two possible trigger events is acquired from both measuring systems.</p><p>The assignment of system variables is then as follows:</p><a id="table_fd6d63b2-7d48-28a8-28d1-5794ccd3ce66"></a> <a id="table_1"></a> <a id="table_fd6d63b2-7d48-28a8-28d1-5794ccd3ce66"></a> <a id="table_1"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_default" border="1"><colgroup><col width="50.0%"><col width="50.0%"></colgroup><tr valign="top"><th><p type="p_table_lb" align="left">System variable</p></th><th><p type="p_table_lb" align="left">Meaning</p></th></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">$AA_MM1[&lt;Axis>] or $AA_MW1[&lt;Axis>]</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Measured value from measuring system 1 on trigger event 1</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">$AA_MM2[&lt;Axis>] or $AA_MW2[&lt;Axis>]</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Measured value from measuring system 2 on trigger event 1</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">$AA_MM3[&lt;Axis>] or $AA_MW3[&lt;Axis>]</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Measured value from measuring system 1 on trigger event 2</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">$AA_MM4[&lt;Axis>] or $AA_MW4[&lt;Axis>]</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Measured value from measuring system 2 on trigger event 2</p></td></tr></table></p><h4 class="Blocklabel">MEAC</h4><p>During continuous measurement (MEAC), the programmed trigger events are reactivated after each occurrence. This results in cyclically repeating switching edge programming and evaluation.</p><p>The measured values for MEAC are in the machine coordinate system and stored in the programmed FIFO[&lt;n>] memory. If two probes are configured for the measurement, the measured values of the second probe are stored separately in the FIFO[&lt;n>+1] memory configured specifically for this purpose.</p><p>The FIFO memory is a circular buffer in which measured values are written to $AC_FIFO variables according to the circular principle. Contents can be read only once from the circular buffer. If this measured data is to be used several times, it must be buffered in the net data.</p><p>If the number of measured values for the FIFO memory exceeds the maximum value defined in machine data, the measurement is automatically terminated.</p><p>An endless measuring process can be implemented by reading out measured values cyclically. In this case, data must be read out at least with the same frequency as new measured values are input.</p><p>A typical application example for MEAC is the measurement of toothed workpieces:</p><a id="image_148793652363_0"></a> <img border="0" src="images/166800555147.png" width="189" height="193"/><p>More information: Function Manual Synchronized Actions</p><h4 class="Blocklabel">Feedrate</h4><p>The feedrate must be adjusted to suit the particular measuring task. The permissible feedrate depends on the number of programmed trigger events and the ratio of the interpolation cycle to the position controller cycle.</p><p>In the case of MEASA and MEAWA, the correctness of results can be only guaranteed for feedrates at which no more than one trigger event of the same type and no more than 4 trigger events of different types occur in each position control cycle.</p><p>In the case of continuous measurement with MEAC, the ratio between interpolation cycle and the position control cycle must not exceed 1:8.</p><h4 class="Blocklabel">Optimization</h4><p>With the use of PROFIBUS telegram 391 (default setting for PROFIBUS communication) only one measured value is possible for each trigger event and position control cycle.</p><p>When using PROFIBUS telegram 395, the number of measured values per trigger event and position controller cycle can be increased as follows for MEAC in measurement mode 1:</p><ul><li><p>One probe: 8 measured values for a positive and 8 for a negative edge</p></li><li><p>Two probes: 4 measured values for a rising and 4 for a falling edge for each probe</p></li></ul><p>Higher feedrates or speeds can thus be achieved.</p><h4 class="Blocklabel">Query status</h4><p>If an evaluation is required in the program, whether a probe has been deflected or has switched, the status can be queried through the following system variables:</p><a id="table_af4db7d8-87f8-ed7e-0887-c1a4ae475cfa"></a> <a id="table_2"></a> <a id="table_af4db7d8-87f8-ed7e-0887-c1a4ae475cfa"></a> <a id="table_2"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_default" border="1"><colgroup><col width="25.0%"><col width="30.0%"><col width="15.0%"><col width="7.5%"><col width="22.5%"></colgroup><tr valign="top"><th><p type="p_table_lb" align="left">System variable</p></th><th><p type="p_table_lb" align="left">Meaning</p></th><th><p type="p_table_cb" align="center">Data type</p></th><th><p type="p_table_cb" align="center">Value</p></th><th><p type="p_table_lb" align="left">Meaning</p></th></tr><tr valign="top"><td rowspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">$A_PROBE[&lt;n>]</p></td><td rowspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Deflection state of the probe</p><p type="p_table_l" align="left"></p></td><td rowspan="2"><p type="p_table_c" style="margin-top: 4px" align="center">INT</p></td><td><p type="p_table_c" style="margin-top: 4px" align="center">0</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Probe not deflected.</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">1</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Probe deflected.</p></td></tr><tr valign="top"><td rowspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">$AC_MEA[&lt;n>]</p></td><td rowspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Switching status of the probe</p><p type="p_table_l" align="left">$AC_MEA[&lt;n>] is automatically reset at the beginning of a measurement. </p></td><td rowspan="2"><p type="p_table_c" style="margin-top: 4px" align="center">INT</p></td><td><p type="p_table_c" style="margin-top: 4px" align="center">0</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Probe has not switched</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">1</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Probe has switched (all trigger events programmed in the measuring block have taken place).</p></td></tr></table></p><table cellpadding="0" cellspacing="0" border="0"><tr><td><font size="1px"></font></td></tr></table><table class="safety" border="1" bgcolor="#eeeeee"><colgroup><col width="5%"><col width="95%"></colgroup><tr><td><b>Note</b></td></tr><tr><td><p class="safety">If measurement is started from synchronized actions, $AC_MEA is no longer updated. In this case, the NC/PLC interface signal <code>&lt;Axis>.basic.in.measurementActive </code>or the equivalent variable $AA_MEAACT[&lt;Axis>] must be queried:</p><p class="safety">$AA_MEAACT==1: Measurement active</p><p class="safety">$AA_MEAACT==0: Measurement not active</p></td></tr></table><h4 class="Blocklabel">Probe limitation</h4><p>In the NC program or in synchronized actions, when PROFIBUS telegram 395 is used, the probe limiting status can be read using system variable A_PROBE_LIMITED:</p><p>$A_PROBE_LIMITED[&lt;n>] == 0: Probe limitation inactive/reset</p><p>$A_PROBE_LIMITED[&lt;n>] == 1: Probe limitation active</p><p>&lt;n> = probe number</p><h4 class="Blocklabel">Protection against programming errors</h4><p>The following programming errors are detected and indicated as errors:</p><a id="table_bddd5306-f2ea-a894-c852-e4fcc277b9ea"></a> <a id="table_3"></a> <a id="table_bddd5306-f2ea-a894-c852-e4fcc277b9ea"></a> <a id="table_3"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_default" border="1"><colgroup><col width="30.0%"><col width="70.0%"></colgroup><tr valign="top"><th><p type="p_table_lb" align="left">Description</p></th><th><p type="p_table_lb" align="left">Example</p></th></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">MEASA/MEAWA together with MEAS/MEAW in the same block</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>N01 MEAS=1 MEASA[X]=(1,1) G01 F100 POS[X]=100</code></p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">MEASA/MEAWA with number of parameters &lt;2 or >5</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>N01 MEAWA[X]=(1) G01 F100 POS[X]=100</code></p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">MEASA/MEAWA with trigger event not equal to 1/ -1/ 2/ -2</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>N01 MEASA[B]=(1,1,3) B100</code></p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">MEASA/MEAWA with invalid mode</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>N01 MEAWA[B]=(4,1) B100</code></p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">MEASA/MEAWA with measurement mode 1 and trigger event programmed twice</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>N01 MEASA[B]=(1,1,-1,2,-1) B100</code></p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">MEASA/MEAWA and missing geometry axis</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>N01 MEASA[X]=(1,1) MEASA[Y]=(1,1) G01 X50 Y50 Z50 F100<br />; GEO axis X/Y/Z</code></p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Inconsistent measuring job with geometry axes</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>N01 MEASA[X]=(1,1) MEASA[Y]=(1,1) MEASA[Z]=(1,1,2) G01 X50 Y50 Z50 F100</code></p></td></tr></table></p><a name="block_2"></a><h3 class="Blocktitle">PLC signals</h3><h4 class="Blocklabel">NC → PLC</h4><a id="table_279e2cb5-a871-e1b0-3b7f-ef584af13fa9"></a> <a id="table_4"></a> <a id="table_279e2cb5-a871-e1b0-3b7f-ef584af13fa9"></a> <a id="table_4"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_default" border="1"><colgroup><col width="45.0%"><col width="35.0%"><col width="20.0%"></colgroup><tr valign="top"><th><p type="p_table_lb" align="left">Basic Program Plus</p></th><th colspan="2"><p type="p_table_lb" align="left">Basic Program</p></th></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">&lt;Axis>.basic.in.measurementActive</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">LBP_Axis*.E_MeasAct</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">DB31, … .DBX62.3</p></td></tr></table></p></div>
  </body>
</html>