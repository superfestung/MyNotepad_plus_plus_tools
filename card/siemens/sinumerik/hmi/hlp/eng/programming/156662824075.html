<html>
  <head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Read lines in the file (READ)</title>
  </head>
  <body id="bodyID">
    <div id="nsbanner">
      <div id="TitleRowDefault">
        <h1 class="title">Read lines in the file (READ)</h1>
      </div>
    </div>
    <div id="nstext" valign="bottom">
      <p>
      </p>
      <ul>
      </ul>
      <p>The READ command reads one or several lines in the file specified and stores the information read in an array of type STRING. In this array, each read line occupies an array element.</p>
      <a name="block_1">
      </a>
      <h3 class="Blocktitle">Requirements</h3>
      <h4 class="Blocklabel">Protection level</h4>
      <p>The currently set protection level must be equal to or greater than the READ right of the file. If this is not the case, access is denied with an error message (return value of error variable = 13).</p>
      <h4 class="Blocklabel">Access to EES drives</h4>
      <p>External program memory on drives for which use with the function "Execution from External Storage (EES)" was set up during commissioning, can only be addressed by file handling commands if the license-only option to use this function is set.</p>
      <a name="block_2">
      </a>
      <h3 class="Blocktitle">Syntax</h3>DEF INT &lt;Error>DEF STRING[&lt;StringLength>] &lt;Result>[&lt;n>,&lt;m>]READ(&lt;Error>,"&lt;FileName>",&lt;StartLine>,&lt;NumLines>,&lt;Result>)<a name="block_3"></a><h3 class="Blocktitle">Meaning</h3><a id="table_dd0c6c25-8088-4a16-8db9-e9e2157ab006"></a> <a id="table_0"></a> <a id="table_dd0c6c25-8088-4a16-8db9-e9e2157ab006"></a> <a id="table_0"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_default" border="1"><colgroup><col width="24.2%"><col width="11.3%"><col width="9.0%"><col width="4.5%"><col width="50.8%"></colgroup><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>READ</code> </p></td><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">Command for reading lines from the specified file and storing these lines in a variable array.</p></td></tr><tr valign="top"><td rowspan="12"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;Error></code> </p></td><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">Variable for returning the error value (call-by-reference parameter)</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Type.</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">INT</p></td></tr><tr valign="top"><td rowspan="10"><p type="p_table_l" style="margin-top: 4px" align="left">Value:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">0</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">No error</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">1</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Path not allowed</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">2</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Path not found</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">3</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">File not found</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">4</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Incorrect file type</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">11</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">The file is in use</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">13</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Insufficient access rights</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">21</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Line does not exist (&lt;StartLine> or &lt;NumLines> parameter exceeds the number of lines in the specified file).</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">22</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Array length of the result variable (&lt;Result>) is too small.</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">23</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Line range too large (&lt;NumLines> parameter selected so large that reading would go beyond the end of the file).</p></td></tr><tr valign="top"><td rowspan="3"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;FileName></code> </p></td><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">Name of the file to be read (call-by-value parameter)</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Type:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">STRING</p></td></tr><tr valign="top"><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">The absolute path can be specified before the actual file name. If a path is not specified, the file is searched for in the current directory (= directory of selected program).</p><p type="p_table_l" align="left">Rules regarding path data, see "<a href="156662796555.html">Addressing program memory files</a>".</p></td></tr><tr valign="top"><td rowspan="4"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;StartLine></code> </p></td><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">Start line of the file section to be read (call-by-value parameter)</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Type:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">INT</p></td></tr><tr valign="top"><td rowspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Value:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">0</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Reads the number of lines specified with the &lt;NumLines> parameter before the end of the file.</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">1 to n</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Number of the first line to be read.</p></td></tr><tr valign="top"><td rowspan="2"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;NumLines></code> </p></td><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">Number of lines to be read (call-by-value parameter)</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Type:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">INT</p></td></tr><tr valign="top"><td rowspan="3"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;Result></code> </p></td><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">Result variable (call-by-reference parameter)</p><p type="p_table_l" align="left">Variable array in which the read text is stored.</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Type: </p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">STRING (max. length: 255)</p></td></tr><tr valign="top"><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">If fewer lines are specified in the &lt;NumLines> parameter than the array size [&lt;n>,&lt;m>] of the result variable, the remaining array elements will not be modified.</p><p type="p_table_l" align="left">Termination of a line by means of the control characters "LF" (Line Feed) or "CR LF" (Carriage Return Line Feed) is <b>not</b> stored in the result variable. </p><p type="p_table_l" align="left">Read lines are cropped if the line is longer than the defined string length. An error message is not output.</p></td></tr></table></p><table cellpadding="0" cellspacing="0" border="0"><tr><td><font size="1px"></font></td></tr></table><table class="safety" border="1" bgcolor="#eeeeee"><colgroup><col width="5%"><col width="95%"></colgroup><tr><td><b>Note</b></td></tr><tr><td><p class="safety">Binary files cannot be read in. The "incorrect data type" error is output (return value of the error variable = 4). The following file types are not readable: _BIN, _EXE, _OBJ, _LIB, _BOT, _TRC, _ACC, _CYC, _NCK.</p></td></tr></table><a name="block_4"></a><h3 class="Blocktitle">Example</h3><a id="table_cefff68d-4bf5-44a9-b85b-c5605cebce5a"></a> <a id="table_1"></a> <a id="table_cefff68d-4bf5-44a9-b85b-c5605cebce5a"></a> <a id="table_1"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_listing" border="1" id="EUBAC"><colgroup><col width="54.3%"><col width="45.7%"></colgroup><tr valign="top"><th>Program code</th><th>Comment</th></tr><tr valign="top"><td>N10 DEF INT ERROR</td><td>; Definition of error variables.</td></tr><tr valign="top"><td>N20 DEF STRING[255] RESULT[5]</td><td>; Definition of result variables.</td></tr><tr valign="top"><td>N30 READ(ERROR,"/_N_CST_DIR/_N_TESTFILE_MPF",1,5,RESULT)</td><td>;File name with domain and file identifierand path name.</td></tr><tr valign="top"><td>N40 IF ERROR &lt;>0</td><td>; Error evaluation.</td></tr><tr valign="top"><td>N50 MSG("ERROR"&lt;&lt;ERROR&lt;&lt;"ON READ COMMAND")</td><td> </td></tr><tr valign="top"><td>N60 M0</td><td> </td></tr><tr valign="top"><td>N70 ENDIF</td><td> </td></tr><tr valign="top"><td>...</td><td> </td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><p></p></div>
  </body>
</html>