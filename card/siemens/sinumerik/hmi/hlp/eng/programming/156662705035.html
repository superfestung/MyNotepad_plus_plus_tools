<html>
  <head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Modal subprogram call (MCALL, MCALLOF)</title>
  </head>
  <body id="bodyID">
    <div id="nsbanner">
      <div id="TitleRowDefault">
        <h1 class="title">Modal subprogram call (MCALL, MCALLOF)</h1>
      </div>
    </div>
    <div id="nstext" valign="bottom">
      <p>
      </p>
      <ul>
      </ul>
      <p>With the MCALL subprogram call, the user can activate a modally effective subprogram within a part program, which is automatically selected and processed after each traversing block with path movement following activation, even across program levels.</p>
      <p>In the event that path movements occur in the part program after which the subprogram is not to be executed, automatic selection and execution of the specified subprogram can be suppressed block by block by programming the MCALLOF keyword in the relevant traverse blocks.</p>
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td>
            <font size="1px">
            </font>
          </td>
        </tr>
      </table>
      <table class="safety" border="1" bgcolor="#eeeeee" style="margin-bottom:10px">
        <colgroup>
          <col width="5%">
          <col width="95%">
        </colgroup>
        <tr>
          <td>
            <b>Note</b>
          </td>
        </tr>
        <tr>
          <td>
            <p class="safety">In a program sequence, only the last modal subprogram call is ever effective. The current modal subprogram call replaces the one that has been active up until then.</p>
          </td>
        </tr>
      </table>
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td>
            <font size="1px">
            </font>
          </td>
        </tr>
      </table>
      <table class="safety" border="1" bgcolor="#eeeeee" style="margin-bottom:10px">
        <colgroup>
          <col width="5%">
          <col width="95%">
        </colgroup>
        <tr>
          <td>
            <b>Note</b>
          </td>
        </tr>
        <tr>
          <td>
            <h4 class="Blocklabel">LUD definition and value assignment</h4>
            <p class="safety">The data definition area at the start of the subprogram is only executed once when executing the block with the programmed MCALL call. For the following subprogram calls, after the traversing blocks, the data definition area is no longer executed. This means that a value assigned in the definition of a local user variable (LUD) is no longer available after the first call, but the value that was last written in the cycle. The variable is not recreated after the first call but keeps the last value from the previous call. To work around this response, we recommend that the LUD definition and the value assignment are separated from one another, and the value assignment is programmed in a dedicated block after the data definition area.</p>
          </td>
        </tr>
      </table>
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td>
            <font size="1px">
            </font>
          </td>
        </tr>
      </table>
      <table class="safety" border="1" bgcolor="#eeeeee">
        <colgroup>
          <col width="5%">
          <col width="95%">
        </colgroup>
        <tr>
          <td>
            <b>Notice</b>
          </td>
        </tr>
        <tr>
          <td>
            <h4 class="Blocklabel">Modal subprogram calls without path motion</h4>
            <p class="safety">In the following situations the modal subprogram is also called without programming path motion:</p>
            <ul class="safety">
              <li class="safety">
                <p class="safety">Programming addresses S or F if G0 or G1 is active.</p>
              </li>
              <li class="safety">
                <p class="safety">If G0 or G1 were programmed alone in the block or with additional G commands.</p>
              </li>
            </ul>
          </td>
        </tr>
      </table>
      <a name="block_1">
      </a>
      <h3 class="Blocktitle">Syntax</h3>
      <a id="table_2f540a57-71ff-7134-5b66-8d2bee041246">
      </a> <a id="table_0"></a> <a id="table_2f540a57-71ff-7134-5b66-8d2bee041246"></a> <a id="table_0"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_listing" border="1" id="ENC"><colgroup><col width="83.8%"><col width="16.2%"></colgroup><tr valign="top"><td>...</td><td> </td></tr><tr valign="top"><td>MCALL &lt;ProgName> [(Par1, Par2, ...)]</td><td> </td></tr><tr valign="top"><td>...</td><td> </td></tr><tr valign="top"><td>MCALLOF ...</td><td> </td></tr><tr valign="top"><td>...</td><td> </td></tr><tr valign="top"><td>MCALL</td><td> </td></tr><tr valign="top"><td>...</td><td> </td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><a name="block_2"></a><h3 class="Blocktitle">Meaning</h3><a id="table_61e2dc63-b583-453f-9862-a29fe5822668"></a> <a id="table_1"></a> <a id="table_61e2dc63-b583-453f-9862-a29fe5822668"></a> <a id="table_1"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_default" border="1"><colgroup><col width="35.0%"><col width="10.0%"><col width="55.0%"></colgroup><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>MCALL &lt;ProgName></code> </p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Modally effective subprogram call</p></td></tr><tr valign="top"><td rowspan="2"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;ProgName></code> </p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Name of subprogram</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Type:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">STRING</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>(Par1, Par2, etc.)</code> </p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Transfer parameters (optional)</p><p type="p_table_l" align="left"><b>Note:</b><br />If parameters are transferred to the subprogram, the parameters are only transferred with call!</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>MCALLOF</code>  </p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Suppress modally effective subprogram call block by block</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>MCALL</code> </p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">MCALL without specification of a program name deactivates the modally effective subprogram call.</p></td></tr></table></p><a name="block_3"></a><h3 class="Blocktitle">Constraints</h3><h4 class="Blocklabel">ASUB</h4><p>If the part program processing is interrupted by an ASUB (see Chapter "<a href="156662741643.html">Interrupt routine (ASUB)</a>"), then<b> </b>no modal subprogram calls are executed in this ASUB.</p><p>If an ASUB is started in the "Reset" channel state, then it behaves just like a normal part program with regard to the modal subprogram calls.</p><h4 class="Blocklabel">Tool change cycle</h4><p>If the modally effective subprogram call is deselected during the tool change cycle, note that the tool change cycle is called implicitly, even after a block search, via the search ASUB, or manually via overstore. In this situation, the modally effective subprogram call must not be deselected because otherwise the search result is falsified. It is therefore recommended that the deselection of the modally effective subprogram call in the tool change cycle is programmed as follows:</p><a id="table_339bb83c-dcbf-b841-959b-3502e0d5aa08"></a> <a id="table_2"></a> <a id="table_339bb83c-dcbf-b841-959b-3502e0d5aa08"></a> <a id="table_2"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_listing" border="1" id="EOG"><colgroup><col width="29.5%"><col width="70.5%"></colgroup><tr valign="top"><th>Program code</th><th>Comment</th></tr><tr valign="top"><td>...</td><td> </td></tr><tr valign="top"><td>  IF $AC_ASUB == 0</td><td>; Call is not performed via search ASUB or overstore.</td></tr><tr valign="top"><td>    MCALL</td><td>; Deactivate modally effective subprogram call.</td></tr><tr valign="top"><td>  ENDIF</td><td> </td></tr><tr valign="top"><td>...</td><td> </td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><a name="block_4"></a><h3 class="Blocktitle">Examples</h3><h4 class="Blocklabel">Example 1: Activate/deactivate modally effective subprogram call</h4><a id="table_69202b97-c205-4393-bab9-bf54439be429"></a> <a id="table_3"></a> <a id="table_69202b97-c205-4393-bab9-bf54439be429"></a> <a id="table_3"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_listing" border="1" id="EXH"><colgroup><col width="25.0%"><col width="75.0%"></colgroup><tr valign="top"><th>Program code</th><th>Comment</th></tr><tr valign="top"><td>N10 G0 X0 Y0</td><td> </td></tr><tr valign="top"><td>N20 <b>MCALL L70</b></td><td>; Activate modally effective call for subprogram L70.</td></tr><tr valign="top"><td>N30 X10 Y10</td><td>; X10 Y10 is approached, and then L70 is called.</td></tr><tr valign="top"><td>N40 X20 Y20</td><td>; X20 Y20 is approached, and then L70 is called.</td></tr><tr valign="top"><td>...</td><td> </td></tr><tr valign="top"><td>N100 <b>MCALL</b></td><td>; Deactivate modally effective subprogram call.</td></tr><tr valign="top"><td>N110 X0 Y0</td><td>; X0 Y0 is approached, L70 is <b>not</b> called.</td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><h4 class="Blocklabel">Example 2: Modally effective subprogram call across program levels</h4><a id="table_bf31a8fc-2817-4361-843b-cedd61c89fd1"></a> <a id="table_4"></a> <a id="table_bf31a8fc-2817-4361-843b-cedd61c89fd1"></a> <a id="table_4"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_listing" border="1" id="ERBAC"><colgroup><col width="25.0%"><col width="75.0%"></colgroup><tr valign="top"><th>Program code</th><th> </th></tr><tr valign="top"><td>N10 G0 X0 Y0</td><td> </td></tr><tr valign="top"><td>N20 <b>MCALL L70</b></td><td> </td></tr><tr valign="top"><td>N30 L80</td><td> </td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><p>In this example, the following NC blocks with programmed path axes are in subprogram L80. L70 is called by L80.</p><h4 class="Blocklabel">Example 3: Suppress modally effective subprogram call block by block</h4><a id="table_37e8d39b-90ab-cd58-77bf-8699570e84f2"></a> <a id="table_5"></a> <a id="table_37e8d39b-90ab-cd58-77bf-8699570e84f2"></a> <a id="table_5"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_listing" border="1" id="EOCAC"><colgroup><col width="45.0%"><col width="55.0%"></colgroup><tr valign="top"><th>Program code</th><th>Comment</th></tr><tr valign="top"><td>N10 <b>MCALL L70 (Par1, Par2, …)</b></td><td>; Activate modally effective call for subprogram L70 with parameter transfer.</td></tr><tr valign="top"><td>N20 X=0</td><td>; Traversing set with subsequent execution of L70.</td></tr><tr valign="top"><td>N30 X=100 <b>MCALLOF</b></td><td>; The execution of L70 after this traversing set is suppressed.</td></tr><tr valign="top"><td>N40 X=150</td><td>; Traversing set with subsequent execution of L70.</td></tr><tr valign="top"><td>...</td><td> </td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><p></p></div>
    <p>See also:<br />    <a href="156662695307.html">Subprogram call without parameter transfer</a></p>
  </body>
</html>