<html>
  <head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Interactively call the window from the part program (MMC)</title>
  </head>
  <body id="bodyID">
    <div id="nsbanner">
      <div id="TitleRowDefault">
        <h1 class="title">Interactively call the window from the part program (MMC)</h1>
      </div>
    </div>
    <div id="nstext" valign="bottom">
      <p>
      </p>
      <p>User-specific dialogs from an NC program can be displayed on the user interface via the predefined subprogram MMC(...). </p>
      <p>The configuration of the dialogs can be done for the following types of dialogs:</p>
      <ul>
        <li>
          <p>Run MyScreens </p>
        </li>
        <li>
          <p>User XML</p>
        </li>
      </ul>
      <h4 class="Blocklabel">More information:</h4>
      <ul>
        <li>
          <p>Programming Manual Run MyScreens</p>
        </li>
      </ul>
      <a name="block_1">
      </a>
      <h3 class="Blocktitle">Syntax</h3>MMC("&lt;ADDRESS>,&lt;COMMAND>,&lt;FILE>,&lt;DIALOG>","&lt;QUIT>")<a name="block_2"></a><h3 class="Blocktitle">Meaning</h3><a id="table_5a1d0deb-502a-f945-fc68-2ae65fa4830e"></a> <a id="table_0"></a> <a id="table_5a1d0deb-502a-f945-fc68-2ae65fa4830e"></a> <a id="table_0"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_default" border="1"><colgroup><col width="25.0%"><col width="10.7%"><col width="32.0%"><col width="32.3%"></colgroup><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>MMC(...)</code>:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Subprogram identifier</p><p type="p_table_l" align="left">The parameters are specified position-coded and separated by a comma within two strings, the command string and the acknowledgement string.</p></td></tr><tr valign="top"><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">Parameters within the command string:</p></td></tr><tr valign="top"><td rowspan="5"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;ADDRESS></code>:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Operating area in which the configured user dialog boxes are implemented</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left"><b>Function</b></p></td><td><p type="p_table_l" style="margin-top: 4px" align="left"><b>Operating areas</b></p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">"Run MyScreens" user dialog</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>CYCLES</code></p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">User XML</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>XML</code></p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Pop-up window "Run MyScreens"</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>POPUPDLG</code></p></td></tr><tr valign="top"><td rowspan="5"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;COMMAND></code>:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Command to be executed</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left"><b>Function</b></p></td><td><p type="p_table_l" style="margin-top: 4px" align="left"><b>Commands</b></p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">"Run MyScreens" user dialog</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>PICTURE_ON</code>, <code>PICTURE_OFF</code></p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">User XML</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>XML_ON</code>, <code>XML_OFF</code></p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Pop-up window "Run MyScreens"</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>PICTURE_ON</code>, <code>PICTURE_OFF</code></p></td></tr><tr valign="top"><td rowspan="5"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;FILE></code>:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Name of the file in which the dialog to be displayed is programmed</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left"><b>Function</b></p></td><td><p type="p_table_l" style="margin-top: 4px" align="left"><b>Files</b></p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">"Run MyScreens" user dialog</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;name>.com</code></p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">User XML</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;name>.xml</code></p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Pop-up window "Run MyScreens"</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;name>.com</code></p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;DIALOG></code>:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Name of the dialog configured in the <code>&lt;FILE></code> file</p></td></tr><tr valign="top"><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">Parameters within the acknowledgment string:</p></td></tr><tr valign="top"><td rowspan="3"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;QUIT></code>:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Acknowledgment type</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>N</code>:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">No acknowledgment.</p><p type="p_table_l" align="left">Program execution is continued after the command has been sent. There is no feedback if the command could not be successfully executed.</p><p type="p_table_l" align="left"><b>Note</b></p><p type="p_table_l" align="left">Acknowledgement type "N" must be used if a display time (dwell time) is programmed in the NC program (see Example 2 below)</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>A</code>:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Asynchronous acknowledgment</p><p type="p_table_l" align="left">The program execution is continued after the command is issued. The return value is saved in a user-specific acknowledgement variable (GUD variable), which is defined within the scope of the dialog configuration, and can be read in the NC program.</p></td></tr></table></p><a name="block_3"></a><h3 class="Blocktitle">Constraints</h3><ul><li><p>The definition files *.com of the dialogs must be saved in the "proj" folder.</p></li><li><p>User-defined dialogs from different channels cannot be simultaneously displayed.</p></li><li><p>The MMC functionality is not supported in the simulation.  </p></li></ul><a name="block_4"></a><h3 class="Blocktitle">Examples</h3><h4 class="Blocklabel">Example 1</h4><p>Display of a dialog and response to the user operation in an NC program.</p><a id="table_fa12a8a9-6adf-8127-0d68-b7154d5d522d"></a> <a id="table_1"></a> <a id="table_fa12a8a9-6adf-8127-0d68-b7154d5d522d"></a> <a id="table_1"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_listing" border="1" id="ELBAC"><colgroup><col width="50.0%"><col width="50.0%"></colgroup><tr valign="top"><th>Program code</th><th>Comment</th></tr><tr valign="top"><td colspan="2">; The acknowledgement variable QUIT has already been created as a global user variable (GUD); Of the type STRING when the dialog was configured:; DEF NCK STRING[20] QUIT</td></tr><tr valign="top"><td>QUIT = "XXX"</td><td>; Initialize acknowledgment variable</td></tr><tr valign="top"><td>G4 F5</td><td> </td></tr><tr valign="top"><td>MMC("CYCLES,PICTURE_ON,test.com,test1","A")</td><td>; Display dialog;  - Operating area: CYCLES;  - Picture status: PICTURE_ON (display);  - Dialog screen file: test.com;  - Dialog screen: test1</td></tr><tr valign="top"><td>INPUT:</td><td>; Wait for user input</td></tr><tr valign="top"><td>   STOPRE</td><td>;    Preprocessing stop</td></tr><tr valign="top"><td>   IF MATCH (QUIT,"RUN") >= 0 GOTOF WORK</td><td>;    Softkey "RUN"</td></tr><tr valign="top"><td>   IF MATCH (QUIT,"CHK") >= 0 GOTOF CHECK</td><td>;    Softkey "CHK"</td></tr><tr valign="top"><td>GOTOB INPUT</td><td>; => Wait</td></tr><tr valign="top"><td> </td><td> </td></tr><tr valign="top"><td>WORK:</td><td>; Softkey "RUN" pressed</td></tr><tr valign="top"><td>MSG("Continue with processing -> NC start")</td><td>; Output message</td></tr><tr valign="top"><td>MMC("CYCLES,PICTURE_OFF","N")</td><td>; Close dialog</td></tr><tr valign="top"><td>M0</td><td>; Wait for NC start</td></tr><tr valign="top"><td>GOTOF END</td><td>; => Program end</td></tr><tr valign="top"><td> </td><td> </td></tr><tr valign="top"><td>CHECK:</td><td>; Softkey "CHK" pressed</td></tr><tr valign="top"><td>MSG("Approach position -> NC start")</td><td>; Output message</td></tr><tr valign="top"><td>MMC("CYCLES,PICTURE_OFF","N")</td><td>; Close dialog</td></tr><tr valign="top"><td>M0</td><td>; Wait for NC start</td></tr><tr valign="top"><td>GOTOF END</td><td>; => Program end</td></tr><tr valign="top"><td> </td><td> </td></tr><tr valign="top"><td>END:</td><td> </td></tr><tr valign="top"><td>...</td><td> </td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><h4 class="Blocklabel">Example 2</h4><p>The display time of a dialog is defined in the NC program via a dwell time, for example.</p><a id="table_18a074f2-9ba8-6283-3d3c-b9059e523082"></a> <a id="table_2"></a> <a id="table_18a074f2-9ba8-6283-3d3c-b9059e523082"></a> <a id="table_2"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_listing" border="1" id="EPFAC"><colgroup><col width="62.4%"><col width="37.6%"></colgroup><tr valign="top"><th>Program code</th><th>Comment</th></tr><tr valign="top"><td>F1000 G94</td><td> </td></tr><tr valign="top"><td>...</td><td> </td></tr><tr valign="top"><td>MMC("POPUPDLG,PICTURE_<b>ON</b>,xmldial_emb.xml,main","N")</td><td>; Display dialog</td></tr><tr valign="top"><td>X200</td><td> </td></tr><tr valign="top"><td>Z40</td><td> </td></tr><tr valign="top"><td>MMC("POPUPDLG,PICTURE_<b>OFF</b>","N")</td><td>; Close dialog</td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><h4 class="Blocklabel">Example 3</h4><p>Embedding a popup script in an NC program and its use.</p><a id="table_185f61a5-b775-e609-6b42-ca1708832d8f"></a> <a id="table_3"></a> <a id="table_185f61a5-b775-e609-6b42-ca1708832d8f"></a> <a id="table_3"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_sourcecode" border="1" id="E6GAC"><colgroup><col width="100.0%"></colgroup><tr valign="top"><th><p type="p_table_lb" align="left">Program code</p></th></tr><tr valign="top"><td>PROC POPUP_TEST</td></tr><tr valign="top"><td>; ----------------------------- Script -----------------------------</td></tr><tr valign="top"><td>; &lt;main_dialog entry="rpara_main"></td></tr><tr valign="top"><td>;    &lt;let name="xpos" /></td></tr><tr valign="top"><td>;    &lt;let name="ypos" /></td></tr><tr valign="top"><td>;    &lt;let name="field_name" type="string" /></td></tr><tr valign="top"><td>;    &lt;let name="num" /></td></tr><tr valign="top"><td>;    &lt;menu name="rpara_main"></td></tr><tr valign="top"><td>;       &lt;open_form name="rpara_form"/></td></tr><tr valign="top"><td>;       &lt;softkey_back></td></tr><tr valign="top"><td>;          &lt;close_form /></td></tr><tr valign="top"><td>;       &lt;/softkey_back></td></tr><tr valign="top"><td>;    &lt;/menu></td></tr><tr valign="top"><td>;    &lt;form name="rpara_form"></td></tr><tr valign="top"><td>;       &lt;init></td></tr><tr valign="top"><td>;          &lt;caption>mask from NC part program&lt;/caption></td></tr><tr valign="top"><td>;          &lt;let name="count" >0&lt;/let></td></tr><tr valign="top"><td>;          &lt;op> </td></tr><tr valign="top"><td>;             xpos = 120;</td></tr><tr valign="top"><td>;             ypos = 34; </td></tr><tr valign="top"><td>;             "nck/Channel/Parameter/R[10]" = 10;</td></tr><tr valign="top"><td>;          &lt;/op></td></tr><tr valign="top"><td>;          &lt;!-- load the number of controls --></td></tr><tr valign="top"><td>;          &lt;op></td></tr><tr valign="top"><td>;             num = "nck/Channel/Parameter/R[10]";</td></tr><tr valign="top"><td>;          &lt;/op></td></tr><tr valign="top"><td>;          &lt;while></td></tr><tr valign="top"><td>;             &lt;condition> count &lt; num&lt;/condition></td></tr><tr valign="top"><td>;             &lt;print name="field_name" text="edit%d">count&lt;/print></td></tr><tr valign="top"><td>;             &lt;op></td></tr><tr valign="top"><td>;                ypos = ypos + 24;</td></tr><tr valign="top"><td>;                count = count + 1;</td></tr><tr valign="top"><td>;             &lt;/op></td></tr><tr valign="top"><td>;          &lt;/while></td></tr><tr valign="top"><td>;       &lt;/init></td></tr><tr valign="top"><td>;       &lt;paint></td></tr><tr valign="top"><td>;          &lt;op> </td></tr><tr valign="top"><td>;             xpos =  8;</td></tr><tr valign="top"><td>;             ypos = 36;</td></tr><tr valign="top"><td>;             count = 0;</td></tr><tr valign="top"><td>;          &lt;/op></td></tr><tr valign="top"><td>;          &lt;while></td></tr><tr valign="top"><td>;             &lt;condition>count &lt; num&lt;/condition></td></tr><tr valign="top"><td>;             &lt;print name="field_name" text="R-Parameter%d">count&lt;/print></td></tr><tr valign="top"><td>;             &lt;text xpos = "$xpos" ypos = "$ypos" >$$$field_name&lt;/text></td></tr><tr valign="top"><td>;             &lt;op></td></tr><tr valign="top"><td>;                ypos = ypos + 24;</td></tr><tr valign="top"><td>;                count = count + 1;</td></tr><tr valign="top"><td>;             &lt;/op> </td></tr><tr valign="top"><td>;          &lt;/while></td></tr><tr valign="top"><td>;       &lt;/paint></td></tr><tr valign="top"><td>;    &lt;/form></td></tr><tr valign="top"><td>; &lt;/main_dialog></td></tr><tr valign="top"><td>; ========================= Program section ===========================</td></tr><tr valign="top"><td>...</td></tr><tr valign="top"><td>G94 F100</td></tr><tr valign="top"><td>MMC("POPUPDLG,PICTURE_ON,<b>xmldial_emb.xml</b>,<b>main</b>","N")</td></tr><tr valign="top"><td>G4 F4</td></tr><tr valign="top"><td>X200</td></tr><tr valign="top"><td>MMC("POPUPDLG,PICTURE_OFF","N")</td></tr><tr valign="top"><td>G4 F2</td></tr><tr valign="top"><td>X0</td></tr><tr valign="top"><td>...</td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p></div>
  </body>
</html>