<html>
  <head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Overlaid movements ($AA_OFF)</title>
  </head>
  <body id="bodyID">
    <div id="nsbanner">
      <div id="TitleRowDefault">
        <h1 class="title">Overlaid movements ($AA_OFF)</h1>
      </div>
    </div>
    <div id="nstext" valign="bottom">
      <p>
      </p>
      <a name="block_1">
      </a>
      <h3 class="BlocktitleFirst">Overlaid movements</h3>
      <p>The system variable $AA_OFF can be used to specify a position offset in a channel axis which is traversed immediately:</p>
      <p>$AA_OFF[&lt;channel axis>] = &lt;position offset>   </p>
      <p>The following machine data can be used to set whether the position offset of the system variable is to be assigned or summed up (integrated):</p>
      <p>MD36750 $MA_AA_OFF_MODE, bit 0 = &lt;value></p>
      <a id="table_4bfd02a6-75c4-4320-99c9-3a02fd6ef731">
      </a> <a id="table_0"></a> <a id="table_4bfd02a6-75c4-4320-99c9-3a02fd6ef731"></a> <a id="table_0"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_default" border="1"><colgroup><col width="10.6%"><col width="89.3%"></colgroup><tr valign="top"><th><p type="p_table_lb" align="left">&lt;value></p></th><th><p type="p_table_lb" align="left">Meaning</p></th></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">0</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Assignment: $AA_OFF = &lt;position offset></p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">1</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Summing (integration): $AA_OFF += &lt;position offset></p></td></tr></table></p><a name="block_2"></a><h3 class="Blocktitle">Limitation of the overlay velocity</h3><p>The maximum permissible velocity with which the position offset can be traversed can be set via the machine data:</p><p>MD32070 $MA_CORR_VELO (axis velocity for overlay)</p><a name="block_3"></a><h3 class="Blocktitle">Axial jerk limitation </h3><p>Setting the following machine data activates an axial jerk limitation for the $AA_OFF overlaying:</p><p>MD32420 $MA_JOG_AND_POS_JERK_ENABLE (basic position of axial jerk limitation) = <b>1</b></p><p>The axial jerk is limited to the value set in MD32430 $MA_JOG_AND_POS_MAX_JERK (axial jerk).</p><table cellpadding="0" cellspacing="0" border="0"><tr><td><font size="1px"></font></td></tr></table><table class="safety" border="1" bgcolor="#eeeeee"><colgroup><col width="5%"><col width="95%"></colgroup><tr><td><b>Note</b></td></tr><tr><td><p class="safety">No predictive velocity control can be made for the overlaid $AA_OFF motion. This can cause a discontinuous velocity change, in particular for clocked specification (via synchronous actions) for $AA_OFF overlay values. In such cases, we recommend the deactivation of the jerk limitation when possible.</p></td></tr></table><a name="block_4"></a><h3 class="Blocktitle">Upper limit of the compensation value</h3><p>The value of $AA_OFF can be limited via the following setting data:</p><p>SD43350 $SA_AA_OFF_LIMIT (upper limit of the compensation value $AA_OFF in case of clearance control)</p><p>The status of the limitation can be read via the following system variable:</p><p>$AA_OFF_LIMIT[&lt;axis>] == &lt;value>   </p><a id="table_ea760a65-fac8-4926-8e37-7b063dd4feb1"></a> <a id="table_1"></a> <a id="table_ea760a65-fac8-4926-8e37-7b063dd4feb1"></a> <a id="table_1"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_default" border="1"><colgroup><col width="8.8%"><col width="91.1%"></colgroup><tr valign="top"><th><p type="p_table_lb" align="left">Value</p></th><th><p type="p_table_lb" align="left">Meaning</p></th></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">-1</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Compensation value is limited in the negative direction.</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">1</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Compensation value is limited in the positive direction.</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">0</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">No limitation of the offset value</p></td></tr></table></p><a name="block_5"></a><h3 class="Blocktitle">Reset behavior</h3><p>With static synchronous actions (<code>IDS = &lt;number> DO $AA_OFF = &lt;value></code>), deselection of the position offset effective in $AA_OFF results in an immediate new overlaid movement. The reset behavior with regard to $AA_OFF can therefore be set via the following machine data:</p><p class="comment">MD36750 $MA_AA_OFF_MODE, bit 1 = &lt;value></p><a id="table_3c82bf0e-73b3-4fa7-8fee-6664d147a257"></a> <a id="table_2"></a> <a id="table_3c82bf0e-73b3-4fa7-8fee-6664d147a257"></a> <a id="table_2"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_default" border="1"><colgroup><col width="10.6%"><col width="89.3%"></colgroup><tr valign="top"><th><p type="p_table_lb" align="left" class="comment">&lt;value></p></th><th><p type="p_table_lb" align="left" class="comment">Meaning</p></th></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment">0</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment">The position offset in $AA_OFF is deselected with RESET</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment">1</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment">The position offset in $AA_OFF is retained after RESET</p></td></tr></table></p><a name="block_6"></a><h3 class="Blocktitle">JOG mode</h3><p>Execution of an overlaid movement because of $AA_OFF can also be enabled for JOG mode:</p><p>MD36750 $MA_AA_OFF_MODE, bit 2 = &lt;value></p><a id="table_736967e9-69c2-4de9-927f-11702eda248f"></a> <a id="table_3"></a> <a id="table_736967e9-69c2-4de9-927f-11702eda248f"></a> <a id="table_3"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_default" border="1"><colgroup><col width="10.6%"><col width="89.3%"></colgroup><tr valign="top"><th><p type="p_table_lb" align="left">&lt;value></p></th><th><p type="p_table_lb" align="left">Meaning</p></th></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">0</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">JOG mode: Overlaid movement because of $AA_OFF disabled</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">1</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">JOG mode: Overlaid movement because of $AA_OFF enabled</p></td></tr></table></p><p>A mode change to JOG mode is only possible when the current position offset has been traversed. Otherwise the following alarm is displayed:</p><p>Alarm "16907 Action ... only possible in stop state"</p><a name="block_7"></a><h3 class="Blocktitle">Boundary conditions</h3><ul><li><p>Interrupt routines and ASUB</p><p>When an interrupt routine is activated, modal motion-synchronous actions are retained and are also effective in the ASUB. If the subprogram return is not made with <code>REPOS</code>, the modal synchronous actions changed in the asynchronous subprogram continue to be effective in the main program.</p></li><li><p><code>REPOS</code></p><p>In the remainder of the block, the synchronous actions are treated in the same way as in an interruption block. Modifications to modal synchronous actions in the ASUB are not effective in the interrupted program. Polynomial coefficients programmed with <code>FCTDEF</code> are not affected by ASUB and <code>REPOS</code>.</p><p>The polynomial coefficients from the calling program are active in the ASUB. The polynomial coefficients from the ASUB continue to be active in the calling program.</p></li><li><p>End of program</p><p>Polynomial coefficients programmed with <code>FCTDEF</code> remain active after the end of program.</p></li><li><p>Block search: Collection of the polynomial coefficients</p><p>During block search with calculation, the polynomial coefficients are collected in the system variables.</p></li><li><p>Block search: Deselection of active overlaid movements<br />During block search, the <code>CORROF</code> and <code>DRFOF</code> commands are collected and output in an action block. All the deselected DRF offsets are collected in the last block that contains <code>CORROF</code> or <code>DRFOF</code>.</p><p>The commands for the deselection of overlaid movements <code>CORROF(&lt;axis>, "AA_OFF"</code>) are not collected during a block search. If a user wishes to continue to use this block search, this is possible by means of block search via "SERUPRO" program testing.</p><p><b>Further information<br /></b>Function Manual Basic Functions</p></li><li><p>Deselection of the position offset in case of synchronous actions</p><p>Alarm 21660 is displayed if a synchronous action is active when the position offset is deselected via the <code>CORROF(&lt;axis>,"AA_OFF")</code> command. $AA_OFF is deselected simultaneously and not set again. If the synchronous action becomes active later in the block after <code>CORROF</code>, $AA_OFF remains set and a position offset is interpolated.</p></li></ul><table cellpadding="0" cellspacing="0" border="0"><tr><td><font size="1px"></font></td></tr></table><table class="safety" border="1" bgcolor="#eeeeee"><colgroup><col width="5%"><col width="95%"></colgroup><tr><td><b>Note</b></td></tr><tr><td><p class="safety">The coordinate system (BCS or WCS) in which a main run variable is defined determines whether frames will or will not be included.</p><p class="safety">Distances are always calculated in the set basic system (metric or inch). A change with <code>G70</code> or <code>G71</code> has no effect.</p><p class="safety"><code>DRF</code> offsets, zero offsets external, etc., are only taken into consideration in the case of main run variables that are defined in the MCS.</p></td></tr></table></div>
  </body>
</html>