<html>
  <head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Axis replacement (GET, RELEASE, AXTOCHAN)</title>
  </head>
  <body id="bodyID">
    <div id="nsbanner">
      <div id="TitleRowDefault">
        <h1 class="title">Axis replacement (GET, RELEASE, AXTOCHAN)</h1>
      </div>
    </div>
    <div id="nstext" valign="bottom">
      <p>
      </p>
      <p>Command axes can be interchanged between channels via the <code>GET</code>, <code>RELEASE</code> and <code>AXTOCHAN</code> commands. </p>
      <h4 class="Blocklabel">Requirement</h4>
      <p>The command axis that is interchanged between the channels must be known and parameterized as channel axis in the respective channel.</p>
      <a name="block_1">
      </a>
      <h3 class="Blocktitle">Programming</h3>
      <h4 class="Blocklabel">Syntax</h4>GET(&lt;axis 1> [{, &lt;axis n>}])RELEASE((&lt;axis 1> [{, &lt;axis n> }])AXTOCHAN(&lt;axis 1>, &lt;channel number 1> [{, &lt;axis n>, &lt;channel number n> }])<h4 class="Blocklabel">Meaning</h4><a id="table_b4d8d6ff-a625-4531-acba-1d8b7079f1d3"></a> <a id="table_0"></a> <a id="table_b4d8d6ff-a625-4531-acba-1d8b7079f1d3"></a> <a id="table_0"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_invisible" border="0"><colgroup><col width="19.7%"><col width="20.4%"><col width="59.9%"></colgroup><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>GET</code>:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Request to replace an axis in own channel</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>RELEASE</code>:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Release of an axis for an axis interchange</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>AXTOCHAN</code>:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Request for an axis for replacement in the specified channel</p></td></tr><tr valign="top"><td rowspan="3"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;Axis n></code>:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Machine axis name</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Type:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">AXIS</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Value range:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Machine axis names defined in the channel</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;Channel number n></code>:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Channel number</p></td></tr><tr valign="top"><td> </td><td><p type="p_table_l" style="margin-top: 4px" align="left">Type:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">INTEGER</p></td></tr><tr valign="top"><td> </td><td><p type="p_table_l" style="margin-top: 4px" align="left">Value range:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">1 ... maximum channel number</p></td></tr></table></p><a name="block_2"></a><h3 class="Blocktitle">Axis type and axis status regarding axis interchange</h3><p>The axis type and axis status currently valid at the time of the synchronized action activation can be queried via the $AA_AXCHANGE_TYP or $AA_AXCHANGE_STAT system variable. Depending on the channel that has the current interpolation authorization for this axis and depending on the status for the permissible axis interchange, a different sequence results from the synchronized action.</p><p>An axis can be requested with <code>GET</code> from a synchronized action, if</p><ul class="comment"><li class="comment"><p class="comment">Another channel has the write or interpolation authorization for the axis</p></li><li class="comment"><p class="comment">The requested axis is already assigned to the requested channel</p></li><li class="comment"><p class="comment">The axis in the neutral axis state is controlled by the PLC</p></li><li class="comment"><p class="comment">The axis is a command axis, oscillating axis, or concurrent PLC axis</p></li><li class="comment"><p class="comment">The axis is already assigned to the NC program of the channel</p><table cellpadding="0" cellspacing="0" border="0"><tr><td><font size="1px"></font></td></tr></table><table class="safety" border="1" bgcolor="#eeeeee"><colgroup><col width="5%"><col width="95%"></colgroup><tr><td><b>Note</b></td></tr><tr><td><p class="safety"><b>Constraint:</b> An "axis controlled exclusively by the PLC" or a "permanently assigned PLC axis" cannot be assigned to the NC program.</p></td></tr></table></li></ul><p class="comment">An axis can be released from a synchronized action with <code>RELEASE</code>, if the axis:</p><ul class="comment"><li class="comment"><p class="comment">Was previously assigned to the NC program of the channel</p></li><li class="comment"><p class="comment">Is already in the neutral axis state</p></li><li class="comment"><p class="comment">Already has another channel that has the interpolation authorization of this axis</p></li></ul><a name="block_3"></a><h3 class="Blocktitle">Request axis from another channel</h3><p>If, when the <code>GET</code> action is activated, <b>another channel </b>has the interpolation authorization for the axis $AA_AXCHANGE_TYP[axis] == 2, axis interchange is used to fetch the axis from this channel $AA_AXCHANGE_TYP[axis] == 6 and assign it to the requesting channel as soon as possible. The axis then becomes the <b>neutral axis</b> $AA_AXCHANGE_TYP[axis]==3.</p><p class="comment">The status change to a neutral axis does <b>not</b> result in reorganization in the requesting channel.</p><p class="comment"><b>Requested axis was already requested as neutral axis:</b></p><p class="comment">$AA_AXCHANGE_TYP[&lt;axis>]==6, the axis is required for the NC program $AA_AXCHANGE_TYP[axis] == 5 and assigned as soon as possible to the NC program of the channel $AA_AXCHANGE_TYP[axis] == 0. </p><table cellpadding="0" cellspacing="0" border="0"><tr><td><font size="1px"></font></td></tr></table><table class="safety" border="1" bgcolor="#eeeeee"><colgroup><col width="5%"><col width="95%"></colgroup><tr><td><b>Note</b></td></tr><tr><td><p class="safety">This assignment <b>results in a</b> reorganization.</p></td></tr></table><a name="block_4"></a><h3 class="Blocktitle">Axis is already assigned to the requested channel</h3><p>If the requested axis has already been assigned <b>to this channel </b>at the point of activation, and its status is that of a neutral axis not controlled by the PLC $AA_AXCHANGE_TYP[axis]==3, it is assigned to the NC program $AA_AXCHANGE_TYP[axis]==0.</p><p>This <b>results in a</b> reorganization procedure.</p><a name="block_5"></a><h3 class="Blocktitle">Axis in the state of the neutral axis is controlled from the PLC</h3><p>If the axis is in neutral axis status controlled <b>by the PLC </b>$AA_AXCHANGE_TYP[axis]==4, the axis is requested as a neutral axis $AA_AXCHANGE_TYP[axis] == 8. This disables the axis for automatic axis interchange between channels (Bit 0 == 0) in accordance with the value of bit 0 in machine data:</p><p>MD10722 $MN_AXCHANGE_MASK (parameterization of the axis interchange behavior)   </p><p>This corresponds to $AA_AXCHANGE_STAT[axis] == 1. </p><a name="block_6"></a><h3 class="Blocktitle">Axis is active as command axis / assigned to the PLC</h3><p>If the axis is active as a command axis or oscillating axis or a concurrent positioning axis (PLC axis) ($AA_AXCHANGE_TYP[&lt;axis>] == 1), the axis is requested as a neutral axis ($AA_AXCHANGE_TYP[&lt;axis>] == 8). Depending on the setting in the following machine data, the axis is blocked for an automatic axis interchange between channels:</p><p>MD10722 $MN_AXCHANGE_MASK (parameterization of the axis interchange behavior)</p><p>This corresponds to $AA_AXCHANGE_STAT[&lt;axis>] == 1.</p><p>With a further <code>GET</code> request, the axis is then requested for the NC program ⇒ $AA_AXCHANGE_TYP[axis] == 7.</p><a name="block_7"></a><h3 class="Blocktitle">Axis already assigned to the NC program of the channel</h3><p>If the axis is already assigned to the NC program of the channel ($AA_AXCHANGE_TYP[&lt;axis>] == 0) or if this assignment is requested, e.g. axis interchange triggered by the NC program ($AA_AXCHANGE_TYP[&lt;axis>] == 5 or $AA_AXCHANGE_TYP[&lt;axis>] == 7), there is <b>no</b> state change.</p><a name="block_8"></a><h3 class="Blocktitle">Release axis for axis interchange</h3><p>If the axis is assigned to the NC program at the time of release ($AA_AXCHANGE_TYP[&lt;axis>] == 0), it is transferred to the neutral axis state ($AA_AXCHANGE_TYP[&lt;axis>] == 3) and if required, released for axis interchange in another channel.</p><p>This <b>results in a</b> reorganization procedure.</p><h4 class="Blocklabel">Axis to be released is already a neutral axis:</h4><p>If the axis is already in the neutral axis state ($AA_AXCHANGE_TYP[&lt;axis>] == 3) or active as command or oscillating axis or assigned to the PLC as concurrent positioning axis ($AA_AXCHANGE_TYP[&lt;axis>] == 1), the axis is released for an automatic axis interchange between channels. </p><p>$AA_AXCHANGE_STAT[&lt;axis>] is reset from 1 to 0 if there is no other reason to link the axis to the channel. Such a link of the axis is present, for example, with:</p><ul><li><p>Active axis coupling</p></li><li><p>Active fast retraction</p></li><li><p>Active transformation</p></li><li><p>JOG request</p></li><li><p>Rotating frame with PLC, command or oscillating axis motion</p></li></ul><a name="block_9"></a><h3 class="Blocktitle">Another channel already has the interpolation authorization</h3><p>If another channel already has the interpolation authorization ($AA_AXCHANGE_TYP[&lt;axis>] == 2), there is no state change. This also means that waiting for an axis, triggered by NC program ($AA_AXCHANGE_TYP[&lt;axis>] == 5) or a previous <code>GET</code> request from a synchronized action ($AA_AXCHANGE_TYP[&lt;axis>] == 6) cannot be aborted by a<b> </b><code>RELEASE</code> from a synchronized action.</p><a name="block_10"></a><h3 class="Blocktitle">Constraints</h3><ul><li><p>If several <code>GET</code> requests and <code>RELEASE</code> enables are programmed for the same axis in the action part of a synchronized action or in a block of a technology cycle, they may mutually cancel each other under certain circumstances and only the last respective task is performed.</p><p>Example:</p></li></ul><a id="table_1"></a> <a id="table_1"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_invisible" border="0"><colgroup><col width="21.9%"><col width="78.0%"></colgroup><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment">Programming:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment"><code>GET(X,Y) RELEASE(Y,Z) GET(Z)</code></p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment">Version:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment">GET(X) RELEASE(Y) GET(Z)</p></td></tr></table></p><ul class="comment"><li class="comment"><p class="comment">If further commands are programmed in the action part of a synchronized action in addition to <code>GET</code> / <code>RELEASE</code>, there is no waiting period until the <code>GET</code> / <code>RELEASE</code> request is completed before these commands are executed. This can lead to an error if, for example, an axis requested for the positioning motion with <code>GET</code> is not yet available:</p><p class="comment"><code>GET[&lt;axis>] POS[&lt;axis>]</code></p></li></ul><a name="block_11"></a><h3 class="Blocktitle">Example 1: <code>GET</code> and <code>RELEASE</code> as action in synchronized actions in two channels</h3><p class="comment">Requirement: The Z axis must be channel axis in the 1st and 2nd channel</p><h4 class="Blocklabel">1. Program sequence in the 1st channel:</h4><a id="table_2"></a> <a id="table_2"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_listing" border="1" id="EKCAC"><colgroup><col width="46.8%"><col width="53.2%"></colgroup><tr valign="top"><th>Program code</th><th>Comment</th></tr><tr valign="top"><td>WHEN TRUE DO RELEASE(Z)</td><td>; Z axis becomes neutral</td></tr><tr valign="top"><td colspan="2">; Read-in disable as long as Z axis is program axis</td></tr><tr valign="top"><td colspan="2">WHENEVER $AA_TYP[Z] == 1 DO RDISABLE</td></tr><tr valign="top"><td colspan="2">N110 G4 F0.1</td></tr><tr valign="top"><td colspan="2">...</td></tr><tr valign="top"><td colspan="2">; Z axis become NC program axis again</td></tr><tr valign="top"><td colspan="2">WHEN TRUE DO GET(Z)</td></tr><tr valign="top"><td colspan="2">; Read-in disable until Z axis is program axis</td></tr><tr valign="top"><td colspan="2">WHENEVER $AA_TYP[Z] &lt;> 1 DO RDISABLE</td></tr><tr valign="top"><td colspan="2">N120 G4 F0.1</td></tr><tr valign="top"><td colspan="2">...</td></tr><tr valign="top"><td>WHEN TRUE DO RELEASE(Z)</td><td>; Z axis becomes neutral</td></tr><tr valign="top"><td colspan="2">; Read-in disable as long as Z axis is program axis</td></tr><tr valign="top"><td colspan="2">WHENEVER $AA_TYP[Z] == 1 DO RDISABLE</td></tr><tr valign="top"><td colspan="2">N130 G4 F0.1</td></tr><tr valign="top"><td colspan="2">...</td></tr><tr valign="top"><td>N140 START(2)</td><td>; Start 2nd channel</td></tr><tr valign="top"><td colspan="2">N150 ; See below: "3. Continuation: Program sequence in the 1st channel"</td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><h4 class="Blocklabel">2. Program sequence in the 2nd channel:</h4><a id="table_3"></a> <a id="table_3"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_listing" border="1" id="EDFAC"><colgroup><col width="46.8%"><col width="53.2%"></colgroup><tr valign="top"><th>Program code</th><th>Comment</th></tr><tr valign="top"><td>WHEN TRUE DO GET(Z)</td><td>; Move Z axis to 2nd channel (neutral)</td></tr><tr valign="top"><td colspan="2">; Read-in disable as long as Z axis is in other channel</td></tr><tr valign="top"><td colspan="2">WHENEVER $AA_TYP[Z] == 0 DO RDISABLE</td></tr><tr valign="top"><td colspan="2">N210 G4 F0.1</td></tr><tr valign="top"><td colspan="2">...</td></tr><tr valign="top"><td>WHEN TRUE DO GET(Z)</td><td>; Z axis becomes NC program axis</td></tr><tr valign="top"><td colspan="2">; Read-in disable until Z axis is program axis</td></tr><tr valign="top"><td colspan="2">WHENEVER $AA_TYP[Z] &lt;> 1 DO RDISABLE</td></tr><tr valign="top"><td colspan="2">N220 G4 F0.1</td></tr><tr valign="top"><td colspan="2">...</td></tr><tr valign="top"><td>WHEN TRUE DO RELEASE(Z)</td><td>; Z axis in 2nd channel neutral</td></tr><tr valign="top"><td colspan="2">; Read-in disable as long as Z axis is program axis</td></tr><tr valign="top"><td colspan="2">WHENEVER $AA_TYP[Z] == 1 DO RDISABLE</td></tr><tr valign="top"><td colspan="2">N230 G4 F0.1</td></tr><tr valign="top"><td colspan="2">...</td></tr><tr valign="top"><td>N250 WAITM(10,1,2)</td><td>; Synchronize with channel 1</td></tr><tr valign="top"><td colspan="2">N999 M30</td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><p class="comment"><b>3. Continuation: Program sequence in the 1st channel:</b></p><a id="table_4"></a> <a id="table_4"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_listing" border="1" id="E1HAC"><colgroup><col width="46.8%"><col width="53.2%"></colgroup><tr valign="top"><th>Program code</th><th>Comment</th></tr><tr valign="top"><td>N150 WAITM(10,1,2)</td><td>; Synchronize with channel 2</td></tr><tr valign="top"><td colspan="2">...</td></tr><tr valign="top"><td>WHEN TRUE DO GET(Z)</td><td>; Move Z axis to this channel</td></tr><tr valign="top"><td colspan="2">; Read-in disable as long as Z axis is in other channel</td></tr><tr valign="top"><td colspan="2">WHENEVER $AA_TYP[Z] == 0 DO RDISABLE</td></tr><tr valign="top"><td colspan="2">N160 G4 F0.1</td></tr><tr valign="top"><td colspan="2">...</td></tr><tr valign="top"><td>N199 WAITE(2)</td><td>; Wait for end of program in Channel 2</td></tr><tr valign="top"><td colspan="2">N999 M30</td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><a name="block_12"></a><h3 class="Blocktitle">Transfer axis to another channel (<code>AXTOCHAN</code>) </h3><p class="comment">An axis can be requested for an arbitrary channel from a synchronized action with the <code>AXTOCHAN</code> command.</p><p class="comment">If the axis is already assigned to the NC program of the channel ($AA_AXCHANGE_TYP[&lt;axis>] == 0), there is <b>no</b> state change. </p><p class="comment">If an axis is requested for the same channel from a synchronized action, <code>AXTOCHAN</code> is mapped on the <code>GET</code> command.</p><ul class="comment"><li class="comment"><p class="comment">With the <b>first</b> request for the same channel, the axis becomes a neutral axis.</p></li><li class="comment"><p class="comment">With the <b>second</b> request, the axis is assigned to the NC program.</p></li></ul><h4 class="Blocklabel">Constraint</h4><p class="comment">A "PLC-controlled axis" corresponds to a "concurrent positioning axis" where special constraints must be carefully observed. For further details, see:</p><p class="comment"><b>More information</b></p><p class="comment">Function Manual Axes and Spindles</p><table cellpadding="0" cellspacing="0" border="0"><tr><td><font size="1px"></font></td></tr></table><table class="safety" border="1" bgcolor="#eeeeee"><colgroup><col width="5%"><col width="95%"></colgroup><tr><td><b>Note</b></td></tr><tr><td><p class="safety">A PLC axis cannot replace the channel. </p><p class="safety">An axis controlled exclusively by the PLC cannot be assigned to the NC program.</p></td></tr></table></div>
  </body>
</html>