<html>
  <head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Write file (WRITE)</title>
  </head>
  <body id="bodyID">
    <div id="nsbanner">
      <div id="TitleRowDefault">
        <h1 class="title">Write file (WRITE)</h1>
      </div>
    </div>
    <div id="nstext" valign="bottom">
      <p>
      </p>
      <ul>
      </ul>
      <p>The WRITE command is used to write blocks/data from the NC program at the end of a file (log file) in the passive file system or to external program memory. This can also be the program that is presently being executed. If the file to be written to does not exist in the program memory specified as the target directory, a new file is created.</p>
      <a name="block_1">
      </a>
      <h3 class="Blocktitle">Requirements</h3>
      <h4 class="Blocklabel">Protection level</h4>
      <p>The currently set protection level must be equal to or greater than the WRITE right of the file. If this is not the case, access is denied with an error message (return value of error variable = 13).</p>
      <h4 class="Blocklabel">Access to EES drives</h4>
      <p>External program memory on drives for which use with the function "Execution from External Storage (EES)" was set up during commissioning, can only be addressed by file handling commands if the license-only option to use this function is set.</p>
      <a name="block_2">
      </a>
      <h3 class="Blocktitle">Syntax</h3>
      <a id="table_5cc42080-26d5-4378-8d6e-dbbe0701c61f">
      </a> <a id="table_0"></a> <a id="table_5cc42080-26d5-4378-8d6e-dbbe0701c61f"></a> <a id="table_0"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_sourcecode" border="1" id="E4B"><colgroup><col width="100.0%"></colgroup><tr valign="top"><td>DEF INT &lt;Error></td></tr><tr valign="top"><td>...</td></tr><tr valign="top"><td>WRITE(&lt;Error>,"&lt;FileName>"/"&lt;ExtG>","&lt;Set/Data>")</td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><a name="block_3"></a><h3 class="Blocktitle">Meaning</h3><a id="table_9348d040-85bb-40b8-bf8c-c66eaa3e891d"></a> <a id="table_1"></a> <a id="table_9348d040-85bb-40b8-bf8c-c66eaa3e891d"></a> <a id="table_1"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_default" border="1"><colgroup><col width="19.7%"><col width="9.0%"><col width="6.8%"><col width="64.4%"></colgroup><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>WRITE</code> </p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Command for appending a block or data to the end of the specified file.</p></td></tr><tr valign="top"><td rowspan="14"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;Error></code> </p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left"><b>Parameter 1:</b> Variable for returning the error value.</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Type:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">INT</p></td></tr><tr valign="top"><td rowspan="12"><p type="p_table_l" style="margin-top: 4px" align="left">Value:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">0</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">No error</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">1</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Path not allowed</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">2</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Path not found</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">3</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">File not found</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">4</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Incorrect file type</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">10</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">File is full</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">11</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">The file is in use</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">12</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">No resources available</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">13</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">No access rights</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">14</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Missing or unsuccessful EXTOPEN for the output device</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">15</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Error when writing to an external device</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">16</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Invalid external path has been programmed</p></td></tr><tr valign="top"><td rowspan="3"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;FileName></code> </p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left"><b>Parameter 2: </b>The name of the file in which the specified block or specified data is to be added.</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Type:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">STRING</p></td></tr><tr valign="top"><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">The absolute path can be specified before the actual file name. If a path is not specified, the file is searched for in the current directory (= directory of selected program).</p><p type="p_table_l" align="left">Rules regarding path data, see "<a href="156662796555.html">Addressing program memory files</a>".</p></td></tr><tr valign="top"><td rowspan="3"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;ExtG></code> </p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">If the data is to be output to an external device/file using the "Process DataShare" function, then the symbolic identifiers for the external device/file to be opened must be specified instead of the file name.</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Type:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">STRING</p></td></tr><tr valign="top"><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">For further information, see "<a href="156664199563.html">Process DataShare - output to an external device/file (EXTOPEN, WRITE, EXTCLOSE)</a>".</p><p type="p_table_l" align="left"><b>Note:<br /></b>The identifier must be identical to the identifier specified in the EXTOPEN command. </p></td></tr><tr valign="top"><td rowspan="2"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;Set/Data></code>:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left"><b>Parameter 3:</b> The block or data to be added to the specified file.</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Type:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">STRING</p></td></tr></table></p><table cellpadding="0" cellspacing="0" border="0"><tr><td><font size="1px"></font></td></tr></table><table class="safety" border="1" bgcolor="#eeeeee"><colgroup><col width="5%"><col width="95%"></colgroup><tr><td><b>Note</b></td></tr><tr><td><p class="safety">When writing to the passive file system or to an external program memory, the WRITE command implicitly inserts an "LF" character (LINE FEED = new line) at the end of the output string.</p><p class="safety">This behavior does not apply for output to an external device/file using the "Process DataShare" function. If an "LF" is also to be output, then this must be explicitly specified in the output string.</p><p class="safety">→ also refer to example 3: Implicit/explicit "LF"!</p></td></tr></table><a name="block_4"></a><h3 class="Blocktitle">Constraints</h3><p><b>Maximum file size (→ machine manufacturer)</b></p><p>The maximum possible file size of log files in the passive file system is set with the machine data:</p><p>MD11420 $MN_LEN_PROTOCOL_FILE</p><p>The maximum file length is applicable for all files created using the WRITE command in the passive file system. If it is exceeded, an error message is output and the block or data is not saved. If there is sufficient free memory, a new file can be created.</p><a name="block_5"></a><h3 class="Blocktitle">Examples</h3><h4 class="Blocklabel">Example 1: WRITE command into the passive file system without absolute path data</h4><a id="table_c480131d-1021-4528-88e7-c6a9260badbf"></a> <a id="table_2"></a> <a id="table_c480131d-1021-4528-88e7-c6a9260badbf"></a> <a id="table_2"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_listing" border="1" id="E4BAC"><colgroup><col width="57.5%"><col width="42.5%"></colgroup><tr valign="top"><th>Program code</th><th>Comment</th></tr><tr valign="top"><td>N10 DEF INT ERROR</td><td>; Definition of error variables.</td></tr><tr valign="top"><td>N20 WRITE(ERROR,"PROT","LOG FROM 7.2.97")</td><td>; Write the text "LOG FROM 7.2.97" to file _N_PROT_MPF.</td></tr><tr valign="top"><td>N30 IF ERROR</td><td>; Error evaluation.</td></tr><tr valign="top"><td>N40 MSG ("Error with WRITE command:" &lt;&lt; ERROR)</td><td> </td></tr><tr valign="top"><td>N50 M0</td><td> </td></tr><tr valign="top"><td>N60 ENDIF</td><td> </td></tr><tr valign="top"><td>...</td><td> </td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><p></p><h4 class="Blocklabel">Example 2: WRITE command into the passive file system with absolute path data</h4><a id="table_fc0e2497-6b41-4ff4-ac0a-edda72c2aab5"></a> <a id="table_3"></a> <a id="table_fc0e2497-6b41-4ff4-ac0a-edda72c2aab5"></a> <a id="table_3"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_listing" border="1" id="EQDAC"><colgroup><col width="84.5%"><col width="15.5%"></colgroup><tr valign="top"><th>Program code</th><th> </th></tr><tr valign="top"><td>...</td><td> </td></tr><tr valign="top"><td>WRITE(ERROR,"/_N_WKS_DIR/_N_PROT_WPD/_N_PROT_MPF","LOG FROM 7.2.97")</td><td> </td></tr><tr valign="top"><td>...</td><td> </td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><p></p><h4 class="Blocklabel">Example 3: Implicit/explicit "LF"</h4><p>a) Write to the passive file system with implicitly generated "LF"</p><a id="table_70c8c005-1ef9-4164-9a17-216dd4bdb8c4"></a> <a id="table_4"></a> <a id="table_70c8c005-1ef9-4164-9a17-216dd4bdb8c4"></a> <a id="table_4"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_listing" border="1" id="EMEAC"><colgroup><col width="85.0%"><col width="15.0%"></colgroup><tr valign="top"><th>Program code</th><th> </th></tr><tr valign="top"><td>...</td><td> </td></tr><tr valign="top"><td>N110 DEF INT ERROR</td><td> </td></tr><tr valign="top"><td>N120 WRITE(ERROR,"/_N_MPF_DIR/_N_MYPROTFILE_MPF","MY_STRING")</td><td> </td></tr><tr valign="top"><td>N130 WRITE(ERROR,"/_N_MPF_DIR/_N_MYPROTFILE_MPF","MY_STRING")</td><td> </td></tr><tr valign="top"><td>N140 M30</td><td> </td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><p>Output result:</p><p>MY_STRING</p><p>MY_STRING</p><p></p><p>b) Write to an external file without implicitly generated "LF"</p><a id="table_37866cc2-bb80-4f5b-abcc-b559226ea017"></a> <a id="table_5"></a> <a id="table_37866cc2-bb80-4f5b-abcc-b559226ea017"></a> <a id="table_5"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_listing" border="1" id="ESFAC"><colgroup><col width="85.2%"><col width="14.8%"></colgroup><tr valign="top"><th>Program code</th><th> </th></tr><tr valign="top"><td>...</td><td> </td></tr><tr valign="top"><td>N200 DEF STRING[30] DEV_1</td><td> </td></tr><tr valign="top"><td>N210 DEF INT ERROR</td><td> </td></tr><tr valign="top"><td>N220 DEV_1="LOCAL_DRIVE/myprotfile.mpf"</td><td> </td></tr><tr valign="top"><td>N230 EXTOPEN(ERROR,DEV_1)</td><td> </td></tr><tr valign="top"><td>N240 WRITE(ERROR,DEV_1,"MY_STRING")</td><td> </td></tr><tr valign="top"><td>N250 WRITE(ERROR,DEV_1,"MY_STRING")</td><td> </td></tr><tr valign="top"><td>N260 EXTCLOSE(ERROR,DEV_1)</td><td> </td></tr><tr valign="top"><td>N270 M30</td><td> </td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><p>Output result:</p><p>MY_STRINGMY_STRING</p><p></p><p>c) Write to an external file with explicitly generated "LF"</p><p>The following must be programmed in order to achieve the same result as under a:</p><a id="table_b118522f-7b64-46bd-aa0a-450cb76485e7"></a> <a id="table_6"></a> <a id="table_b118522f-7b64-46bd-aa0a-450cb76485e7"></a> <a id="table_6"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_listing" border="1" id="EIHAC"><colgroup><col width="85.5%"><col width="14.5%"></colgroup><tr valign="top"><th>Program code</th><th> </th></tr><tr valign="top"><td>...</td><td> </td></tr><tr valign="top"><td>N200 DEF STRING[30] DEV_1</td><td> </td></tr><tr valign="top"><td>N210 DEF INT ERROR</td><td> </td></tr><tr valign="top"><td>N220 DEV_1="LOCAL_DRIVE/myprotfile.mpf"</td><td> </td></tr><tr valign="top"><td>N230 EXTOPEN(ERROR,DEV_1)</td><td> </td></tr><tr valign="top"><td>N240 WRITE(ERROR,DEV_1,"MY_STRING<b>'H0A'</b>")</td><td> </td></tr><tr valign="top"><td>N250 WRITE(ERROR,DEV_1,"MY_STRING<b>'H0A'</b>")</td><td> </td></tr><tr valign="top"><td>N260 EXTCLOSE(ERROR,DEV_1)</td><td> </td></tr><tr valign="top"><td>N270 M30</td><td> </td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><p>Output result:</p><p>MY_STRING</p><p>MY_STRING</p></div>
  </body>
</html>