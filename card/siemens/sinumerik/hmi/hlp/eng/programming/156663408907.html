<html>
  <head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Calculating orientations (ORISOLH)</title>
  </head>
  <body id="bodyID">
    <div id="nsbanner">
      <div id="TitleRowDefault">
        <h1 class="title">Calculating orientations (ORISOLH)</h1>
      </div>
    </div>
    <div id="nstext" valign="bottom">
      <p>
      </p>
      <ul>
      </ul>
      <p>The predefined ORISOLH function helps the user to set the rotary axis positions of a machine so that a turning tool can be brought into a defined, kinematic-independent position relative to the workpiece. Prerequisite is that a 6-axis transformation is active that has been parameterized with kinematic chains.</p>
      <p>Two basic functions are available:</p>
      <ul>
        <li>
          <p>Tool alignment</p>
          <p>The β and γ angles are specified. The function calculates the angles of the three orientation axes required for this.</p>
        </li>
        <li>
          <p>Direct tool alignment</p>
          <p>The angles of the second and third orientation axes are specified. The function calculates the associated β and γ angles as well as that of the missing first orientation axis.</p>
        </li>
      </ul>
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td>
            <font size="1px">
            </font>
          </td>
        </tr>
      </table>
      <table class="safety" border="1" bgcolor="#eeeeee">
        <colgroup>
          <col width="5%">
          <col width="95%">
        </colgroup>
        <tr>
          <td>
            <b>Note</b>
          </td>
        </tr>
        <tr>
          <td>
            <h4 class="Blocklabel">Order of the orientation axes</h4>
            <p class="safety">If you run through the kinematic chain that describes the structure of the machine, from the workpiece to the tool, then the following specifications apply for the order of the three orientation axes of a 6-axis transformation:</p>
            <ul class="safety">
              <li class="safety">
                <p class="safety">The orientation axis that is closest to the <b>workpiece</b> is the <b>first</b> orientation axis.</p>
              </li>
              <li class="safety">
                <p class="safety">The orientation axis that is closest to the <b>tool</b> is the <b>third</b> orientation axis.</p>
              </li>
            </ul>
            <p class="safety">Generally, the first orientation axis is a spindle and the corresponding rotation is therefore implemented in these cases through a rotating frame.</p>
          </td>
        </tr>
      </table>
      <a name="block_1">
      </a>
      <h3 class="Blocktitle">Syntax</h3>&lt;RetVal> = ORISOLH(&lt;Cntrl>,&lt;W1>,&lt;W2>)<a name="block_2"></a><h3 class="Blocktitle">Meaning</h3><a id="table_b8813285-ed4e-4b47-962f-5e785413d3e5"></a> <a id="table_0"></a> <a id="table_b8813285-ed4e-4b47-962f-5e785413d3e5"></a> <a id="table_0"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_default" border="1"><colgroup><col width="15.0%"><col width="17.5%"><col width="7.5%"><col width="60.0%"></colgroup><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>ORISOLH</code>:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Function call</p></td></tr><tr valign="top"><td rowspan="20"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;RetVal></code>:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Function return value</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Data type:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">INT</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Range of values:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">0, -2, -3, ..., -17</p></td></tr><tr valign="top"><td rowspan="17"><p type="p_table_l" style="margin-top: 4px" align="left">Values:</p></td><td><p type="p_table_r" style="margin-top: 4px" align="right">0</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Function has ended without an error.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">-2</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">No valid transformation (6-axis orientation transformation) is active.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">-3</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">The first parameter (&lt;Cntrl>) is negative.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">-4</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">The unit position of the first parameter (&lt;Cntrl>) is invalid.</p><p type="p_table_l" align="left">Only the values 0 and 1 are permissible.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">-5</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">The tens position of the first parameter (&lt;Cntrl>) is invalid.</p><p type="p_table_l" align="left">Only the values 0 to 3 are permissible.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">-6</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">The hundreds position of the first parameter (&lt;Cntrl>) is invalid.</p><p type="p_table_l" align="left">Only the values 0 and 1 are permissible.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">-7</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">The thousands position of the first parameter (&lt;Cntrl>) is invalid.</p><p type="p_table_l" align="left">Only the values 0 to 3 are permissible.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">-8</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Angle γ is too large for the "Direct tool alignment" function.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">-9</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">At least one of the specified axis positions violates an axis limit for the "Direct tool alignment" function.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">-10</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">No tool is active.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">-11</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">The requested orientation cannot be set.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">-12</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">The adaptation of the free axis angle for the Hirth joint is not possible for the first or only solution.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">-13</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">The adaptation of the free axis angle for the Hirth joint is not possible for the second solution.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">-14</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">The adaptation of the free axis angle for the Hirth joint is not possible for either of the two solutions.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">-15</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">The first orientation axis is parameterized as Hirth axis.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">-16</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">The second as well as the third rotary axis has been parameterized as Hirth axis. Only one of the two axes can be the Hirth axis.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">-17</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">At least one of the specified axis positions is not compatible with the associated Hirth joint for the "Swivel directly" function.</p></td></tr><tr valign="top"><td rowspan="18"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;Cntrl></code>:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Controls the behavior of the function</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Data type:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">INT</p></td></tr><tr valign="top"><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">The &lt;Cntrl> parameter is decimal coded (unit to thousands position):</p></td></tr><tr valign="top"><td rowspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Unit position:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">The unit position controls the response to errors.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">xxx<b>0</b></p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">In the event of an error (return value &lt; 0), alarm 14106 is output and program processing is aborted.</p><p type="p_table_l" align="left"><b>Note:</b><br />The alarm is also output irrespective of the value of the unit position when the &lt;Cntrl> parameter is negative.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">xxx<b>1</b></p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">In the event of an error (return value &lt; 0) <b>no</b> alarm is output. The user can react suitably in the program.</p></td></tr><tr valign="top"><td rowspan="5"><p type="p_table_l" style="margin-top: 4px" align="left">Tens position:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Controls the behavior when an orientation axis with Hirth joint is present.</p><p type="p_table_l" align="left"><b>Note:</b><br />This parameter is only evaluated for the "Tool alignment" function (i.e. when the hundreds position has the value "0").</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">xx<b>0</b>x</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">The axis position is rounded off to the nearest position.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">xx<b>1</b>x</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">The axis positions are rounded off so that the difference of the β angle to its programmed value is minimal.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">xx<b>2</b>x</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">The axis positions are rounded off so that the β angle is equal to the highest possible value which is less than the programmed value (β is rounded down).</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">xx<b>3</b>x</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">The axis positions are rounded off so that the β angle is equal to the lowest possible value which is greater than the programmed value (β is rounded up).</p></td></tr><tr valign="top"><td rowspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Hundreds position:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Specifies which function is to be executed or the significance of the two following parameters &lt;W1> and &lt;W2>.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">x<b>0</b>xx</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">"Tool alignment" function</p><p type="p_table_l" align="left">Parameters &lt;W1> and &lt;W2> have the following meaning:</p><ul class="table"><li><p>&lt;W1> = β</p></li><li><p>&lt;W2> = γ </p></li></ul><p type="p_table_l" align="left">The associated angles of the orientation axes are calculated.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">x<b>1</b>xx</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">"Direct tool alignment" function</p><p type="p_table_l" align="left">&lt;W1> is the position specification for the second orientation axis, &lt;W2> is the position specification for the third orientation axis of a 6-axis transformation. The position of the first orientation axis and the β and γ angles are defined which are compatible with the two position specifications.</p><p type="p_table_l" align="left">If no error occurs, two solutions are always output in the $P_ORI_POS[&lt;n>, &lt;m>] system variables. The first index &lt;n> (0 or 1) refers to the solution and the second index &lt;m> (0 ... 2) to the orientation axis:</p><ul class="table"><li><p>$P_ORI_POS[0/1, <b>0</b>]: Position of the first orientation axis</p></li><li><p>$P_ORI_POS[0/1, <b>1</b>]: Angle β</p></li><li><p>$P_ORI_POS[0/1, <b>2</b>]: Angle γ</p></li></ul><p>A check is made as to whether the position specifications &lt;W1> and &lt;W2> are compatible with any Hirth joints or active software limits. If this is not the case, a corresponding error number is returned (see &lt;RetVal> parameter).</p><p>If the angles &lt;W1> and &lt;W2> are selected arbitrarily, the cutting edge of the tool is generally not in the machining plane. The angle γ through which the cutting edge is rotated out of the machining plane, must not be greater than the limit value which is defined by the setting data SD42999 $SC_ORISOLH_INCLINE_TOL.</p></td></tr><tr valign="top"><td rowspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">Thousands position:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Specifies which positions of the solutions may be modified when the hundreds position has the value "0", i.e. for the "Tool alignment" function.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right"><b>0</b>xxx</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">The calculated axis positions should be as close as possible to the current machine axis positions.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right"><b>1</b>xxx</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">The calculated axis positions for modulo axes should be as close as possible to the middle of the modulo range, for other axes as close as possible to 0. For non-modulo axes, this means that the axis positions are reduced to the range -180° … +180°.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right"><b>2</b>xxx</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">The calculated axis positions should be reduced to the range -180° … +180° irrespective of the axis type.</p></td></tr><tr valign="top"><td rowspan="2"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;W1></code>:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">First angle</p><p type="p_table_l" align="left">The meaning results from the hundreds position of the &lt;Cntrl> paramter.</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Data type:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">REAL</p></td></tr><tr valign="top"><td rowspan="2"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;W1></code>:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Second angle</p><p type="p_table_l" align="left">The meaning results from the hundreds position of the &lt;Cntrl> paramter.</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Data type:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">REAL</p></td></tr></table></p><table cellpadding="0" cellspacing="0" border="0"><tr><td><font size="1px"></font></td></tr></table><table class="safety" border="1" bgcolor="#eeeeee"><colgroup><col width="5%"><col width="95%"></colgroup><tr><td><b>Note</b></td></tr><tr><td><p class="safety">Parameters that have not been programmed have the default value "0".</p></td></tr></table></div>
    <p>See also:<br />    <a href="156663412363.html">Calculating orientations (ORISOLH): Further information</a><br />    <a href="156663415051.html">Activating the modification of the offset data for rotatable tools (CUTMOD, CUTMODK)</a></p>
  </body>
</html>