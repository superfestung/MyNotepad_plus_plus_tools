<html>
  <head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Fast retraction during thread cutting (LFON, LFOF, DILF, ALF, LFTXT, LFWP, LFPOS, POLF, POLFMASK, POLFMLIN)</title>
  </head>
  <body id="bodyID">
    <div id="nsbanner">
      <div id="TitleRowDefault">
        <h1 class="title">Fast retraction during thread cutting (LFON, LFOF, DILF, ALF, LFTXT, LFWP, LFPOS, POLF, POLFMASK, POLFMLIN)</h1>
      </div>
    </div>
    <div id="nstext" valign="bottom">
      <p>
      </p>
      <ul>
      </ul>
      <p>The "Rapid retraction during thread cutting (G33)" function can be used to interrupt thread cutting without causing irreparable damage in the following situations: </p>
      <ul>
        <li>
          <p>NC stop initiated via <code>&lt;Chan>.basic.out.ncStop</code></p>
        </li>
        <li>
          <p>NC stop implicitly initiated via an alarm</p>
        </li>
        <li>
          <p>
            <a href="156662766347.html">Switching a fast input</a>
          </p>
        </li>
      </ul>
      <p>The retraction motion can be programmed via:</p>
      <ul>
        <li>
          <p>Retraction path and retraction direction (relative)</p>
        </li>
        <li>
          <p>Retraction position (absolute)</p>
          <table cellpadding="0" cellspacing="0" border="0">
            <tr>
              <td>
                <font size="1px">
                </font>
              </td>
            </tr>
          </table>
          <table class="safety" border="1" bgcolor="#eeeeee">
            <colgroup>
              <col width="5%">
              <col width="95%">
            </colgroup>
            <tr>
              <td>
                <b>Note</b>
              </td>
            </tr>
            <tr>
              <td>
                <h4 class="Blocklabel">NC stop signals </h4>
                <p class="safety">During thread cutting, the following NC stop signals do not trigger a rapid retraction:</p>
                <ul class="safety">
                  <li class="safety">
                    <p class="safety">
                      <code>&lt;Chan>.basic.out.ncStopAxesAndSpindles</code> (NC stop axes plus spindles)</p>
                  </li>
                  <li class="safety">
                    <p class="safety">
                      <code>&lt;Chan>.basic.out.ncStopBlockEnd</code> (NC stop at the block limit)</p>
                  </li>
                </ul>
                <h4 class="Blocklabel">Tapping</h4>
                <p class="safety">The "Rapid retraction" function <b>cannot</b> be used with <b>tapping</b> (G331/G332).</p>
              </td>
            </tr>
          </table>
        </li>
      </ul>
      <a name="block_1">
      </a>
      <h3 class="Blocktitle">Syntax</h3>
      <p>Enable rapid retraction, retraction motion via retraction path and retraction direction:</p>G33 ... LFON DILF=&lt;value> LFTXT/LFWP ALF=&lt;value><p>Enable rapid retraction, retraction motion via retraction position:</p><p><code>POLF[&lt;axis identifier>]=&lt;value> LFPOS</code></p>POLFMASK/POLFMLIN(&lt;axis 1 name>,&lt;axis 2 name>, etc.)G33 ... LFON<p>Disable rapid retraction during thread cutting:</p>LFOF<a name="block_2"></a><h3 class="Blocktitle">Meaning</h3><a id="table_dfb82ece-13b1-4ecb-8ed4-03007848ac8c"></a> <a id="table_0"></a> <a id="table_dfb82ece-13b1-4ecb-8ed4-03007848ac8c"></a> <a id="table_0"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_default" border="1"><colgroup><col width="17.4%"><col width="11.3%"><col width="6.6%"><col width="64.6%"></colgroup><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>LFON</code>:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Enable rapid retraction during thread cutting (<code>G33</code>)</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>LFOF</code>:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Disable rapid retraction during thread cutting (<code>G33</code>)</p></td></tr><tr valign="top"><td rowspan="2"><p type="p_table_l" style="margin-top: 4px" align="left"><code>DILF=</code> :</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Define length of retraction path</p></td></tr><tr valign="top"><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">The value preset during MD configuration (MD21200 $MC_LIFTFAST_DIST) can be modified in the part program by programming <code>DILF</code>.</p><p type="p_table_l" align="left"><b>Note:</b><br />The configured MD value is always active following NC-RESET.</p></td></tr><tr valign="top"><td rowspan="3"><p type="p_table_l" style="margin-top: 4px" align="left"><code>LFTXT<br />LFWP</code>:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">The retraction direction is controlled in conjunction with <code>ALF</code> with G commands <code>LFTXT</code> and <code>LFWP</code>.   </p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>LFTXT</code>:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">The plane in which the retraction motion is executed is calculated from the path tangent and the tool direction (default setting). </p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>LFWP</code>:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">The plane in which the retraction motion is executed is the active working plane. </p></td></tr><tr valign="top"><td rowspan="3"><p type="p_table_l" style="margin-top: 4px" align="left"><code>ALF=</code> :</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">The direction is programmed in discrete degree increments with <code>ALF</code> in the plane of the retraction motion.</p></td></tr><tr valign="top"><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">With <code>LFTXT</code>, retraction in the tool direction is defined for <code>ALF=1</code>.</p><p type="p_table_l" align="left">For <code>LFWP</code>, the direction in the machining plane is derived from following assignment:</p><ul class="table"><li><p><code>G17</code> (X/Y plane)</p><p><code>ALF=1</code> ; Retraction in the X direction</p><p><code>ALF=3</code> ; Retraction in the Y direction</p></li><li><p><code>G18</code> (Z/X plane)</p><p><code>ALF=1</code> ; Retraction in the Z direction</p><p><code>ALF=3</code> ; Retraction in the X direction</p></li><li><p><code>G19</code> (Y/Z plane)</p><p><code>ALF=1</code> ; Retraction in the Y direction</p></li></ul><p type="p_table_l" align="left"><code>ALF=3</code> ; Retraction in the Z direction</p></td></tr><tr valign="top"><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left"><b>For more information </b>on the programming options with <code>ALF</code> see Chapter "<a href="156662771211.html">Traversing direction for fast retraction from the contour </a>".</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>LFPOS</code>:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Retraction of the axis declared with <code>POLFMASK</code> or <code>POLFMLIN</code> to the absolute axis position programmed with <code>POLF</code>.</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>POLFMASK</code>:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Release of axes <code>(&lt;axis 1 name>,&lt;axis 1 name>, etc.)</code> for independent retraction to absolute position.</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>POLFMLIN</code>:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Release of axes for retraction to absolute position in linear relation</p><p type="p_table_l" align="left"><b>Note:</b><br />Depending on the dynamic response of all the axes involved, the linear relation cannot always be established before the lift position is reached.</p></td></tr><tr valign="top"><td rowspan="3"><p type="p_table_l" style="margin-top: 4px" align="left"><code>POLF[]</code>:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Define absolute retraction position for the geometry axis or machine axis in the index</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Effective:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Modal</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left"><code>=&lt;value></code>:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">In the case of geometry axes, the assigned value is interpreted as a position in the workpiece coordinate system. In the case of machine axes, it is interpreted as a position in the machine coordinate system.</p><p type="p_table_l" align="left">The values assigned can also be programmed as incremental dimensions:</p><p type="p_table_l" align="left"><code>=IC&lt;value></code></p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;axis identifier></code>:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Identifier of a geometry axis or machine axis.</p></td></tr></table></p><table cellpadding="0" cellspacing="0" border="0"><tr><td><font size="1px"></font></td></tr></table><table class="safety" border="1" bgcolor="#eeeeee" style="margin-bottom:10px"><colgroup><col width="5%"><col width="95%"></colgroup><tr><td><b>Note</b></td></tr><tr><td><p class="safety">LFON or LFOF can always be programmed, but the evaluation is performed exclusively during thread cutting (G33).</p></td></tr></table><table cellpadding="0" cellspacing="0" border="0"><tr><td><font size="1px"></font></td></tr></table><table class="safety" border="1" bgcolor="#eeeeee"><colgroup><col width="5%"><col width="95%"></colgroup><tr><td><b>Note</b></td></tr><tr><td><p class="safety">POLF with POLFMASK/POLFMLIN are not restricted to thread cutting applications.</p></td></tr></table><a name="block_3"></a><h3 class="Blocktitle">Examples</h3><h4 class="Blocklabel">Example 1: Enable rapid retraction during thread cutting</h4><a id="table_77716ced-4b42-41da-b3c9-0d4c5cbfd814"></a> <a id="table_1"></a> <a id="table_77716ced-4b42-41da-b3c9-0d4c5cbfd814"></a> <a id="table_1"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_listing" border="1" id="E4FAC"><colgroup><col width="53.1%"><col width="46.9%"></colgroup><tr valign="top"><th>Program code</th><th>Comment</th></tr><tr valign="top"><td>N55 M3 S500 G90 G18</td><td>; Active machining plane</td></tr><tr valign="top"><td>...</td><td>; Approach the starting position</td></tr><tr valign="top"><td>N65 MSG ("thread cutting")</td><td>; Tool infeed</td></tr><tr valign="top"><td colspan="2">MM_THREAD:</td></tr><tr valign="top"><td>N67 $AC_LIFTFAST=0</td><td>; Reset before starting the thread.</td></tr><tr valign="top"><td colspan="2">N68 G0 Z5</td></tr><tr valign="top"><td colspan="2">N68 X10</td></tr><tr valign="top"><td>N70 G33 Z30 K5 LFON DILF=10 LFWP ALF=7</td><td>; Enable rapid retraction during thread cutting.Retraction path = 10 mmRetraction plane: Z/X (because of G18)Retraction direction: -X(with ALF=3: Retraction direction +X)</td></tr><tr valign="top"><td colspan="2">N71 G33 Z55 X15</td></tr><tr valign="top"><td>N72 G1</td><td>; Deselect thread cutting.</td></tr><tr valign="top"><td>N69 IF $AC_LIFTFAST GOTOB MM_THREAD</td><td>; If thread cutting has been interrupted.</td></tr><tr valign="top"><td colspan="2">N90 MSG ("")</td></tr><tr valign="top"><td colspan="2">...</td></tr><tr valign="top"><td colspan="2">N70 M30</td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><h4 class="Blocklabel">Example 2: Switch off rapid retraction before tapping.</h4><a id="table_bd142fec-d8b9-4e5c-933a-fbe00cdcec39"></a> <a id="table_2"></a> <a id="table_bd142fec-d8b9-4e5c-933a-fbe00cdcec39"></a> <a id="table_2"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_listing" border="1" id="EQIAC"><colgroup><col width="41.0%"><col width="59.0%"></colgroup><tr valign="top"><th>Program code</th><th>Comment</th></tr><tr valign="top"><td colspan="2">N55 M3 S500 G90 G0 X0 Z0</td></tr><tr valign="top"><td colspan="2">...</td></tr><tr valign="top"><td colspan="2">N87 MSG ("tapping")</td></tr><tr valign="top"><td>N88 LFOF</td><td>; Deactivate rapid retraction before tapping.</td></tr><tr valign="top"><td>N89 CYCLE...</td><td>; Tapping cycle with G33.</td></tr><tr valign="top"><td colspan="2">N90 MSG ("")</td></tr><tr valign="top"><td colspan="2">...</td></tr><tr valign="top"><td colspan="2">N99 M30</td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><h4 class="Blocklabel">Example 3: Rapid retraction to absolute retraction position</h4><p>Path interpolation of X is suppressed in the event of a stop and a motion executed to position POLF[X] at maximum velocity instead. The motion of the other axes continues to be determined by the programmed contour or the thread lead and the spindle speed.</p><a id="table_79cad794-40d2-46a3-905c-39776dec9140"></a> <a id="table_3"></a> <a id="table_79cad794-40d2-46a3-905c-39776dec9140"></a> <a id="table_3"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_listing" border="1" id="EDKAC"><colgroup><col width="38.7%"><col width="61.3%"></colgroup><tr valign="top"><th>Program code</th><th>Comment</th></tr><tr valign="top"><td colspan="2">N10 G0 G90 X200 Z0 S200 M3</td></tr><tr valign="top"><td colspan="2">N20 G0 G90 X170</td></tr><tr valign="top"><td colspan="2">N22 POLF[X]=210 LFPOS</td></tr><tr valign="top"><td>N23 POLFMASK(X)</td><td>; Activate (enable) rapid retraction from axis X.</td></tr><tr valign="top"><td colspan="2">N25 G33 X100 I10 LFON</td></tr><tr valign="top"><td colspan="2">N30 X135 Z-45 K10</td></tr><tr valign="top"><td colspan="2">N40 X155 Z-128 K10</td></tr><tr valign="top"><td colspan="2">N50 X145 Z-168 K10</td></tr><tr valign="top"><td colspan="2">N55 X210 I10</td></tr><tr valign="top"><td colspan="2">N60 G0 Z0 LFOF</td></tr><tr valign="top"><td>N70 POLFMASK()</td><td>; Disable lift for all axes.</td></tr><tr valign="top"><td colspan="2">M30</td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><a name="block_4"></a><h3 class="Blocktitle">PLC signals</h3><a id="table_e849b817-f8dd-d3c2-26d6-a2643b47f3c7"></a> <a id="table_4"></a> <a id="table_e849b817-f8dd-d3c2-26d6-a2643b47f3c7"></a> <a id="table_4"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_default" border="1"><colgroup><col width="45.0%"><col width="35.0%"><col width="20.0%"></colgroup><tr valign="top"><th><p type="p_table_lb" align="left">Basic Program Plus</p></th><th colspan="2"><p type="p_table_lb" align="left">Basic Program</p></th></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">&lt;Chan>.basic.out.ncStop</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">LBP_Chan*.A_NCStop</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">DB21, ... DBX7.3</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">&lt;Chan>.basic.out.ncStopAxesAndSpindles </p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">LBP_Chan*.A_NCStopASp</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">DB21, ... DBX7.4</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">&lt;Chan>.basic.out.ncStopBlockEnd </p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">LBP_Chan*.A_NCStopBlock</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">DB21, ... DBX7.2</p></td></tr></table></p></div>
    <p>See also:<br />    <a href="156661881483.html">Thread cutting with constant lead (G33, SF)</a><br />    <a href="156661891211.html">Thread cutting with increasing or decreasing lead (G34, G35)</a></p>
  </body>
</html>