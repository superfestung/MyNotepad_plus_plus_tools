<html>
  <head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Program runtime</title>
  </head>
  <body id="bodyID">
    <div id="nsbanner">
      <div id="TitleRowDefault">
        <h1 class="title">Program runtime</h1>
      </div>
    </div>
    <div id="nstext" valign="bottom">
      <p>
      </p>
      <p>The "program runtime" function provides internal NC timers to monitor technological processes, which can be read into the part program and into synchronized actions via the NC and channel-specific system variables.  </p>
      <p>The trigger for the runtime measurement ($AC_PROG_NET_TIME_TRIGGER) is the only system variable of the function that can be written to – and is used to selectively measure program sections. This means, by writing $AC_PROG_NET_TIME_TRIGGER in the NC program, the time measurement can be enabled and disabled again.</p>
      <a id="table_0">
      </a> <a id="table_0"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_default" border="1"><colgroup><col width="35.5%"><col width="3.7%"><col width="41.1%"><col width="19.6%"></colgroup><tr valign="top"><th><p type="p_table_lb" align="left">System variable</p></th><th colspan="2"><p type="p_table_lb" align="left">Meaning</p></th><th><p type="p_table_lb" align="left">Activity</p></th></tr><tr valign="top"><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left"><b><br />NC-specific</b></p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">$AN_SETUP_TIME  </p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Time since the last control power up with default values ("cold restart") in minutes.</p><p type="p_table_l" align="left">Is automatically reset to "0" every time the control powers up with default values.</p></td><td rowspan="2"><ul class="table"><li><p>Always active</p></li></ul></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">$AN_POWERON_TIME  </p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Time since the last normal control power-up ("warm restart") in minutes.</p><p type="p_table_l" align="left">Is automatically reset to "0" every time the control powers up normally.</p></td></tr><tr valign="top"><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left"><br /><b>Channel-specific</b></p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">$AC_OPERATING_TIME  </p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Total runtime of NC programs in automatic mode in seconds.</p><p type="p_table_l" align="left">The value is automatically reset to "0" every time the control powers up.</p></td><td rowspan="3"><ul class="table"><li><p>Activated via MD27860</p></li><li><p>Only AUTOMATIC mode</p></li></ul></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">$AC_CYCLE_TIME  </p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Runtime of the selected NC program in seconds.</p><p type="p_table_l" align="left">The value is automatically reset to "0" every time a new NC program starts up.</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">$AC_CUTTING_TIME  </p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Processing time in seconds  </p><p type="p_table_l" align="left">The runtime of the path axes (at least one is active) is measured in all NC programs between NC start and end of program/NC reset without rapid traverse active. The measurement is interrupted when a dwell time is active.</p><p type="p_table_l" align="left">The value is automatically reset to "0" every time the control powers up with default values.</p></td></tr><tr valign="top"><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left"></p> </td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">$AC_ACT_PROG_NET_TIME  </p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Actual net runtime of the current NC program in seconds.</p><p type="p_table_l" align="left">Is automatically reset to "0" when a new NC program starts.</p></td><td rowspan="3"><ul class="table"><li><p>Always active</p></li><li><p>Only AUTOMATIC mode</p></li></ul></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">$AC_OLD_PROG_NET_TIME  </p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Net runtime in seconds of the program that has just be correctly ended with M30</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">$AC_OLD_PROG_NET_TIME_COUNT  </p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Changes to $AC_OLD_PROG_NET_TIME</p><p type="p_table_l" align="left">After POWER ON, $AC_OLD_PROG_NET_TIME_COUNT is at "0".</p><p type="p_table_l" align="left">$AC_OLD_PROG_NET_TIME_COUNT is always increased if the control has newly written to $AC_OLD_PROG_NET_TIME.</p></td></tr><tr valign="top"><td rowspan="6"><p type="p_table_l" style="margin-top: 4px" align="left">$AC_PROG_NET_TIME_TRIGGER  </p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Trigger for the runtime measurement:</p></td><td rowspan="6"><ul class="table"><li><p>Only AUTOMATIC mode</p></li></ul></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">0</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Neutral state</p><p type="p_table_l" align="left">The trigger is not active.</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">1</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Exit</p><p type="p_table_l" align="left">Ends the measurement and copies the value from $AC_ACT_PROG_NET_TIME into $AC_OLD_PROG_NET_TIME.$AC_ACT_PROG_NET_TIME is set to "0" and then continues to run.</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">2</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Start</p><p type="p_table_l" align="left">Starts the measurement and in so doing sets $AC_ACT_PROG_NET_TIME to "0". $AC_OLD_PROG_NET_TIME is not changed.</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">3</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Stop</p><p type="p_table_l" align="left">Stops the measurement. Does not change $AC_OLD_PROG_NET_TIME and keeps $AC_ACT_PROG_NET_TIME constant until it resumes</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">4</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Resume</p><p type="p_table_l" align="left">The measurement is resumed, i.e. a measurement that was previously stopped is continued. $AC_ACT_PROG_NET_TIME continues. $AC_OLD_PROG_NET_TIME is not changed.</p></td></tr><tr valign="top"><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">All system variables are reset to "0" as a result of POWER ON!</p></td></tr></table></p><table cellpadding="0" cellspacing="0" border="0"><tr><td><font size="1px"></font></td></tr></table><table class="safety" border="1" bgcolor="#eeeeee" style="margin-bottom:10px"><colgroup><col width="5%"><col width="95%"></colgroup><tr><td><b>Note</b></td></tr><tr><td><h4 class="Blocklabel">Machine manufacturer</h4><p class="safety">Machine data MD27860 $MC_PROCESSTIMER_MODE is used to switch-in the timer that can be activated.</p><p class="safety">The behavior of active time measurements for certain functions (e.g. GOTOS, override = 0%, active dry run feedrate, program test, ASUB, PROG_EVENT, …) is configured using machine data MD27850 $MC_PROG_NET_TIMER_MODE and MD27860 $MC_PROCESSTIMER_MODE.</p><p class="safety"><b>More information: </b>Function Manual Basic Functions</p></td></tr></table><table cellpadding="0" cellspacing="0" border="0"><tr><td><font size="1px"></font></td></tr></table><table class="safety" border="1" bgcolor="#eeeeee" style="margin-bottom:10px"><colgroup><col width="5%"><col width="95%"></colgroup><tr><td><b>Note</b></td></tr><tr><td><h4 class="Blocklabel">Residual time for a workpiece   </h4><p class="safety">If the same workpieces are machined one after the other then using the following timer values the remaining residual time for a workpiece can be determined:</p><ul class="safety"><li class="safety"><p class="safety">Processing time for the last workpiece produced (see $AC_OLD_PROG_NET_TIME)</p></li><li class="safety"><p class="safety">Current processing time (see $AC_ACT_PROG_NET_TIME)</p></li></ul><p class="safety">The residual time is displayed on the user interface in addition to the current processing time.</p></td></tr></table><table cellpadding="0" cellspacing="0" border="0"><tr><td><font size="1px"></font></td></tr></table><table class="safety" border="1" bgcolor="#eeeeee"><colgroup><col width="5%"><col width="95%"></colgroup><tr><td><b>Note</b></td></tr><tr><td><h4 class="Blocklabel">Using STOPRE</h4><p class="safety">The system variables $AC_OLD_PROG_NET_TIME and $AC_OLD_PROG_NET_TIME_COUNT do not generate any implicit preprocessing stop. This is uncritical when used in the part program if the value of the system variables comes from the previous program run. However, if the trigger for the runtime measurement ($AC_PROG_NET_TIME_TRIGGER) is written very frequently and as a result $AC_OLD_PROG_NET_TIME changes very frequently, then an explicit STOPRE should be used in the part program.</p></td></tr></table><a name="block_1"></a><h3 class="Blocktitle">Constraints</h3><ul><li><p><b>Block search</b></p><p>No program runtimes are determined through block searches.</p></li><li><p><b>REPOS</b></p><p>The duration of a REPOS process is added to the current processing time ($AC_ACT_PROG_NET_TIME).</p></li></ul><a name="block_2"></a><h3 class="Blocktitle">Examples</h3><h4 class="Blocklabel">Example 1: Measuring the duration of "mySubProgrammA"</h4><a id="table_1"></a> <a id="table_1"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_listing" border="1" id="ENBAC"><colgroup><col width="66.7%"><col width="33.3%"></colgroup><tr valign="top"><th>Program code</th><th> </th></tr><tr valign="top"><td>...</td><td> </td></tr><tr valign="top"><td>N50 WHEN TRUE DO $AC_PROG_NET_TIME_TRIGGER=2</td><td> </td></tr><tr valign="top"><td>N60 FOR ii= 0 TO 300</td><td> </td></tr><tr valign="top"><td>N70 mySubProgrammA</td><td> </td></tr><tr valign="top"><td>N80 WHEN TRUE DO $AC_PROG_NET_TIME_TRIGGER=1</td><td> </td></tr><tr valign="top"><td>N95 ENDFOR</td><td> </td></tr><tr valign="top"><td>N97 mySubProgrammB</td><td> </td></tr><tr valign="top"><td>N98 M30</td><td> </td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><p>After the program has processed line N80, the net runtime of "mySubProgrammA" is located in $AC_OLD_PROG_NET_TIME.</p><p>The following applies for the value of $AC_OLD_PROG_NET_TIME:</p><ul><li><p>It is kept beyond M30.</p></li><li><p>It is updated after each loop cycle.</p></li></ul><h4 class="Blocklabel">Example 2: Measuring the duration of "mySubProgrammA" and "mySubProgrammC"</h4><a id="table_2"></a> <a id="table_2"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_listing" border="1" id="EBDAC"><colgroup><col width="66.7%"><col width="33.3%"></colgroup><tr valign="top"><th>Program code</th><th> </th></tr><tr valign="top"><td>...</td><td> </td></tr><tr valign="top"><td>N10 WHEN TRUE DO $AC_PROG_NET_TIME_TRIGGER=2</td><td> </td></tr><tr valign="top"><td>N20 mySubProgrammA</td><td> </td></tr><tr valign="top"><td>N30 WHEN TRUE DO $AC_PROG_NET_TIME_TRIGGER=3</td><td> </td></tr><tr valign="top"><td>N40 mySubProgrammB</td><td> </td></tr><tr valign="top"><td>N50 WHEN TRUE DO $AC_PROG_NET_TIME_TRIGGER=4</td><td> </td></tr><tr valign="top"><td>N60 mySubProgrammC</td><td> </td></tr><tr valign="top"><td>N70 WHEN TRUE DO $AC_PROG_NET_TIME_TRIGGER=1</td><td> </td></tr><tr valign="top"><td>N80 mySubProgrammD</td><td> </td></tr><tr valign="top"><td>N90 M30</td><td> </td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p></div>
  </body>
</html>