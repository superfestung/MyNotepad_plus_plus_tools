<html>
  <head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Read out file information (FILEDATE, FILETIME, FILESIZE, FILESTAT, FILEINFO)</title>
  </head>
  <body id="bodyID">
    <div id="nsbanner">
      <div id="TitleRowDefault">
        <h1 class="title">Read out file information (FILEDATE, FILETIME, FILESIZE, FILESTAT, FILEINFO)</h1>
      </div>
    </div>
    <div id="nstext" valign="bottom">
      <p>
      </p>
      <ul>
      </ul>
      <p>The FILEDATE, FILETIME, FILESIZE, FILESTAT, and FILEINFO commands read out specific file information such as date/time of the last write access, current file size, file status or all of this information. </p>
      <a name="block_1">
      </a>
      <h3 class="Blocktitle">Requirements</h3>
      <h4 class="Blocklabel">Protection level</h4>
      <p>The currently set protection level must be equal to or greater than the show right of the superordinate directory. If this is not the case, access is denied with an error message (return value of error variable = 13).</p>
      <h4 class="Blocklabel">Access to EES drives</h4>
      <p>External program memory on drives for which use with the function "Execution from External Storage (EES)" was set up during commissioning, can only be addressed by file handling commands if the license-only option to use this function is set.</p>
      <a name="block_2">
      </a>
      <h3 class="Blocktitle">Syntax</h3>FILEx(&lt;Error>,"&lt;FileName>",&lt;Result>)<a name="block_3"></a><h3 class="Blocktitle">Meaning</h3><a id="table_a514ad27-b984-47ca-bdff-98c7c4298578"></a> <a id="table_0"></a> <a id="table_a514ad27-b984-47ca-bdff-98c7c4298578"></a> <a id="table_0"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_default" border="1"><colgroup><col width="23.2%"><col width="9.6%"><col width="2.4%"><col width="7.2%"><col width="11.3%"><col width="9.0%"><col width="37.1%"></colgroup><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>FILEDATE</code> </p></td><td colspan="6"><p type="p_table_l" style="margin-top: 4px" align="left">Returns the <b>date</b> of the last write access to a file</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>FILETIME</code> </p></td><td colspan="6"><p type="p_table_l" style="margin-top: 4px" align="left">Returns the <b>time</b> of the last write access to a file</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>FILESIZE</code> </p></td><td colspan="6"><p type="p_table_l" style="margin-top: 4px" align="left">Returns the <b>current size</b> of a file</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>FILESTAT</code> </p></td><td colspan="6"><p type="p_table_l" style="margin-top: 4px" align="left">Returns a file with regard to the following <b>rights</b> for the <b>status</b>:</p><ul class="table"><li><p>Read (r: read)</p></li><li><p>Write (w: write)</p></li><li><p>Execute (x: execute)</p></li><li><p>Show (s: show)</p></li><li><p>Delete (d: delete)</p></li></ul><p type="p_table_l" align="left"><b>Note:</b><br />These protection levels are specific properties of the passive file system. When accessing an external program memory, FILESTAT therefore supplies default access rights (77777).</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>FILEINFO</code> </p></td><td colspan="6"><p type="p_table_l" style="margin-top: 4px" align="left">Returns the <b>sum of the information</b> for a file that can be read out via FILEDATE, FILETIME, FILESIZE and FILESTAT</p></td></tr><tr valign="top"><td rowspan="9"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;Error></code> </p></td><td colspan="6"><p type="p_table_l" style="margin-top: 4px" align="left">Variable for returning the error value (call-by-reference parameter)</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Type.</p></td><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">VAR INT</p></td></tr><tr valign="top"><td colspan="2" rowspan="7"><p type="p_table_l" style="margin-top: 4px" align="left">Value:</p></td><td><p type="p_table_c" style="margin-top: 4px" align="center">0</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">No error</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">1</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Path not allowed</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">2</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Path not found</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">3</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">File not found</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">4</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Incorrect file type</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">13</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Insufficient access rights</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">22</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">String length of the result variable (&lt;Result>) is too small.</p></td></tr><tr valign="top"><td rowspan="3"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;FileName></code> </p></td><td colspan="6"><p type="p_table_l" style="margin-top: 4px" align="left">Name of the file from which the file information is to be read out</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Type:</p></td><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">CHAR[160]</p></td></tr><tr valign="top"><td colspan="6"><p type="p_table_l" style="margin-top: 4px" align="left">The absolute path can be specified before the actual file name. If a path is not specified, the file is searched for in the current directory (= directory of selected program).</p><p type="p_table_l" align="left">Rules regarding path data, see "<a href="156662796555.html">Addressing program memory files</a>".</p></td></tr><tr valign="top"><td rowspan="6"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;Result></code> </p></td><td colspan="6"><p type="p_table_l" style="margin-top: 4px" align="left">Result variable (Call-By-Reference parameter)</p><p type="p_table_l" align="left">Variable in which the requested file information is stored.</p></td></tr><tr valign="top"><td rowspan="5"><p type="p_table_l" style="margin-top: 4px" align="left">Type:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">VAR CHAR[8]</p><p type="p_table_l" align="left"></p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">at</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">FILEDATE</p><p type="p_table_l" align="left">Format: "dd.mm.yy"</p></td></tr><tr valign="top"><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">VAR CHAR[8]</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">at</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">FILETIME</p><p type="p_table_l" align="left">Format: "hh.mm.ss"</p></td></tr><tr valign="top"><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">VAR INT</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">at</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">FILESIZE</p><p type="p_table_l" align="left">The file size is output in bytes.</p></td></tr><tr valign="top"><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">VAR CHAR[5]</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">at</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">FILESTAT</p><p type="p_table_l" align="left">Format: "rwxsd"</p><p type="p_table_l" align="left">(r: <b>r</b>ead, w: <b>w</b>rite, x: e<b>x</b>ecute, s: <b>s</b>how, d: <b>d</b>elete)</p></td></tr><tr valign="top"><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">VAR CHAR[32]</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">at</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">FILEINFO</p><p type="p_table_l" align="left">Format: "rwxsd nnnnnnnn dd.mm.yy hh:mm:ss"</p></td></tr></table></p><a name="block_4"></a><h3 class="Blocktitle">Example</h3><a id="table_6e9691de-3dea-4b49-9e95-9610748727a5"></a> <a id="table_1"></a> <a id="table_6e9691de-3dea-4b49-9e95-9610748727a5"></a> <a id="table_1"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_listing" border="1" id="EUEAC"><colgroup><col width="63.6%"><col width="36.4%"></colgroup><tr valign="top"><th>Program code</th><th>Comment</th></tr><tr valign="top"><td>N10 DEF INT ERROR</td><td>; Definition of error variables.</td></tr><tr valign="top"><td>N20 STRING[32] RESULT</td><td>; Definition of result variables.</td></tr><tr valign="top"><td>N30 FILEINFO(ERROR,"/_N_MPF_DIR/_N_TESTFILE_MPF",RESULT)</td><td>; File name with domain, file ID and path data.</td></tr><tr valign="top"><td>N40 IF ERROR &lt;> 0</td><td>; Error evaluation</td></tr><tr valign="top"><td>N50    MSG("ERROR"&lt;&lt;ERROR&lt;&lt;"ON FILEINFO COMMAND")</td><td> </td></tr><tr valign="top"><td>N60    M0</td><td> </td></tr><tr valign="top"><td>N70 ENDIF</td><td> </td></tr><tr valign="top"><td>...</td><td> </td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><p>In the result variables RESULT, the example could supply the following result:</p><p>"77777 12345678 26.05.00 13:51:30"</p></div>
  </body>
</html>