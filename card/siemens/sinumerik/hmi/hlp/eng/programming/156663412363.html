<html>
  <head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Calculating orientations (ORISOLH): Further information</title>
  </head>
  <body id="bodyID">
    <div id="nsbanner">
      <div id="TitleRowDefault">
        <h1 class="title">Calculating orientations (ORISOLH): Further information</h1>
      </div>
    </div>
    <div id="nstext" valign="bottom">
      <p>
      </p>
      <a name="block_1">
      </a>
      <h3 class="BlocktitleFirst">Further information</h3>
      <p>The number of solutions found together with further status information when executing the ORISOLH function, can be read via the following system variables:</p>
      <a id="table_b55bb662-eaaa-0453-2765-013c22f653fa">
      </a> <a id="table_0"></a> <a id="table_b55bb662-eaaa-0453-2765-013c22f653fa"></a> <a id="table_0"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_default" border="1"><colgroup><col width="18.5%"><col width="7.5%"><col width="6.5%"><col width="6.5%"><col width="6.5%"><col width="6.0%"><col width="48.5%"></colgroup><tr valign="top"><th><p type="p_table_lb" align="left">System variable</p></th><th colspan="6"><p type="p_table_lb" align="left">Meaning</p></th></tr><tr valign="top"><td rowspan="7"><p type="p_table_l" style="margin-top: 4px" align="left">$P_ORI_POS<br />[&lt;n>, &lt;m>]</p></td><td colspan="6"><p type="p_table_l" style="margin-top: 4px" align="left">Returns the angles of the orientation axes that result from the orientation programming.</p></td></tr><tr valign="top"><td rowspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">&lt;n>:</p></td><td colspan="5"><p type="p_table_l" style="margin-top: 4px" align="left">Index of the solution </p></td></tr><tr valign="top"><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Range of values:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">0, 1</p></td></tr><tr valign="top"><td rowspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">&lt;m>:</p></td><td colspan="5"><p type="p_table_l" style="margin-top: 4px" align="left">Index of the orientation axis</p></td></tr><tr valign="top"><td colspan="3" rowspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Range of values:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">0 ... 2</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">The order of the orientation axes (1 ... 3) refers to the definition of the axes in $NT_ROT_AX_NAME.</p></td></tr><tr valign="top"><td colspan="6"><p type="p_table_l" style="margin-top: 4px" align="left">When the ORISOLH function is called in the "Direct tool alignment" mode, the $P_ORI_POS[0/1, 1] and P_ORI_POS[0/1, 2] variables contain the values of the two angles β and γ belonging to the two solutions.</p><p type="p_table_l" align="left">The first solution entered in $P_ORI_POS[&lt;n>, &lt;m>], i.e. with the index &lt;n> = 0, is always the solution that is selected by the control when the requested orientation is approached directly. The second index &lt;m> refers to the orientation axis, i.e. on $NT_ROT_AX_NAME.</p><p type="p_table_l" align="left">The axis positions entered in $P_ORI_POS[&lt;n>, &lt;m>] take into account the offsets entered in $NK_OFF and $NK_OFF_FINE, i.e. these axis angles can be used in the following blocks to set the required orientation without any further modification.</p><p type="p_table_l" align="left">If a rotary axis is a Hirth axis, the solution positions are rounded off to the nearest position of rest of the Hirth joint. For Hirth jointed rotary axes, you can read the differences between the axis positions for the exact solutions and those of the solutions adapted to the Hirth incrementing in the $P_ORI_DIFF system variable.</p></td></tr><tr valign="top"><td rowspan="7"><p type="p_table_l" style="margin-top: 4px" align="left">$P_ORI_DIFF<br />[&lt;n>, &lt;m>]</p></td><td colspan="6"><p type="p_table_l" style="margin-top: 4px" align="left">Returns the difference between the exact positions of the orientation axes and those provided in $P_ORI_POS that result from the orientation programming.</p></td></tr><tr valign="top"><td rowspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">&lt;n>:</p></td><td colspan="5"><p type="p_table_l" style="margin-top: 4px" align="left">Index of the solution </p></td></tr><tr valign="top"><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Range of values:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">0, 1</p></td></tr><tr valign="top"><td rowspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">&lt;m>:</p></td><td colspan="5"><p type="p_table_l" style="margin-top: 4px" align="left">Index of the orientation axis</p></td></tr><tr valign="top"><td colspan="3" rowspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Range of values:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">0 ... 2</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">The order of the orientation axes (1 ... 3) refers to the definition of the axes in $NT_ROT_AX_NAME.</p></td></tr><tr valign="top"><td colspan="6"><p type="p_table_l" style="margin-top: 4px" align="left">The content can only be not equal to zero when the positions are incremented (Hirth joint), i.e. when the system data $NT_HIRTH_INCR of the relevant axis is not equal to zero and when this axis is a manual rotary axis.</p></td></tr><tr valign="top"><td rowspan="26"><p type="p_table_l" style="margin-top: 4px" align="left">$P_ORI_SOL</p></td><td colspan="6"><p type="p_table_l" style="margin-top: 4px" align="left">If for an orientation transformation with more than one orientation axis, the axis angles are calculated that should result in a specified orientation, there is generally more than one solution. The $P_ORI_SOL system variables contain the number of valid solutions together with additional status information.</p><p type="p_table_l" align="left">The content of $P_ORI_SOL is coded as follows:</p></td></tr><tr valign="top"><td colspan="2" rowspan="10"><p type="p_table_l" style="margin-top: 4px" align="left">Values &lt; 0</p></td><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">General error states</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">-1</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">No solutions have been calculated yet for the active transformation (missing call of ORISOLH).</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">-2</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">A transformation is not active, or the active transformation is not an orientation transformation (6-axis transformation) that can provide positions for a specified orientation programming.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">-4</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">The desired orientation cannot be set with the present kinematics.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">-5</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">No solution was found when the ORISOLH function was called in the "Direct tool alignment" mode.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">-6</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Angle γ is too large when the ORISOLH function was called in the "Direct tool alignment" mode.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">-7</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">An angle was specified when the ORISOLH function was called in the "Direct tool alignment" mode that cannot be set because of the Hirth joint.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">-8</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">The first orientation axis (frame axis) must not be parameterized as Hirth axis.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">-9</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">The second as well as the third rotary axis has been parameterized as Hirth axis. Only one of the two axes can be the Hirth axis.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">-10</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">No adaptation of the solution(s) to the Hirth joint has been found.</p></td></tr><tr valign="top"><td colspan="2" rowspan="6"><p type="p_table_l" style="margin-top: 4px" align="left">Values > 0</p><p type="p_table_l" align="left">Unit position</p></td><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">Number of mathematically possible solutions without consideration of axis limits and any error conditions.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">0</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">There is no solution, i.e. the requested orientation cannot be set.</p><p type="p_table_l" align="left">There can be three different causes for this case:</p><ul class="table"><li><p>In principle, the requested orientation cannot be achieved because of the machine kinematics (orientation axes not arranged at right angles) even with an arbitrary traversing range of the orientation axes. In this case, the tens and hundreds positions of $P_ORI_SOL are both zero, the $P_ORI_STAT status variables assigned to the orientation axis have the value "-4".</p></li><li><p>The calculated solutions cannot be achieved because they would violate the axis limits. The positions of the orientation axes that would result without the axis limits, can be read in $P_ORI_POS.</p></li><li><p>Axis positions were specified when the ORISOLH function was called in the "Direct tool alignment" mode which would result in either the orientation vector or the orientation normal vector of the tool being aligned parallel to the first orientation axis, whose position is to be calculated. The position of this axis is not defined in these cases.</p></li></ul></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">1</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">There is a solution.</p><p type="p_table_l" align="left">There can be three different causes for this case:</p><ul class="table"><li><p>Based on the specified orientation and the machine kinematics, there is only one solution (from the mathematical point of view, two coinciding solutions) even without consideration of the axis limits. This case occurs at the edge of the orientation range for kinematics that are not at right angles. $P_ORI_POS contains both (identical) solutions.</p></li><li><p>There is only one solution because a second solution is invalid due to the violated axis limits. The valid solution is always the first solution in $P_ORI_POS. The second solution which would result when the axis limits are not taken into account, can also be read in $P_ORI_POS.</p></li><li><p>This is the normal case when the ORISOLH function is called in the "Direct tool alignment" mode. For the specified axis positions of two orientation axes, there is generally only one valid position for the missing orientation axis to be calculated.</p></li></ul></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">2</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">There are two solutions.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">8</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">There are an infinite number of solutions, i.e. the position of an orientation axis (the polar axis) is arbitrary. However, from the two possible positions of the other axes, one is excludes because of the violated axis limits.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">9</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">There are an infinite number of solutions, i.e. the position of an orientation axis (the polar axis) is indefinite. The indefinite axis can be determined from the hundreds position or from the $P_ORI_STAT system variable.</p></td></tr><tr valign="top"><td colspan="2" rowspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">Values > 0</p><p type="p_table_l" align="left">Tens position</p></td><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">Bit-coded display for violated axis limits. The precise cause of the error can be determined from the $P_ORI_STAT system variable.</p></td></tr><tr valign="top"><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Bit 0 (value 10):</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">For at least one solution, at least one axis limit of the first orientation axis is violated.</p></td></tr><tr valign="top"><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Bit 1 (value 20):</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">For at least one solution, at least one axis limit of the second orientation axis is violated.</p></td></tr><tr valign="top"><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Bit 2 (value 40):</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">For at least one solution, at least one axis limit of the third orientation axis is violated.</p></td></tr><tr valign="top"><td colspan="2" rowspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">Values > 0</p><p type="p_table_l" align="left">Hundreds position</p></td><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">Bit-coded display for non-defined axis positions (can only occur when there is an infinite number of solutions, i.e. when the unit position is equal to "9").</p></td></tr><tr valign="top"><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Bit 0 (value 100):</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">The position of the first orientation axis is not defined.</p></td></tr><tr valign="top"><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Bit 1 (value 200):</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">The position of the second orientation axis is not defined.</p></td></tr><tr valign="top"><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Bit 2 (value 400):</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">The position of the third orientation axis is not defined.</p></td></tr><tr valign="top"><td colspan="6"><p type="p_table_l" style="margin-top: 4px" align="left">The designations first, second and third orientation axis refer to the definition of the axes in $NT_ROT_AX_NAME.</p></td></tr><tr valign="top"><td rowspan="25"><p type="p_table_l" style="margin-top: 4px" align="left">$P_ORI_STAT<br />[&lt;n>]</p><p type="p_table_l" align="left"></p></td><td colspan="6"><p type="p_table_l" style="margin-top: 4px" align="left">Returns the status for each of the maximum three orientation axes after ORISOLH has been called.</p></td></tr><tr valign="top"><td rowspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">&lt;n>:</p></td><td colspan="5"><p type="p_table_l" style="margin-top: 4px" align="left">Index of the orientation axis</p><p type="p_table_l" align="left">(correspnds to the index of the relevant orientation axis in $NT_ROT_AX_NAME)</p></td></tr><tr valign="top"><td colspan="3" rowspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Range of values:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">0 ... 2</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">The order of the orientation axes (1 ... 3) refers to the definition of the axes in $NT_ROT_AX_NAME.</p></td></tr><tr valign="top"><td colspan="6"><p type="p_table_l" style="margin-top: 4px" align="left">The content of $P_ORI_STAT is coded as follows:</p></td></tr><tr valign="top"><td colspan="2" rowspan="11"><p type="p_table_l" style="margin-top: 4px" align="left">Values &lt; 0</p></td><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">General error states</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">-1</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">The status is not defined (missing call of ORISOLH).</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">-2</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">A transformation is not active, or the active transformation is not an orientation transformation (6-axis transformation) that can provide positions for a specified orientation programming.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">-3</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">The axis is not included in the active transformation.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">-4</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">The position of the axis cannot be calculated because the requested orientation cannot be achieved with the present kinematics even with an arbitrary assumed traversing range of the axis. </p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">-5</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Axis positions were specified when the ORISOLH function was called in the "Direct tool alignment" mode which would result in either the orientation vector or the orientation normal vector of the tool being aligned parallel to the first orientation axis, whose position is to be calculated. The position of this axis is not defined in these cases.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">-6</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Angle γ is too large when the ORISOLH function was called in the "Direct tool alignment" mode.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">-7</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">An angle was specified when the ORISOLH function was called in the "Direct tool alignment" mode that cannot be set because of the Hirth joint.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">-8</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">The first orientation axis (frame axis) must not be parameterized as Hirth axis.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">-9</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">The second as well as the third rotary axis has been parameterized as Hirth axis. Only one of the two axes can be the Hirth axis.</p></td></tr><tr valign="top"><td><p type="p_table_r" style="margin-top: 4px" align="right">-10</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">No adaptation of the solution(s) to the Hirth joint has been found.</p></td></tr><tr valign="top"><td colspan="2" rowspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Values > 0</p><p type="p_table_l" align="left">Unit position</p></td><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">Bit-coded display for violated axis limits of the first solution. </p></td></tr><tr valign="top"><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Bit 0 (value 1):</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">The first solution violates the lower axis limit. </p></td></tr><tr valign="top"><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Bit 1 (value 2):</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">The first solution violates the upper axis limit.</p></td></tr><tr valign="top"><td colspan="2" rowspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Values > 0</p><p type="p_table_l" align="left">Tens position</p></td><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">Bit-coded display for violated axis limits of the second solution.</p></td></tr><tr valign="top"><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Bit 0 (value 10):</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">The second solution violates the lower axis limit.</p></td></tr><tr valign="top"><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Bit 1 (value 20):</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">The second solution violates the upper axis limit.</p></td></tr><tr valign="top"><td colspan="2" rowspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Values > 0</p><p type="p_table_l" align="left">Hundreds position</p></td><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">Display of a non-defined axis position.</p></td></tr><tr valign="top"><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Bit 0 (value 100):</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">The position of the orientation axis is not defined, i.e. the requested orientation is achieved with each arbitrary setting of the rotary axis (polar position). This information is also contained in the $P_ORI_SOL system variable.</p></td></tr><tr valign="top"><td colspan="6"><p type="p_table_l" style="margin-top: 4px" align="left">Of the error numbers that indicate a violation of the axis limits, several can occur simultaneously. When an axis limit is violated, an attempt is made to reach a position within the permissible axis limits by adding or subtracting multiples of 360°. If this is not possible, it is not clearly defined whether the lower or the upper axis limit has been violated.</p><p type="p_table_l" align="left">If there is no solution for the requested orientation ($P_ORI_SOL = 0), the status of the orientation axes in the transformation is "0".</p></td></tr></table></p><table cellpadding="0" cellspacing="0" border="0"><tr><td><font size="1px"></font></td></tr></table><table class="safety" border="1" bgcolor="#eeeeee" style="margin-bottom:10px"><colgroup><col width="5%"><col width="95%"></colgroup><tr><td><b>Note</b></td></tr><tr><td><h4 class="Blocklabel">$NT_ROT_AX_NAME </h4><p class="safety">This system variable refers to a maximum of three axes used for setting the orientation. It contains the names of the chain elements ($NK_NAME) that define the machine axes (rotary axes) that must perform the orientation movements resulting from a kinematic transformation. The order in which the maximum three rotary axes are contained in this system variable is irrelevant for the machine kinematics because this is derived from the structure of the kinematic chains. However, as it defines the order in which other variables access the rotary axes, the order of the orientation axes in $NT_ROT_AX_NAME must match the kinematic description.  </p></td></tr></table><table cellpadding="0" cellspacing="0" border="0"><tr><td><font size="1px"></font></td></tr></table><table class="safety" border="1" bgcolor="#eeeeee"><colgroup><col width="5%"><col width="95%"></colgroup><tr><td><b>Note</b></td></tr><tr><td><h4 class="Blocklabel">Status information</h4><p class="safety">The status information that shows, for example, that an orientation cannot be achieved or can only be achieved when relevant axis limits are violated, does not trigger an NC alarm. It is the responsibility of the user to react suitably to the specified conditions.</p></td></tr></table><p></p></div>
  </body>
</html>