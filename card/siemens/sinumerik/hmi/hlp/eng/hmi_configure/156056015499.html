<html>
  <head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Configuring an SMB client</title>
  </head>
  <body id="bodyID">
    <div id="nsbanner">
      <div id="TitleRowAction">
        <h1 class="title">Configuring an SMB client</h1>
      </div>
    </div>
    <div id="nstext" valign="bottom">
      <p>
      </p>
      <p>To connect the NCU and the PC system in the network to an external Microsoft Windows server, the server protocol SMB (Server Message Block) is used. Microsoft Windows 10 supports SMB servers with protocol versions SMBv1, SMBv2 and SMBv3. Depending on the configuration, different servers require a different protocol version to enable a connection with the NCU and the PC system.</p>
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td>
            <font size="1px">
            </font>
          </td>
        </tr>
      </table>
      <table class="safety" border="1" bgcolor="#eeeeee">
        <colgroup>
          <col width="5%">
          <col width="95%">
        </colgroup>
        <tr>
          <td>
            <b>Notice</b>
          </td>
        </tr>
        <tr>
          <td>
            <h4 class="Blocklabel">Network security</h4>
            <p class="safety">Avoid unauthorized data access, e.g. via the Internet.</p>
            <p class="safety">Only connect systems within the company network if you want to set up the network via the configuration file <code>basesys.ini</code>, e.g. for a remote server connection for the system logbook (<code>Syslog_Remote_Host</code>).</p>
          </td>
        </tr>
      </table>
      <a name="block_1">
      </a>
      <h3 class="Blocktitle">Compatibility</h3>
      <p>The SMB protocol versions are compatible with the following software:</p>
      <a id="table_ae8e70d5-8d36-29a2-5c6d-4f9102c0a82b">
      </a> <a id="table_0"></a> <a id="table_ae8e70d5-8d36-29a2-5c6d-4f9102c0a82b"></a> <a id="table_0"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_default" border="1"><colgroup><col width="44.9%"><col width="55.1%"></colgroup><tr valign="top"><th><p type="p_table_lb" align="left">CNC software</p></th><th><p type="p_table_lb" align="left">SMB protocol version</p></th></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">V4.7 (828D, 840D sl)</p><p type="p_table_l" align="left">V4.8 (840D sl)</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">V1.0</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">V4.93 (828D, 840D sl)</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">V1.0, V2.0</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">V4.8 ab SP3 (828D)</p><p type="p_table_l" align="left">V4.95 (828D, 840D sl)</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">V1.0, V2.0, V3.0.2</p><p type="p_table_l" align="left"></p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">V6.13 (ONE)</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">V1.0, V2.0, V2.1, V3.0.2</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">V6.15 (ONE)</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">V1.0, V2.0, V3.0, V3.0.2</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">V5.2x (828D)</p><p type="p_table_l" align="left">V6.2x (ONE)</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">V1.0, V2.0, V3.0.2, V3.1.1</p></td></tr></table></p><a name="block_2"></a><h3 class="Blocktitle">Requirement</h3><ul><li><p>Hidden directories are visible</p></li><li><p>A copy of the <code>basesys.ini</code> configuration file is stored in the <code>user</code> directory:<br /><code>C:\ProgramData\Siemens\MotionControl\</code><b>user</b><code>\System\etc\</code></p></li><li><p>The <code>basesys.ini</code> configuration file in the <code>user</code> directory is not write-protected.</p></li></ul><a name="block_3"></a><h3 class="Blocktitle">Procedure</h3><p>Proceed as follows to save an SMB server in the network of NCU and the PC system in SINUMERIK Operate:</p><table width="100%" border="0" cellspacing="0" cellpadding="10"><tr><td><ol class="action"><li><p>Open the <code>basesys.ini</code> configuration file in the directory<br /><code>C:\ProgramData\Siemens\MotionControl\</code><b>user</b><code>\System\etc\</code>.</p></li><li><p>In the <code>[LinuxBase]</code> section, add the <code>DefaultCIFSVersion</code> line and set the desired value, e.g.:</p><p><code>DefaultCIFSVersion=3.11</code></p><p>The following values are possible depending on the SMB server:</p><p><code>none</code>, <code>1.0</code>, <code>2.0</code>, <code>2.1</code>, <code>3.0</code>, <code>3.02</code>, <code>3.11</code> or <code>auto</code> (default value)</p></li><li><p>Save and close the file.</p></li><li><p>Restart the PC system.</p></li></ol></td></tr></table><a name="block_4"></a><h3 class="Blocktitle">Configuring the SMB server connection in SINUMERIK Operate</h3><p>To configure the SMB server as softkey in the Program Manager, in the operating area<br />"Setup > HMI > Log. drive", the "Configure drives" window is provided.</p><p>Set up the SMB server as a Microsoft Windows network drive "NW Windows".</p><a id="table_556b3346-36f8-0de1-b711-6134238c7a02"></a> <a id="table_1"></a> <a id="table_556b3346-36f8-0de1-b711-6134238c7a02"></a> <a id="table_1"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_invisible" border="0"><colgroup><col width="10.0%"><col width="90.0%"></colgroup><tr valign="top"><td><a id="image_118314956171_0"></a> <img border="0" src="images/118314959883.png" width="42" height="31"/> </td><td><p type="p_table_l" style="margin-top: 4px" align="left"><b>More information</b> on the drive configuration is provided in the online help of SINUMERIK Operate.</p></td></tr></table></p><a name="block_5"></a><h3 class="Blocktitle">Checking the SMB server configuration</h3><table width="100%" border="0" cellspacing="0" cellpadding="10"><tr><td><ol class="action"><li><p>Call PuTTY to check the SMB server configuration.</p></li><li><p>Log in as user "manufact".</p></li><li><p>Execute the command <code>mount | grep cifs</code>.</p><p>You will receive the following output, which contains similar information, such as:</p><p><code>192.168.214.241/carlshare on /tmp/.logdrived_mnt. DEV_6 typ cifs (rw,nosuid,nodev,relatime,</code><b>vers=3.02</b><code>,sec=ntlmssp,cache=strict,...)</code></p><p>The example shows that the CIFS/Microsoft Windows release with SMB protocol v3.0.2 has been activated for the server.</p></li></ol></td></tr></table><table cellpadding="0" cellspacing="0" border="0"><tr><td><font size="1px"></font></td></tr></table><table class="safety" border="1" bgcolor="#eeeeee"><colgroup><col width="5%"><col width="95%"></colgroup><tr><td><b>Note</b></td></tr><tr><td><p class="safety">If the <code>DefaultCIFSVersion</code> line contains <code>auto</code> as the default value, activation is displayed as SMB protocol <code>vers=2.1</code> or <code>vers=1.0</code> when connecting to a Microsoft Windows XP/7 system.</p></td></tr></table></div>
  </body>
</html>