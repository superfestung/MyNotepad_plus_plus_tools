<html>
  <head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Mathematical operations (Expert Trace)</title>
  </head>
  <body id="bodyID">
    <div id="nsbanner">
      <div id="TitleRowDefault">
        <h1 class="title">Mathematical operations (Expert Trace)</h1>
      </div>
    </div>
    <div id="nstext" valign="bottom">
      <p>
      </p>
      <ul>
      </ul>
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td>
            <font size="1px">
            </font>
          </td>
        </tr>
      </table>
      <table class="safety" border="1" bgcolor="#eeeeee">
        <colgroup>
          <col width="5%">
          <col width="95%">
        </colgroup>
        <tr>
          <td>
            <b>Note</b>
          </td>
        </tr>
        <tr>
          <td>
            <p class="safety">An Expert Trace license is required to use this function, see "<a href="180833618571.html">Expert Trace functions</a>".</p>
          </td>
        </tr>
      </table>
      <p>Mathematical expressions can be applied to the measured data. This functionality is available with the toolbar icon "Mathematical operations". When the icon is clicked, a formula editor dialog opens.</p>
      <a id="image_180841466379_0">
      </a> <img border="0" src="images/180841496587.png" width="500" height="349"/><p>You can define mathematical expressions and evaluate them. If the result of the mathematical expression is a new signal, you can display it as a plot. If the result is a single value, then the value is displayed in the formula editor.</p><p>The maximum number of signals in the trace configuration (recorded and mathematical) cannot exceed 32.</p><p>The measured data of a signal can be accessed by the '$' character and the numerical identifier of the signal. This identifier can be found in the second column (#) of the signal table. Example:</p><p>Syntax to access the signal with the #ID 1: $1</p><p>Syntax to access the signal with the #ID 14: $14</p><a name="block_1"></a><h3 class="Blocktitle">This is how you create a mathematical (calculated) signal:</h3><ol><li><p>Input the signal formula and click the "Evaluate" softkey. The result field displays the first five calculated values.</p></li><li><p>Input a name for the new signal. If the name field was empty before, then the formula will be automatically copied into it. Otherwise, the previous name will be kept. (Changing the formula does not make any changes to the name field.)</p></li><li><p>Click the softkey "Generate new math. signal". The softkey is only active if the evaluation was successful and the name field is not empty.</p></li></ol><p>The new mathematical signal is added to the trace configuration and displayed in the trace diagram. The address field in the signal table displays the formula, the name field displays the signal name that was entered in the editor window.</p><p>Special cases when a trace configuration contains mathematical signals:</p><ul><li><p>When a new trace recording is started, the mathematical signals are automatically recalculated after the recording is stopped.</p></li><li><p>Mathematical signals can be added to the trace configuration even in compatibility mode, when the configuration is otherwise not editable.</p></li><li><p>Mathematical signals can be saved into the session file and reloaded, the same way as real signals. However, only the formula will be saved into the file. The data are not saved, because they will be recalculated when the session file is loaded.</p></li><li><p>If you click a recycle bin icon in the signal table to delete a signal, and that signal is used in the formula of one or more mathematical signals, a warning message will be displayed that the math signals based on this signal will be deleted from the configuration too. You can confirm or cancel the deletion.</p></li><li><p>If you change a parameter of a variable (e.g. axis, channel or indices), then the measured data of this signal are deleted. If a mathematical signal is based on that real signal, then the calculated signal data will also be deleted, but the formula of the mathematical signal remains in the trace configuration.</p></li><li><p>When the measured data are exported into CSV files, the mathematical signals are not exported.</p></li></ul><a name="block_2"></a><h3 class="Blocktitle">Functions that return a single value</h3><a id="table_4a9791f3-b582-8f32-ba77-e422c0303ddd"></a> <a id="table_0"></a> <a id="table_4a9791f3-b582-8f32-ba77-e422c0303ddd"></a> <a id="table_0"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_default" border="1"><colgroup><col width="17.1%"><col width="82.9%"></colgroup><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">MIN($1)</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Call the minimum value of the signal</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">MAX($1)</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Call the maximum value of the signal</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">AM($1)</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Call the arithmetic mean of the signal</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">EFFECTIV($1)</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Call the root mean square of the signal</p></td></tr></table></p><a name="block_3"></a><h3 class="Blocktitle">Functions that return a new signal</h3><a id="table_6fbda4f7-78f1-b676-1960-9798ba3f502f"></a> <a id="table_1"></a> <a id="table_6fbda4f7-78f1-b676-1960-9798ba3f502f"></a> <a id="table_1"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_default" border="1"><colgroup><col width="17.1%"><col width="82.9%"></colgroup><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">AV($1, 3)</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Calculate the moving average of the signal. The second argument of the function defines the number of data points to calculate the average value and must be between 3 and 99.</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">LSM($1)</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Find the best fit line over the data points of the signal using the least square method </p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">LSME($1)</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Find the best fit line over the data points of the signal using the least square method and return the remaining error as signal:</p><p type="p_table_l" align="left">$1-LSM($1)</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">REC($1)</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Calculate the reciprocal of each data point of the signal. If the signal value is 0, the calculated value will also be 0.</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">ABS($1)</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Calculate the absolute value of each data point of the signal</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">SQR($1)</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Calculate the square of each data point of the signal</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">SQRT($1)</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Calculate the square root of each data point of the signal. If the signal value is negative, the calculated value will be 0.</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">DIF($1)</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Calculate the first derivative of the signal</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">DIF2($1)</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Calculate the second derivative of the signal</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">INT($1)</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Calculate the integral of the signal</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">DEMOD($1)</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Replace the 359 -> 0 transitions of the data points with 359 -> 360 transitions.</p><p type="p_table_l" align="left">For example, if the original signal values are</p><p type="p_table_l" align="left">[..., 357.1, 358.4, 0.4, 2.0, ..., 358.0, 359.6, 1.2, ...]</p><p type="p_table_l" align="left">then the result of DEMOD($1) will be</p><p type="p_table_l" align="left">[..., 357.1, 358.4, 360.4, 362.0, ..., 718.0, 719.6, 721.2, ...]</p></td></tr></table></p><p>The following operators are supported: +,  -,  *,  /,  &lt;,  &lt;=,  >,  >=,  ==,  (,  ),  !=</p><p>The unary minus operator is also supported (e.g. 2 + -5), but not the unary plus operator.</p><a name="block_4"></a><h3 class="Blocktitle">Examples</h3><p>Every mathematical expression can contain various operators and several function calls.</p><a id="table_d0b7f32b-eb16-8420-8eee-6d073ad193ac"></a> <a id="table_2"></a> <a id="table_d0b7f32b-eb16-8420-8eee-6d073ad193ac"></a> <a id="table_2"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_default" border="1"><colgroup><col width="68.5%"><col width="31.5%"></colgroup><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Add 5.4 to each data point of the signal</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">$1 + 5.4</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Display the difference between two signals (for example actual value - target value)</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">$1-$2</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Display the absolute value of the difference of two signals</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">ABS($1-$2)</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Find the maximum difference of two signals</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">MAX(ABS($1-$2))</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Check if the maximum difference is below 2.1</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">MAX(ABS($1-$2)) &lt; 2.1</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Display the difference to the least square method fit line</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">ABS($1 - LSM($1))</p></td></tr></table></p></div>
  </body>
</html>