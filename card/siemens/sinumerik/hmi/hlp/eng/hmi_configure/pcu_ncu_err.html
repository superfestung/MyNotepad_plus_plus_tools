<html>
  <head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>HMI on PCU 50.3 cannot establish a network connection to the NC</title>
  </head>
  <body id="bodyID">
    <div id="nsbanner">
      <div id="TitleRowAction">
        <h1 class="title">HMI on PCU 50.3 cannot establish a network connection to the NC</h1>
      </div>
    </div>
    <div id="nstext" valign="bottom">
      <p>
      </p>
      <a id="table_07d9341b-d1b5-4bc5-a69e-103c3e60d295">
      </a> <a id="table_0"></a> <TableTitle></TableTitle><a id="table_07d9341b-d1b5-4bc5-a69e-103c3e60d295"></a> <a id="table_0"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_default" border="1"><colgroup><col width="24.6%"><col width="75.3%"></colgroup><tr valign="top"><th><p type="p_table_lb" align="left">Error</p></th><th><p type="p_table_lb" align="left">Possible error causes and remedies</p></th></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">HMI displays alarm 120202 "Wait for connection to NC/PLC" and/or no values (only '#').</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"></p> </td><td><p type="p_table_l" style="margin-top: 4px" align="left"><b>Error cause 3.1</b></p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"></p> </td><td><p type="p_table_l" style="margin-top: 4px" align="left">The NCU has an IP address that does not match the network or has an invalid IP address.</p><p type="p_table_l" align="left">The NCU does not participate in DHCP operation and runs with a permanently set IP address that is incorrect and does not match the system network.</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"></p> </td><td><p type="p_table_l" style="margin-top: 4px" align="left"><b>Remedy 3.1</b></p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"></p> </td><td><p type="p_table_l" style="margin-top: 4px" align="left">Connect the service PG to the NCU via X127. Log into Linux via WinSCP or Putty. Using the service command 'sc show ip -eth0', display the actual settings - and check these. If the cause of the error is confirmed, then the NCU must be reparameterized. </p><p type="p_table_l" align="left">Perform the service commands and settings:</p><ul class="table"><li><p>sc enable DHCPSvr –X120 or the equivalent sc enable DHCPSvr –eth0 to activate DHCP operation</p></li><li><p>sc enable DHCPSync –X120 -LOW|HIGH|MASTER or equivalent sc enable DHCPSync –eth0 -LOW|HIGH|MASTER to set the DHCP synchronization mode of this NCU</p></li></ul><p type="p_table_l" align="left">Enter the following entries correctly in the /user/system/etc/basesys.ini file<br />:[InternalInterface]<br />; With InternalIP and InternalNetMask (both must be set together),<br />; you can change the address on the internal/TCU/automation/system net.<br />InternalIP=192.168.214.1<br />InternalNetMask=255.255.255.0<br />…<br />; This is the range of dynamic IPs given out by the DHCP server<br />; Defaults should be sensible<br />InternalDynRangeStart=192.168.214.10<br />InternalDynRangeEnd=192.168.214.239</p><p type="p_table_l" align="left">The values in green should be set corresponding to the overall system.</p><p type="p_table_l" align="left">Then restart the NCU.</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"></p> </td><td><p type="p_table_l" style="margin-top: 4px" align="left"><b>Error cause 3.2</b></p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"></p> </td><td><p type="p_table_l" style="margin-top: 4px" align="left">The NCU has an IP address that does not match the network or has an invalid IP address.</p><p type="p_table_l" align="left">The NCU participates in DHCP operation and the NCU is an active DHCP/DNS server (either as a result of the DHCP SyncMode ON_MASTER or as a result of the Sync priority - just the same as the other server candidates and random selection). The NCU is set with an incorrect IP address and an incorrect IP range for the IP addresses that can be dynamically allocated. The NCU possibly changed from DHCP standby to active server as the computer with DHCP MASTER has failed/has been switched-off.</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"></p> </td><td><p type="p_table_l" style="margin-top: 4px" align="left"><b>Remedy 3.2</b></p><p type="p_table_l" align="left">The same as for remedy 3.1</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"></p> </td><td><p type="p_table_l" style="margin-top: 4px" align="left"><b>Error cause 3.3</b></p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"></p> </td><td><p type="p_table_l" style="margin-top: 4px" align="left">The NCU has an IP address that does not match the network or has an invalid IP address.</p><p type="p_table_l" align="left">The NCU participates in DHCP operation and operates with the incorrect IP address. After the NCU booted, an additional component that is already operational (NCU or PCU) with active DHCP server was connected to the network. An additional active DHCP server was switched into the system network while operational; this active DNCP server has an incorrect address range. This is a configuration error.</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"></p> </td><td><p type="p_table_l" style="margin-top: 4px" align="left"><b>Remedy 3.3</b></p><p type="p_table_l" align="left">The same as for remedy 3.1</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">HMI displays alarm 120202 "Wait for connection to NC/PLC" and/or no values (only '#').</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"></p> </td><td><p type="p_table_l" style="margin-top: 4px" align="left"><b>Error cause 4.1</b></p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"></p> </td><td><p type="p_table_l" style="margin-top: 4px" align="left">The NCU has a valid IP address in the system network, however, not the required IP address.</p><p type="p_table_l" align="left">The NCU does not participate in DHCP operation and operates with a permanently set target address that is different from that saved in MMC.INI in the system network - however, this is a valid address. This is a configuration error.</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"></p> </td><td><p type="p_table_l" style="margin-top: 4px" align="left"><b>Remedy 4.1</b></p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"></p> </td><td><p type="p_table_l" style="margin-top: 4px" align="left">Connect the service PG to the NCU via X127. Log into Linux via WinSCP or Putty.</p><p type="p_table_l" align="left">If the set NCU mode (no DHCP) is to be kept, the fixed IP address of the NCU must be changed. </p><p type="p_table_l" align="left">Correctly enter the following entries into the file /user/system/etc/basesys.ini </p><p type="p_table_l" align="left">[InternalInterface]</p><p type="p_table_l" align="left">; With InternalIP and InternalNetMask (both must be set together),</p><p type="p_table_l" align="left">; you can change the address on the internal/TCU/automation/system net.</p><p type="p_table_l" align="left">InternalIP=192.168.214.1</p><p type="p_table_l" align="left">InternalNetMask=255.255.255.0</p><p type="p_table_l" align="left">Then restart the NCU.</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"></p> </td><td><p type="p_table_l" style="margin-top: 4px" align="left"><b>Error cause 4.2</b></p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"></p> </td><td><p type="p_table_l" style="margin-top: 4px" align="left">The NCU has a valid IP address in the system network, however, not the required IP address.</p><p type="p_table_l" align="left">The NCU does not participate in DHCP operation and operates with a permanently set target address that is different from that saved in MMC.INI in the system network - however, this is a valid address. This is a configuration error.</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"></p> </td><td><p type="p_table_l" style="margin-top: 4px" align="left"><b>Remedy 4.2</b></p><p type="p_table_l" align="left">The same as for remedy 4.1</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"></p> </td><td><p type="p_table_l" style="margin-top: 4px" align="left"><b>Error cause 4.3</b></p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"></p> </td><td><p type="p_table_l" style="margin-top: 4px" align="left">The NCU has a valid IP address in the system network, however, not the required IP address.</p><p type="p_table_l" align="left">The NCU participates in DHCP operation and was not able to obtain the corresponding required IP with the target address saved in the MMC.INI; this is the reason that it was dynamically allocated an address. A reason for this could be that the required IP was configured twice in the system network, or the required IP is not in the reserved range, but is located in the dynamic address range. This is a configuration error.</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"></p> </td><td><p type="p_table_l" style="margin-top: 4px" align="left"><b>Remedy 4.3</b></p><p type="p_table_l" align="left">The same as for remedy 4.1</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"></p> </td><td><p type="p_table_l" style="margin-top: 4px" align="left"><b>Error cause 4.4</b></p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"></p> </td><td><p type="p_table_l" style="margin-top: 4px" align="left">The NCU has a valid IP address in the system network, however, not the required IP address.</p><p type="p_table_l" align="left">The NCU participates in DHCP operation as DHCP client and has a required IP that has been set but which does not match the system network. For instance, this situation occurs if a network address was used in the system network other than the default network address, but it was forgotten to change over the required IP of the NCU to this address range. The NCU is allocated an IP address that matches the system network from the dynamically allocated range, but which is different from its 'old' required IP that was not changed over. Up to and including SW 2.4.1, in this situation, the NCU cannot be addressed in the system network. The reason for this is that it has internally established its firewall regarding the required IP that was entered for it, which does not match the system network - which is why it does not respond at X120.</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"></p> </td><td><p type="p_table_l" style="margin-top: 4px" align="left"><b>Remedy 4.4</b></p><p type="p_table_l" align="left">The same as for remedy 4.1</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">HMI displays alarm 120202 "Wait for connection to NC/PLC" and/or no values (only '#').</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"></p> </td><td><p type="p_table_l" style="margin-top: 4px" align="left"><b>Error cause 5.1</b></p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"></p> </td><td><p type="p_table_l" style="margin-top: 4px" align="left">There is no physical connection. </p><p type="p_table_l" align="left">Possible error causes include:</p><ul class="table"><li><p>A switch is not closed/has failed; this can also be the switch of an MCP</p></li><li><p>The cable connection has become loose (poor contact)</p></li><li><p>An incorrect cable was used (crossover/not crossover)</p></li><li><p>A cable being used as data link is defective</p></li></ul><p type="p_table_l" align="left"></p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"></p> </td><td><p type="p_table_l" style="margin-top: 4px" align="left"><b>Remedy 5.1</b></p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"></p> </td><td><p type="p_table_l" style="margin-top: 4px" align="left">Establish a physical connection.</p></td></tr></table></p><p></p></div>
  </body>
</html>