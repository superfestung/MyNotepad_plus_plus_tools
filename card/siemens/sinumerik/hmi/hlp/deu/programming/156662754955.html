<html>
  <head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Interruptroutine zuordnen und starten (SETINT, PRIO, BLSYNC)</title>
  </head>
  <body id="bodyID">
    <div id="nsbanner">
      <div id="TitleRowDefault">
        <h1 class="title">Interruptroutine zuordnen und starten (SETINT, PRIO, BLSYNC)</h1>
      </div>
    </div>
    <div id="nstext" valign="bottom">
      <p>
      </p>
      <ul>
      </ul>
      <p>Die Steuerung verfügt über mehrere schnelle Eingänge (Eingang 1 ... 8), die jeweils einen Interrupt (1 ... 8) auslösen. Jedem Interrupt kann über den Befehl <code>SETINT</code> eine Priorität und eine Interrupt-Routine zugeordnet werden. Wird der Interrupt durch Setzen des schnellen Eingangs ausgelöst, wird die aktuelle Bearbeitung im Kanal unterbrochen und die Interrupt-Routine gestartet.</p>
      <h4 class="Blocklabel">Interrupt-Prorität</h4>
      <p>Werden in einem Teileprogramm mehreren Eingängen Interrupts zugeordnet, müssen den Interrupts unterschiedliche Prioritäten zugewiesen werden.</p>
      <p>Einem Interrupt kann ein Prioritätswerte von 1 ... 128 zugeordnet werden. Prioritätswert 1 entspricht der höchsten, 128 der niedrigsten Priorität. </p>
      <a name="block_1">
      </a>
      <h3 class="Blocktitle">Syntax</h3>SETINT(&lt;n>) &lt;NAME>SETINT(&lt;n>) PRIO=&lt;Wert> &lt;NAME>SETINT(&lt;n>) PRIO=&lt;Wert> &lt;NAME> BLSYNCSETINT(&lt;n>) PRIO=&lt;Wert> &lt;NAME> LIFTFAST<a name="block_2"></a><h3 class="Blocktitle">Bedeutung</h3><a id="table_a8f2d8a1-61df-4edd-ac6b-0aa6f068bb01"></a> <a id="table_0"></a> <a id="table_a8f2d8a1-61df-4edd-ac6b-0aa6f068bb01"></a> <a id="table_0"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_default" border="1"><colgroup><col width="19.7%"><col width="18.1%"><col width="62.2%"></colgroup><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>SETINT(&lt;n>)</code>:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Dem Interruptsignal &lt;n> wird NC-Programm (ASUP) &lt;Name> zuordnen. Die zugeordnete Interruptroutine wird gestartet, sobald Interruptsignal &lt;n> == 1 erkannt wird.</p><p type="p_table_l" align="left"><b>Hinweis:</b><br />Wird einem Interruptsignal &lt;n> eine andere Interrupt-Routine zugeordnet, wird die vorhergende Zuordnung unwirksam.</p></td></tr><tr valign="top"><td rowspan="3"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;n></code>:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Nummer des Interruptsignals</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Typ:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">INT</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Wertebereich:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">1 ... 32</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>PRIO=</code>:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Priorität des Interrupts </p><p type="p_table_l" align="left">(optional)</p></td></tr><tr valign="top"><td rowspan="3"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;Wert></code>:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">(<b>optional</b>)<b> </b>Prioritätswert</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Typ:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">INT</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Wertebereich:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">1 ... 128 (1 ⇒ höchste Priorität)</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;NAME></code>:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Name des NC-Programms (ASUP)</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>BLSYNC</code>:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">(<b>optional</b>) <code>BLSYNC</code> bewirkt, dass nach dem Auslösen des Interrupts zuerst gewartet wird, bis der aktuelle Satz abgearbeitet ist. Erst danach wird die Interrupt-Routine ausgeführt. </p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>LIFTFAST</code>:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">(<b>optional</b>) <code>LIFTFAST</code> bewirkt, dass nach dem Auslösen des Interrupts zuerst ein Schnellabheben erfolgt ( siehe Kapitel ""). Erst danach wird die Interrupt-Routine ausgeführt.</p></td></tr></table></p><a name="block_3"></a><h3 class="Blocktitle">Randbedingungen</h3><h4 class="Blocklabel">Interrupt-Regeln</h4><ol><li><p>Für jeden Interrupt, der nicht sofort abgearbeitet werden kann, oder aktuell schon in Bearbeitung ist, wird eine weitere Interrupt-Anforderung gespeichert. Darüber hinaus gehende Interrupt-Anforderungen für diesen Interrupt verloren.</p></li><li><p>Wird aktuell ein Interrupt bearbeitet und es wird ein weiterer Interrupt mit höherer Priorität ausgelöst, unterbricht dieser den niederprioren Interrupt. Nach Abschluss des höherprioren Interrupts, wird der niederpriore Interrupt fortgesetzt. Treffen während der höherpriore Interrupt bearbeitet wird, weiter Anforderungen für den niederprioren Interrupt ein, wird eine Anforderung gespeichert. Weitere gehen verloren.</p></li><li><p>Wird aktuell ein Interrupt bearbeitet und es wird ein weiterer Interrupt mit höherer Priorität ausgelöst, unterbricht dieser den niederprioren Interrupt. Der höherpriore Interrupt wird bearbeitet. Wird wiederum ein höherpriorer Interrupt ausgelöst, wird der aktuelle Interrupt unterbrochen und der höherpriore Interrupt bearbeitet. Maximal sind sechs aktive Interrupt-Ebenen möglich. Eine aktuell bearbeitete Interrupt-Ebene und fünf wartende Interrupt-Ebenen. Für jede aktive Interrupt-Ebene wird maximal eine weitere Interrupt-Anforderung gespeichert. Alle weiteren Interrupt-Anforderungen gehen verloren. Ebenso gehen Interrupt-Anforderung verloren, wenn diese für weitere Interrupt-Ebenen (Interrupt-Ebene ≥ 7) angefordert werden.</p></li></ol><a name="block_4"></a><h3 class="Blocktitle">Beispiele</h3><h4 class="Blocklabel"><b>Beispiel 1: Interruptroutinen zuordnen und Priorität festlegen</b></h4><a id="table_eef6b7c2-c9b4-4af0-9523-55c607e46156"></a> <a id="table_1"></a> <a id="table_eef6b7c2-c9b4-4af0-9523-55c607e46156"></a> <a id="table_1"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_listing" border="1" id="EVG"><colgroup><col width="42.1%"><col width="57.9%"></colgroup><tr valign="top"><th>Programmcode</th><th>Kommentar</th></tr><tr valign="top"><td>N20 SETINT(3) PRIO=1 ABHEB_Z</td><td>; IF Eingang 3 == 1 ; THEN Interruptroutine "ABHEB_Z" starten</td></tr><tr valign="top"><td>N30 SETINT(2) PRIO=2 ABHEB_X</td><td>; IF Eingang 2 == 1 ; THEN Interruptroutine "ABHEB_X" starten.</td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><p>Die Interruptroutinen werden in der Reihenfolge der Prioritätswerte nacheinander abgearbeitet, wenn die Eingänge gleichzeitig anstehen: zuerst "ABHEB_Z", dann "ABHEB_X".</p><p></p><h4 class="Blocklabel"><b>Beispiel 2: Interruptroutine neu zuordnen</b> </h4><a id="table_4bac6b5f-21d6-4294-8437-02e0fa8f90b7"></a> <a id="table_2"></a> <a id="table_4bac6b5f-21d6-4294-8437-02e0fa8f90b7"></a> <a id="table_2"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_listing" border="1" id="EXH"><colgroup><col width="42.1%"><col width="57.9%"></colgroup><tr valign="top"><th>Programmcode</th><th>Kommentar</th></tr><tr valign="top"><td>N20 SETINT(3) PRIO=2 ABHEB_Z</td><td>; IF Eingang 3 == 1 ; THEN Interruptroutine "<b>ABHEB_Z</b>" starten</td></tr><tr valign="top"><td>...</td><td> </td></tr><tr valign="top"><td>N80 SETINT(3) PRIO=1 ABHEB_X</td><td>; IF Eingang 3 == 1 ; THEN Interruptroutine "<b>ABHEB_X</b>" starten</td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p></div>
    <p>Siehe auch:<br />    <a href="156662744331.html">Funktion einer Interruptroutine</a></p>
  </body>
</html>