<html>
  <head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>FIFO-Variablen ($AC_FIFO)</title>
  </head>
  <body id="bodyID">
    <div id="nsbanner">
      <div id="TitleRowDefault">
        <h1 class="title">FIFO-Variablen ($AC_FIFO)</h1>
      </div>
    </div>
    <div id="nstext" valign="bottom">
      <p>
      </p>
      <ul>
      </ul>
      <p>Eine FIFO-Variable stellt eine auf R-Parametern basierende komplexe Datenstruktur zur Verfügung. Die Datenstruktur besteht aus einem Verwaltungs- und einem Nutzdatenteil. Der Nutzdatenteil ist als Stapelspeicher (Stack) nach dem FIFO-Prinzip (First In, First Out) organisiert. Über den Index der FIFO-Variablen werden die unterschiedlichen Funktionen im Verwaltungsteil sowie die Nutzdaten angesprochen.</p>
      <a id="image_83871634315_0">
      </a> <img border="0" src="images/167864663435.png" width="460" height="278"/><a id="table_"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_legend" border="0"><colgroup><col width="6.9%"><col width="93.0%"></colgroup><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">①</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Verwaltungsteil</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">②</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Nutzdatenteil</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">③</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">R-Parameterbereich oberhalb der FIFO-Variablen: Schreiben und Lesen erlaubt</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">④</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">R-Parameterbereich unterhalb der FIFO-Variablen: Nur Lesen erlaubt</p></td></tr></table></p><table cellpadding="0" cellspacing="0" border="0"><tr><td><font size="1px"></font></td></tr></table><table class="safety" border="1" bgcolor="#eeeeee"><colgroup><col width="5%"><col width="95%"></colgroup><tr><td><b>Hinweis</b></td></tr><tr><td><p class="safety">Die über R-Parametern gemachten Aussagen gelten auch für FIFO-Variablen. Siehe Kapitel "<a href="156663850891.html">R-Parameter ($R)</a>".</p></td></tr></table><a name="block_1"></a><h3 class="Blocktitle">Syntax</h3><h4 class="Blocklabel">Schreiben</h4>$AC_FIFO&lt;n>[&lt;i>] = &lt;Wert>$AC_FIFO[&lt;n>, &lt;i>] = &lt;Wert><h4 class="Blocklabel">Lesen</h4>&lt;Variable> = $AC_FIFO&lt;n>[&lt;i>]&lt;Variable> = $AC_FIFO[&lt;n>, &lt;i>]<a name="block_2"></a><h3 class="Blocktitle">Bedeutung</h3><a id="table_308a0f76-195d-454b-bff2-ae1d5f295ba9"></a> <a id="table_0"></a> <a id="table_308a0f76-195d-454b-bff2-ae1d5f295ba9"></a> <a id="table_0"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_default" border="1"><colgroup><col width="15.0%"><col width="10.0%"><col width="8.0%"><col width="67.0%"></colgroup><tr valign="top"><td rowspan="2"><p type="p_table_l" style="margin-top: 4px" align="left"><code>$AC_FIFO</code>:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">FIFO-Datenstruktur in den R-Parametern, beginnend ab dem Wert von MD28262 $MC_START_AC_FIFO</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Datentyp:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">REAL</p></td></tr><tr valign="top"><td rowspan="3"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;n></code>:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Nummer der FIFO-Variablen</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Datentyp:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">INT</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Wertebereich:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">1, 2, ... max. Nummer (siehe Weitere Informationen)</p></td></tr><tr valign="top"><td rowspan="14"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;i></code>:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Index der FIFO-Variablen über den auf die verschiedenen Funktionen und Daten innerhalb der Datenstruktur der FIFO-Variablen zugegriffen.</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Wertebereich:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">0, 1, 2, ... (MD28264 $MC_LEN_AC_FIFO - 1)</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center"><b>Wert</b></p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left"><b>Bedeutung</b></p></td></tr><tr valign="top"><td colspan="3"><p type="p_table_c" style="margin-top: 4px" align="center"><b>Verwaltungsdaten</b></p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">0</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left"><b>Schreiben</b></p><p>Das Schreiben eines Wertes auf den FIFO-Stack erfolgt durch die Zuweisung eines Wertes an den FIFO-Stack über Index 0 ($AC_FIFO[ 0 ] = &lt;Wert>). Der zugewiesene Wert wird dabei auf den nächsten freien Platz des FIFO-Stacks geschrieben. </p><p>Sind bereits alle Speicherplätz des FIFO-Stacks belegt, wird ein Alarm angezeigt:</p><ul class="table"><li><p>Beim Schreiben in einem NC-Programm: Alarm 20149</p></li><li><p>Beim Schreiben in einer Synchroaktion: Alarm 17020</p></li></ul><p><b>Lesen</b></p><p>Das Lesen eines Wertes vom FIFO-Stack erfolgt durch die Zuweisung des FIFO-Stacks mit Index 0 an eine Variable (&lt;Variable> = $AC_FIFO[ 0 ]). Es wird dabei der zeitlich älteste Wert gelesen und anschließend vom FIFO-Stack entfernt.</p><p type="p_table_l" align="left"><b>Hinweis</b></p><ul class="table"><li><p>Lesen im NC-Programm / Synchronaktion</p><p>Erfolgt das Lesen mit Index 0 in einem NC-Programm / Synchronaktion, wird der älteste Wert gelesen und wie oben beschrieben vom FIFO-Stack entfernt.</p></li><li><p>Lesen auf der Bedienoberfläche z.B. SINUMERIK Operate</p><p>Erfolgt das Lesen bzw. Anzeigen mit Index 0 auf der Bedienoberfläche, z.B. SINUMERIK Operate: "Diagnose" > "NC/PLC-Variablen", wird intern mit dem Index 1 gelesen (ältester Wert) <b>ohne</b> den FIFO-Stack zu verändern.</p></li></ul></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">1</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left"><b>Schreiben / Lesen</b>: Das "älteste" Nutzdatum wird angesprochen; der FIFO-Stack wird <b>nicht</b> verändert</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">2</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left"><b>Schreiben / Lesen</b>: Das "jüngste" Nutzdatum wird angesprochen; der FIFO-Stack wird <b>nicht</b> verändert</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">3</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left"><b>Lesen</b>: Liefert die Summe der Werte aller Nutzdaten</p><p type="p_table_l" align="left">Freigabe über MD28266 $MC_MODE_AC_FIFO, Bit 0 erforderlich. Siehe unten Absatz "Summenbildung über alle Nutzdaten"</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">4</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left"><b>Lesen</b>: Liefert die Anzahl der aktuell im FIFO-Stack befindlichen Nutzdaten</p><p type="p_table_l" align="left"><b>Schreiben</b>: Das Rücksetzen auf den Ausgangszustand erfolgt durch Schreiben der FIFO-Variablen, Index 4 mit Wert 0.</p><p type="p_table_l" align="left">Beispiel: <code>$AC_FIFO1[4] = 0</code></p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">5</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left"><b>Lesen</b>: Liefert den aktuellen Schreibindex relativ zum Beginn des FIFO-Stacks</p></td></tr><tr valign="top"><td colspan="3"><p type="p_table_c" style="margin-top: 4px" align="center"><b>Nutzdaten</b></p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">6</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Schreiben/Lesen: Das 1. Feldelement des Nutzdatenbereichs wird angesprochen</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">7</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Schreiben/Lesen: Das 2. Feldelement des Nutzdatenbereichs wird angesprochen</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">n</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Schreiben/Lesen: Das n. Feldelement des Nutzdatenbereichs wird angesprochen</p></td></tr><tr valign="top"><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left"><b>Weitere Informationen</b></p><p type="p_table_l" align="left">Listenhandbuch Systemvariablen</p></td></tr></table></p><a name="block_3"></a><h3 class="Blocktitle">Maschinendaten</h3><h4 class="Blocklabel">Anzahl FIFO-Variablen pro Kanal</h4><p>Die Anzahl der FIFO-Variablen pro Kanal wird eingestellt über:</p><p>MD28260 $MC_NUM_AC_FIFO = &lt;Anzahl FIFO-Variablen pro Kanal></p><h4 class="Blocklabel">Anfang des R-Parameterbereichs der FIFO-Variablen</h4><p>Der R-Parameter, ab dem der Bereich der FIFO-Variablen für den Kanal beginnt, wird eingestellt über:</p><p>MD28262 $MC_START_AC_FIFO = &lt;Nummer des Start-R-Parameters>  </p><table cellpadding="0" cellspacing="0" border="0"><tr><td><font size="1px"></font></td></tr></table><table class="safety" border="1" bgcolor="#eeeeee"><colgroup><col width="5%"><col width="95%"></colgroup><tr><td><b>Hinweis</b></td></tr><tr><td><h4 class="Blocklabel">Freie R-Parameter</h4><p class="safety">Nur die R-Parameter, die nummernmäßig unterhalb des Start-R-Parameters der FIFO-Variablen liegen, dürfen im NC-Programm geschrieben werden.</p></td></tr></table><h4 class="Blocklabel">Anzahl Feldelemente pro FIFO-Variable </h4><p>Die maximale Anzahl von Feldelementen pro FIFO-Variable wird eingestellt über:</p><p>MD28264 $MC_LEN_AC_FIFO = &lt;Anzahl Feldelemente pro FIFO-Variable>  </p><h4 class="Blocklabel">Gesamtanzahl von R-Parametern im Kanal</h4><p>Die Gesamtanzahl von R-Parametern, die im Kanal benötigt wird, wird eingestellt über:</p><a id="table_1"></a> <a id="table_1"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_invisible" border="0"><colgroup><col width="40.0%"><col width="60.0%"></colgroup><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">MD28050 $MC_MM_NUM_R_PARAM =</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">MD28262 $MC_START_AC_FIFO + </p><p type="p_table_l" align="left">MD28260 $MC_NUM_AC_FIFO * </p><p type="p_table_l" align="left">(MD28264 $MC_LEN_AC_FIFO + 6)</p></td></tr></table></p><h4 class="Blocklabel">Summenbildung über alle Nutzdaten</h4><p>Die Summe der Werte aller Nutzdaten wird über $AC_FIFO[ <b>3</b> ] nur bereitgestellt, wenn die Funktion über das Maschinendatum aktiviert wird:</p><p>MD28266 $MC_MODE_AC_FIFO, Bit 0 = &lt;Wert></p><a id="table_2"></a> <a id="table_2"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_default" border="1"><colgroup><col width="8.8%"><col width="91.1%"></colgroup><tr valign="top"><th><p type="p_table_cb" align="center">Wert</p></th><th><p type="p_table_lb" align="left">Bedeutung</p></th></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">FALSE</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Die Summe über die Werte aller Nutzdaten wird <b>nicht </b>bereitgestellt</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">TRUE</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Die Summe über die Werte aller Nutzdaten wird bereitgestellt</p></td></tr></table></p><a name="block_4"></a><h3 class="Blocktitle">Beispiel</h3><p>Serielles Ermitteln der Länge von Werkstücken, die von einem Laufband an einer automatischen Messstation vorbei bewegt werden.</p><a id="image_1061684235_0"></a> <img border="0" src="images/167864488075.png" width="500" height="147"/><p>Die Messergebnisse werden über Synchronaktionen in die Systemvariable $AC_FIFO1 geschrieben bzw. aus ihr gelesen.</p><ul><li><p><b>Lesen</b>: Mit Index 0 wird das "älteste" Nutzdatenelement gelesen und aus dem FIFO-Stack gelöscht.</p></li><li><p><b>Schreiben</b>: Mit Index 0 wird der Wert in das nächste freie Nutzdatenelement geschrieben.</p></li></ul><a id="image_2610524683_0"></a> <img border="0" src="images/167864573451.png" width="500" height="365"/></div>
  </body>
</html>