<html>
  <head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Zeilen in Datei lesen (READ)</title>
  </head>
  <body id="bodyID">
    <div id="nsbanner">
      <div id="TitleRowDefault">
        <h1 class="title">Zeilen in Datei lesen (READ)</h1>
      </div>
    </div>
    <div id="nstext" valign="bottom">
      <p>
      </p>
      <ul>
      </ul>
      <p>Der READ-Befehl liest in der angegebenen Datei eine oder mehrere Zeilen und legt die gelesenen Informationen in einem Feld vom Typ STRING ab. Jede gelesene Zeile belegt in diesem Feld ein Feldelement.</p>
      <a name="block_1">
      </a>
      <h3 class="Blocktitle">Voraussetzungen</h3>
      <h4 class="Blocklabel">Schutzstufe</h4>
      <p>Die aktuell eingestellte Schutzstufe muss gleich oder größer dem READ-Recht der Datei sein. Ist dies nicht der Fall, wird der Zugriff mit Fehlermeldung (Rückgabewert der Fehlervariablen = 13) abgelehnt.</p>
      <h4 class="Blocklabel">Zugriff auf EES-Laufwerke</h4>
      <p>Externe Programmspeicher auf Laufwerken, für die bei der Inbetriebnahme eine Verwendung durch die Funktion "Abarbeiten von externem Speicher (EES)" eingerichtet wurde, können von Dateihandlings-Befehlen nur dann angesprochen werden, wenn die lizenzpflichtige Option zur Nutzung dieser Funktion gesetzt ist.</p>
      <a name="block_2">
      </a>
      <h3 class="Blocktitle">Syntax</h3>DEF INT &lt;Error>DEF STRING[&lt;StringLength>] &lt;Result>[&lt;n>,&lt;m>]READ(&lt;Error>,"&lt;FileName>",&lt;StartLine>,&lt;NumLines>,&lt;Result>)<a name="block_3"></a><h3 class="Blocktitle">Bedeutung</h3><a id="table_dd0c6c25-8088-4a16-8db9-e9e2157ab006"></a> <a id="table_0"></a> <a id="table_dd0c6c25-8088-4a16-8db9-e9e2157ab006"></a> <a id="table_0"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_default" border="1"><colgroup><col width="24.2%"><col width="11.3%"><col width="9.0%"><col width="4.5%"><col width="50.8%"></colgroup><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>READ</code> </p></td><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">Befehl zum Lesen von Zeilen der angegebenen Datei und zur Ablage dieser Zeilen in einem Variablenfeld.</p></td></tr><tr valign="top"><td rowspan="12"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;Error></code> </p></td><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">Variable für die Rückgabe des Fehlerwerts (Call-By-Reference-Parameter)</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Typ.</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">INT</p></td></tr><tr valign="top"><td rowspan="10"><p type="p_table_l" style="margin-top: 4px" align="left">Wert:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">0</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">kein Fehler</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">1</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Pfad nicht erlaubt</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">2</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Pfad nicht gefunden</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">3</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Datei nicht gefunden</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">4</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">falscher Dateityp</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">11</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Datei wird benutzt</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">13</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Zugriffsrechte nicht ausreichend</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">21</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Zeile nicht vorhanden (Parameter &lt;StartLine> oder &lt;NumLines> größer als Anzahl der Zeilen in der angegebenen Datei).</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">22</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Feldlänge der Ergebnisvariablen (&lt;Result>) ist zu klein.</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">23</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Zeilenbereich zu groß (Parameter &lt;NumLines> so groß gewählt, dass über das Dateiende hinausgelesen wird).</p></td></tr><tr valign="top"><td rowspan="3"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;FileName></code> </p></td><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">Name der zu lesenden Datei (Call-By-Value-Parameter)</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Typ:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">STRING</p></td></tr><tr valign="top"><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">Vor dem eigentlichen Dateinamen kann der absolute Pfad angegeben werden. Ohne Pfadangabe wird die Datei im aktuellen Verzeichnis (= Verzeichnis des angewählten Programms) gesucht.</p><p type="p_table_l" align="left">Regeln zur Pfadangabe siehe "<a href="156662796555.html">Adressierung von Dateien des Programmspeichers</a>".</p></td></tr><tr valign="top"><td rowspan="4"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;StartLine></code> </p></td><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">Anfangszeile des zu lesenden Dateibereichs (Call-By-Value-Parameter)</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Typ:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">INT</p></td></tr><tr valign="top"><td rowspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Wert:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">0</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Es werden die mit dem Parameter &lt;NumLines> angegebene Anzahl an Zeilen vor dem Dateiende gelesen.</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">1 … n</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Nummer der ersten zu lesenden Zeile.</p></td></tr><tr valign="top"><td rowspan="2"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;NumLines></code> </p></td><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">Anzahl der zu lesenden Zeilen (Call-By-Value-Parameter)</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Typ:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">INT</p></td></tr><tr valign="top"><td rowspan="3"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;Result></code> </p></td><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">Ergebnisvariable (Call-By-Reference-Parameter)</p><p type="p_table_l" align="left">Variablenfeld, in dem der gelesene Text abgelegt wird.</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Typ: </p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">STRING (max. Länge: 255)</p></td></tr><tr valign="top"><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">Wenn im Parameter &lt;NumLines> weniger Zeilen angegeben sind als die Feldgröße [&lt;n>,&lt;m>] der Ergebnisvariablen beträgt, dann werden die restlichen Feldelemente nicht verändert.</p><p type="p_table_l" align="left">Der Abschluss einer Zeile durch die Steuerzeichen "LF" (Line Feed) oder "CR LF" (Carriage Return Line Feed) wird <b>nicht</b> in der Ergebnisvariablen abgelegt. </p><p type="p_table_l" align="left">Gelesene Zeilen werden abgeschnitten, wenn die Zeile länger ist als die definierte Stringlänge. Es erfolgt keine Fehlermeldung.</p></td></tr></table></p><table cellpadding="0" cellspacing="0" border="0"><tr><td><font size="1px"></font></td></tr></table><table class="safety" border="1" bgcolor="#eeeeee"><colgroup><col width="5%"><col width="95%"></colgroup><tr><td><b>Hinweis</b></td></tr><tr><td><p class="safety">Binäre Files können nicht eingelesen werden. Es wird der Fehler "falscher Dateityp" (Rückgabewert der Fehlervariablen = 4) ausgegeben. Folgenden Dateitypen sind nicht lesbar: _BIN, _EXE, _OBJ, _LIB, _BOT, _TRC, _ACC, _CYC, _NCK.</p></td></tr></table><a name="block_4"></a><h3 class="Blocktitle">Beispiel</h3><a id="table_cefff68d-4bf5-44a9-b85b-c5605cebce5a"></a> <a id="table_1"></a> <a id="table_cefff68d-4bf5-44a9-b85b-c5605cebce5a"></a> <a id="table_1"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_listing" border="1" id="EUBAC"><colgroup><col width="54.3%"><col width="45.7%"></colgroup><tr valign="top"><th>Programmcode</th><th>Kommentar</th></tr><tr valign="top"><td>N10 DEF INT ERROR</td><td>; Definition der Fehlervariablen.</td></tr><tr valign="top"><td>N20 DEF STRING[255] RESULT[5]</td><td>; Definition der Ergebnisvariablen.</td></tr><tr valign="top"><td>N30 READ(ERROR,"/_N_CST_DIR/_N_TESTFILE_MPF",1,5,RESULT)</td><td>; Dateiname mit Domain-, Dateikennungund Pfadangabe.</td></tr><tr valign="top"><td>N40 IF ERROR &lt;>0</td><td>; Fehlerauswertung.</td></tr><tr valign="top"><td>N50 MSG("FEHLER"&lt;&lt;ERROR&lt;&lt;"BEI READ-BEFEHL")</td><td> </td></tr><tr valign="top"><td>N60 M0</td><td> </td></tr><tr valign="top"><td>N70 ENDIF</td><td> </td></tr><tr valign="top"><td>...</td><td> </td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><p></p></div>
  </body>
</html>