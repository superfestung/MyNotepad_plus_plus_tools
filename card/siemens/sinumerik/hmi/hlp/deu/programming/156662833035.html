<html>
  <head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Datei-Informationen auslesen (FILEDATE, FILETIME, FILESIZE, FILESTAT, FILEINFO)</title>
  </head>
  <body id="bodyID">
    <div id="nsbanner">
      <div id="TitleRowDefault">
        <h1 class="title">Datei-Informationen auslesen (FILEDATE, FILETIME, FILESIZE, FILESTAT, FILEINFO)</h1>
      </div>
    </div>
    <div id="nstext" valign="bottom">
      <p>
      </p>
      <ul>
      </ul>
      <p>Über die Befehle FILEDATE, FILETIME, FILESIZE, FILESTAT und FILEINFO können bestimmte Datei-Informationen wie Datum/Uhrzeit des letzten schreibenden Zugriffs, aktuelle Dateigröße, Datei-Status oder die Summe dieser Informationen ausgelesen werden. </p>
      <a name="block_1">
      </a>
      <h3 class="Blocktitle">Voraussetzungen</h3>
      <h4 class="Blocklabel">Schutzstufe</h4>
      <p>Die aktuell eingestellte Schutzstufe muss gleich oder größer dem Show-Recht des übergeordneten Verzeichnisses sein. Ist dies nicht der Fall, wird der Zugriff mit Fehlermeldung (Rückgabewert der Fehlervariablen = 13) abgelehnt.</p>
      <h4 class="Blocklabel">Zugriff auf EES-Laufwerke</h4>
      <p>Externe Programmspeicher auf Laufwerken, für die bei der Inbetriebnahme eine Verwendung durch die Funktion "Abarbeiten von externem Speicher (EES)" eingerichtet wurde, können von Dateihandlings-Befehlen nur dann angesprochen werden, wenn die lizenzpflichtige Option zur Nutzung dieser Funktion gesetzt ist.</p>
      <a name="block_2">
      </a>
      <h3 class="Blocktitle">Syntax</h3>FILEx(&lt;Error>,"&lt;FileName>",&lt;Result>)<a name="block_3"></a><h3 class="Blocktitle">Bedeutung</h3><a id="table_a514ad27-b984-47ca-bdff-98c7c4298578"></a> <a id="table_0"></a> <a id="table_a514ad27-b984-47ca-bdff-98c7c4298578"></a> <a id="table_0"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_default" border="1"><colgroup><col width="23.2%"><col width="9.6%"><col width="2.4%"><col width="7.2%"><col width="11.3%"><col width="9.0%"><col width="37.1%"></colgroup><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>FILEDATE</code> </p></td><td colspan="6"><p type="p_table_l" style="margin-top: 4px" align="left">Liefert das <b>Datum</b> des letzten Schreibzugriffs auf eine Datei</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>FILETIME</code> </p></td><td colspan="6"><p type="p_table_l" style="margin-top: 4px" align="left">Liefert die <b>Uhrzeit</b> des letzten Schreibzugriffs auf eine Datei</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>FILESIZE</code> </p></td><td colspan="6"><p type="p_table_l" style="margin-top: 4px" align="left">Liefert die <b>aktuelle Größe</b> einer Datei</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>FILESTAT</code> </p></td><td colspan="6"><p type="p_table_l" style="margin-top: 4px" align="left">Liefert für den <b>Status</b> einer Datei bezüglich folgender <b>Rechte</b>:</p><ul class="table"><li><p>Lesen (r: read)</p></li><li><p>Schreiben (w: write)</p></li><li><p>Ausführen (x: execute)</p></li><li><p>Anzeigen (s: show)</p></li><li><p>Löschen (d: delete)</p></li></ul><p type="p_table_l" align="left"><b>Hinweis:</b><br />Diese Schutzstufen sind spezielle Eigenschaften des passiven Filesystems. Beim Zugriff auf externe Programmspeicher liefert FILESTAT daher nur Default-Zugriffsrechte (77777).</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>FILEINFO</code> </p></td><td colspan="6"><p type="p_table_l" style="margin-top: 4px" align="left">Liefert für eine Datei die <b>Summe der Informationen</b>, die über FILEDATE, FILETIME, FILESIZE und FILESTAT auslesbar sind</p></td></tr><tr valign="top"><td rowspan="9"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;Error></code> </p></td><td colspan="6"><p type="p_table_l" style="margin-top: 4px" align="left">Variable für die Rückgabe des Fehlerwerts (Call-By-Reference-Parameter)</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Typ.</p></td><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">VAR INT</p></td></tr><tr valign="top"><td colspan="2" rowspan="7"><p type="p_table_l" style="margin-top: 4px" align="left">Wert:</p></td><td><p type="p_table_c" style="margin-top: 4px" align="center">0</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">kein Fehler</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">1</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Pfad nicht erlaubt</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">2</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Pfad nicht gefunden</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">3</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Datei nicht gefunden</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">4</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">falscher Dateityp</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">13</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Zugriffsrechte nicht ausreichend</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">22</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Stringlänge der Ergebnisvariablen (&lt;Result>) ist zu klein.</p></td></tr><tr valign="top"><td rowspan="3"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;FileName></code> </p></td><td colspan="6"><p type="p_table_l" style="margin-top: 4px" align="left">Name der Datei, von der Datei-Information(en) ausgelesen werden soll(en)</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Typ:</p></td><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">CHAR[160]</p></td></tr><tr valign="top"><td colspan="6"><p type="p_table_l" style="margin-top: 4px" align="left">Vor dem eigentlichen Dateinamen kann der absolute Pfad angegeben werden. Ohne Pfadangabe wird die Datei im aktuellen Verzeichnis (= Verzeichnis des angewählten Programms) gesucht.</p><p type="p_table_l" align="left">Regeln zur Pfadangabe siehe "<a href="156662796555.html">Adressierung von Dateien des Programmspeichers</a>".</p></td></tr><tr valign="top"><td rowspan="6"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;Result></code> </p></td><td colspan="6"><p type="p_table_l" style="margin-top: 4px" align="left">Ergebnisvariable (Call-By-Reference-Parameter)</p><p type="p_table_l" align="left">Variable, in der die angeforderte Datei-Information abgelegt wird.</p></td></tr><tr valign="top"><td rowspan="5"><p type="p_table_l" style="margin-top: 4px" align="left">Typ:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">VAR CHAR[8]</p><p type="p_table_l" align="left"></p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">bei</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">FILEDATE</p><p type="p_table_l" align="left">Format: "dd.mm.yy"</p></td></tr><tr valign="top"><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">VAR CHAR[8]</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">bei</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">FILETIME</p><p type="p_table_l" align="left">Format: "hh:mm.ss"</p></td></tr><tr valign="top"><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">VAR INT</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">bei</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">FILESIZE</p><p type="p_table_l" align="left">Die Dateigröße wird in Byte ausgegeben.</p></td></tr><tr valign="top"><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">VAR CHAR[5]</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">bei</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">FILESTAT</p><p type="p_table_l" align="left">Format: "rwxsd"</p><p type="p_table_l" align="left">(r: <b>r</b>ead, w: <b>w</b>rite, x: e<b>x</b>ecute, s: <b>s</b>how, d: <b>d</b>elete)</p></td></tr><tr valign="top"><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">VAR CHAR[32]</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">bei</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">FILEINFO</p><p type="p_table_l" align="left">Format: "rwxsd nnnnnnnn dd.mm.yy hh:mm:ss"</p></td></tr></table></p><a name="block_4"></a><h3 class="Blocktitle">Beispiel</h3><a id="table_6e9691de-3dea-4b49-9e95-9610748727a5"></a> <a id="table_1"></a> <a id="table_6e9691de-3dea-4b49-9e95-9610748727a5"></a> <a id="table_1"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_listing" border="1" id="EUEAC"><colgroup><col width="63.6%"><col width="36.4%"></colgroup><tr valign="top"><th>Programmcode</th><th>Kommentar</th></tr><tr valign="top"><td>N10 DEF INT ERROR</td><td>; Definition der Fehlervariablen.</td></tr><tr valign="top"><td>N20 STRING[32] RESULT</td><td>; Definition der Ergebnisvariablen.</td></tr><tr valign="top"><td>N30 FILEINFO(ERROR,"/_N_MPF_DIR/_N_TESTFILE_MPF",RESULT)</td><td>; Dateiname mit Domain-, Dateikennung und Pfadangabe.</td></tr><tr valign="top"><td>N40 IF ERROR &lt;> 0</td><td>; Fehlerauswertung</td></tr><tr valign="top"><td>N50    MSG("FEHLER"&lt;&lt;ERROR&lt;&lt;"BEI FILEINFO-BEFEHL")</td><td> </td></tr><tr valign="top"><td>N60    M0</td><td> </td></tr><tr valign="top"><td>N70 ENDIF</td><td> </td></tr><tr valign="top"><td>...</td><td> </td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><p>Das Beispiel könnte in der Ergebnisvariablen RESULT z. B. folgendes Ergebnis liefern:</p><p>"77777 12345678 26.05.00 13:51:30"</p></div>
  </body>
</html>