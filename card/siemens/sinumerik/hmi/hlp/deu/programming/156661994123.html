<html>
  <head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Weiches An- und Abfahren (G140 bis G143, G147, G148, G247, G248, G347, G348, G340, G341, DISR, DISCL, DISRP, FAD, PM, PR): Weitere Informationen</title>
  </head>
  <body id="bodyID">
    <div id="nsbanner">
      <div id="TitleRowDefault">
        <h1 class="title">Weiches An- und Abfahren (G140 bis G143, G147, G148, G247, G248, G347, G348, G340, G341, DISR, DISCL, DISRP, FAD, PM, PR): Weitere Informationen</h1>
      </div>
    </div>
    <div id="nstext" valign="bottom">
      <p>
      </p>
      <a name="block_1">
      </a>
      <h3 class="BlocktitleFirst">Weitere Informationen</h3>
      <h4 class="Blocklabel">Wahl der An- bzw. Abfahrkontur</h4>
      <p>Die Wahl der An- bzw. Abfahrkontur erfolgt mit dem entsprechenden G-Befehl aus der 2. G-Gruppe:</p>
      <a id="table_ea33eaa1-a38f-4c57-8841-d951bf4c7f69">
      </a> <a id="table_0"></a> <a id="table_ea33eaa1-a38f-4c57-8841-d951bf4c7f69"></a> <a id="table_0"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_default" border="1"><colgroup><col width="12.9%"><col width="87.0%"></colgroup><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">G147:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Anfahren mit einer Geraden</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">G247:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Anfahren mit einem Viertelkreis</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">G347:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Anfahren mit einem Halbkreis</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">G148:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Abfahren mit einer Geraden</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">G248:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Abfahren mit einem Viertelkreis</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">G348:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Abfahren mit einem Halbkreis</p></td></tr></table></p><p></p><a id="image_783818763_0"></a> <img border="0" src="images/167366737291.png" width="321" height="567" alt="Anfahrbewegungen bei gleichzeitiger Aktivierung der Werkzeugradiuskorrektur"/><p class="imgtitle">Anfahrbewegungen bei gleichzeitiger Aktivierung der Werkzeugradiuskorrektur</p><h4 class="Blocklabel">Wahl der An- bzw. Abfahrrichtung</h4><p>Bestimmung der An- und Abfahrrichtung mit Hilfe der Werkzeugradiuskorrektur (G140, Grundeinstellung) bei positivem Werkzeugradius:</p><ul><li><p>G41 aktiv → Anfahren von links</p></li><li><p>G42 aktiv → Anfahren von rechts</p></li></ul><p>Weitere Anfahrmöglichkeiten sind mit G141, G142 und G143 gegeben.</p><p>Diese G-Befehle sind nur dann von Bedeutung, wenn die Anfahrkontur ein Viertel- oder Halbkreis ist.</p><h4 class="Blocklabel">Aufteilung der Bewegung vom Start- zum Endpunkt (G340 und G341)</h4><p>Die Bewegungen setzen sich in jedem Fall aus einer oder mehreren Geraden sowie abhängig vom G-Befehl zur Bestimmung der Anfahrkontur aus einer weiteren Geraden bzw. einem Viertel- oder Halbkreis zusammen. Die 2 Varianten der Wegaufteilung sind in folgendem Bild dargestellt:</p><a id="image_783618187_0"></a> <img border="0" src="images/167364500491.png" width="302" height="265"/><a id="table_b48460c8-60a8-4f52-9a77-b5a70b1b603e"></a> <a id="table_1"></a> <a id="table_b48460c8-60a8-4f52-9a77-b5a70b1b603e"></a> <a id="table_1"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_default" border="1"><colgroup><col width="10.6%"><col width="89.3%"></colgroup><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">G340:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Anfahren mit einer Geraden vom Punkt P<sub>0</sub> zum Punkt P<sub>1</sub>. Diese Gerade ist parallel zur Bearbeitungsebene, wenn der Parameter DISRP nicht programmiert wurde.</p><p type="p_table_l" align="left">Senkrecht zur Bearbeitungsebene vom Punkt P<sub>1</sub> zum Punkt P<sub>3</sub> zustellen auf den durch den Parameter DISCL definierten Sicherheitsabstand zur Bearbeitungsebene.</p><p type="p_table_l" align="left">Anfahren des Endpunkts P4 mit der durch den G-Befehl der zweiten Gruppe bestimmten Kurve (Gerade, Kreis, Helix). Ist G247 oder G347 aktiv (Viertel- oder Halbkreis) und der Startpunkt P<sub>3</sub> liegt nicht in der durch den Endpunkt P<sub>4</sub> definierten Bearbeitungsebene, wird statt eines Kreises eine Helix eingefügt. Der Punkt P<sub>2</sub> ist nicht definiert bzw. er fällt mit P<sub>3</sub> zusammen.</p><p type="p_table_l" align="left">Die Kreisebene bzw. die Helixachse wird dabei durch die in im WAB-Satz aktive Ebene (G17/G18/G19) bestimmt, d. h. vom Folgesatz wird nicht die Starttangente selbst zur Bestimmung des Kreises verwendet, sondern deren Projektion in die aktive Ebene.</p><p type="p_table_l" align="left">Die Bewegung vom Punkt P<sub>0</sub> zum Punkt P<sub>3</sub> erfolgt in zwei Geraden mit der Geschwindigkeit, die vor dem WAB-Satz wirksam war.</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">G341:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Anfahren mit einer Geraden vom Punkt P<sub>0</sub> zum Punkt P<sub>1</sub>. Diese Gerade ist parallel zur Bearbeitungsebene, wenn der Parameter DISRP nicht programmiert wurde.</p><p type="p_table_l" align="left">Senkrecht zur Bearbeitungsebene vom Punkt P<sub>1</sub> bis zu dem durch den Parameter DISCL definierten Sicherheitsabstand zur Bearbeitungsebene im Punkt P<sub>2</sub> zustellen.</p><p type="p_table_l" align="left">Senkrecht zur Bearbeitungsebene vom Punkt P<sub>2</sub> zum Punkt P<sub>3</sub> zustellen. Anfahren des Endpunkts mit der durch den G-Befehl der zweiten Gruppe bestimmten Kurve. P<sub>3</sub> und P<sub>4</sub> liegen in der Bearbeitungsebene, so dass bei G247 bzw. G347 nie eine Helix, sondern immer ein Kreis eingefügt wird.</p></td></tr></table></p><p>In allen Fällen, in denen die Lage der aktiven Ebene G17/G18/G19 eingeht (Kreisebene, Helixachse, Zustellbewegungen senkrecht zur aktiven Ebene), wird ein eventuell aktiver drehender Frame berücksichtigt.</p><h4 class="Blocklabel">Länge der Anfahrgerade bzw. Radius bei Anfahrkreisen (DISR)</h4><ul><li><p>An-/Abfahren mit Geraden</p><p>DISR gibt den Abstand der Fräserkante vom Startpunkt der Kontur an, d. h. die Länge der Geraden ergibt sich bei aktiver WRK als Summe von Werkzeugradius und programmiertem Wert von DISR. Der Werkzeugradius wird nur berücksichtigt, wenn er positiv ist.</p><p>Die resultierende Geradenlänge muss positiv sein, d. h. es sind negative Werte für DISR zulässig, solange der Betrag von DISR kleiner als der Werkzeugradius ist.</p></li><li><p>An-/Abfahren mit Kreisen</p><p>DISR gibt den Radius der Werkzeugmittelpunktsbahn an. Ist WRK aktiviert, wird ein Kreis mit einem solchen Radius erzeugt, dass auch in diesem Fall die Werkzeugmittelpunktsbahn mit dem programmierten Radius resultiert.</p></li></ul><h4 class="Blocklabel">Abstand des Punktes P2 von der Bearbeitungsebene (DISCL)</h4><p>Soll die Position des Punkts P<sub>2</sub> auf der Achse senkrecht zur Kreisebene absolut angegeben werden, ist der Wert in der Form <code>DISCL=AC(...)</code> zu programmieren.</p><p>Bei DISCL=0 gilt:</p><ul><li><p>Bei G340: Die gesamte Anfahrbewegung besteht nur noch aus zwei Sätzen (P<sub>1</sub>, P<sub>2</sub> und P<sub>3</sub> fallen zusammen). Die Anfahrkontur wird von P<sub>1</sub> zu P<sub>4 </sub>gebildet.</p></li><li><p>Bei G341: Die gesamte Anfahrbewegung besteht aus drei Sätzen (P<sub>2</sub> und P<sub>3</sub> fallen zusammen). Liegen P<sub>0</sub> und P<sub>4</sub> in der gleichen Ebene entstehen nur zwei Sätze (Zustellbewegung von P<sub>1</sub> nach P<sub>3</sub> entfällt).</p></li><li><p>Es wird überwacht, dass der durch DISCL definierte Punkt zwischen P<sub>1</sub> und P<sub>3 </sub>liegt, d. h. bei allen Bewegungen, die eine Komponente senkrecht zur Bearbeitungsebene haben, muss diese Komponente das gleiche Vorzeichen haben.</p></li><li><p>Bei der Erkennung der Richtungsumkehr wird eine durch das Maschinendatum MD20204 $MC_WAB_CLEARANCE_TOLERANCE definierte Toleranz zugelassen.</p></li></ul><h4 class="Blocklabel">Abstand des Punkts P1 (Rückzugsebene) von der Bearbeitungsebene (DISRP)</h4><p>Soll die Position des Punkts P<sub>1</sub> auf der Achse senkrecht zur Bearbeitungsebene absolut angegeben werden, ist der Wert in der Form <code>DISRP=AC(...)</code> zu programmieren.</p><p>Ist dieser Parameter nicht programmiert, hat der Punkt P<sub>1</sub> den gleichen Abstand von der Bearbeitungsebene wie der Punkt P<sub>0</sub>, d. h die Anfahrgerade P<sub>0</sub> → P<sub>1</sub> ist parallel zur Bearbeitungsebene.</p><p>Es wird überwacht, dass der durch DISRP definierte Punkt zwischen P<sub>0</sub> und P<sub>2</sub> liegt, d. h. bei allen Bewegungen, die eine Komponente senkrecht zur Bearbeitungsebene haben (Zustellbewegungen, Anfahrbewegung von P<sub>3</sub> nach P<sub>4</sub>) muss diese Komponente das gleiche Vorzeichen haben. Eine Richtungsumkehr ist nicht zugelassen. Gegebenenfalls wird ein Alarm ausgegeben.</p><p>Bei der Erkennung der Richtungsumkehr wird eine durch das Maschinendatum MD20204 $MC_WAB_CLEARANCE_TOLERANCE definierte Toleranz zugelassen. Liegt P<sub>1</sub> außerhalb des durch P<sub>0</sub> und P<sub>2</sub> definierten Bereichs, ist die Abweichung jedoch kleiner oder gleich dieser Toleranz, wird angenommen, dass P<sub>1</sub> in der durch P<sub>0</sub> bzw. P<sub>2</sub> definierten Ebene liegt.</p><h4 class="Blocklabel">Programmierung des Endpunkts</h4><p>Der Endpunkt wird in der Regel programmiert mit X... Y... Z...</p><p>Die Programmierung des Konturendpunkts beim Anfahren unterscheidet sich wesentlich von der beim Abfahren. Die beiden Fälle werden deshalb hier getrennt behandelt.</p><p><b>Programmierung des Endpunktes P4 beim Anfahren</b></p><p>Der Endpunkt P<sub>4</sub> kann im WAB-Satz selbst programmiert sein. Alternativ dazu besteht die Möglichkeit, P<sub>4</sub> durch den Endpunkt des nächsten Verfahrsatzes zu bestimmen. Zwischen WAB-Satz und nächsten Verfahrsatz können weitere Sätze ohne Bewegung der Geometrieachsen eingefügt werden.</p><p>Beispiel:</p><a id="table_a08536d7-3605-4a18-ad7c-77adfbc605c7"></a> <a id="table_2"></a> <a id="table_a08536d7-3605-4a18-ad7c-77adfbc605c7"></a> <a id="table_2"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_listing" border="1" id="EEDAC"><colgroup><col width="58.0%"><col width="42.0%"></colgroup><tr valign="top"><th>Programmcode</th><th>Kommentar</th></tr><tr valign="top"><td>$TC_DP1[1,1]=120</td><td>; Fräserwerkzeug T1/D1</td></tr><tr valign="top"><td>$TC_DP6[1,1]=7</td><td>; Werkzeug mit 7 mm Radius</td></tr><tr valign="top"><td>N10 G90 G0 X0 Y0 Z30 D1 T1</td><td> </td></tr><tr valign="top"><td>N20 X10</td><td> </td></tr><tr valign="top"><td>N30 G41 G147 DISCL=3 DISR=13 Z=0 F1000</td><td> </td></tr><tr valign="top"><td>N40 G1 X40 Y-10</td><td> </td></tr><tr valign="top"><td>N50 G1 X50</td><td> </td></tr><tr valign="top"><td>...</td><td> </td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><p></p><p><code>N30/N40</code> kann ersetzt werden durch:</p>N30 G41 G147 DISCL=3 DISR=13 X40 Y-10 Z0 F1000<p>bzw.</p>N30 G41 G147 DISCL=3 DISR=13 F1000N40 G1 X40 Y-10 Z0<a id="image_783648907_0"></a> <img border="0" src="images/167365739403.png" width="302" height="227"/><p></p><p><b>Programmierung des Endpunktes P0 beim Abfahren</b></p><p>Beim Abfahren ist die Programmierung des Endpunkts der WAB-Kontur in einem Folgesatz nicht vorgesehen, d. h. die Endposition wird immer aus dem WAB-Satz selbst entnommen, unabhängig davon wie viele Achsen programmiert wurden. Bei der Bestimmung des Endpunkts sind dabei die folgenden drei Fälle zu unterscheiden:</p><ol><li><p>Im WAB-Satz ist keine Geometrieachse programmiert. Die Kontur endet in diesem Fall im Punkt P<sub>1</sub> (falls DISRP programmiert ist), im Punkt P<sub>2</sub> (falls DISCL aber nicht DISRP programmiert ist) oder im Punkt P<sub>3</sub> (falls weder DICLS noch DISRP programmiert ist).</p><p>Die Position in den Achsen, die die Bearbeitungsebene bilden, ergibt sich aus der Wegfahrkontur (Endpunkt der Geraden bzw. des Kreises). Die Achskomponente senkrecht dazu wird durch DISCL bzw. DISPR definiert. Ist in diesem Fall sowohl DISCL=0 als auch DISRP=0, verläuft die Bewegung deshalb vollständig in der Ebene, d. h. die Punkt P<sub>0</sub> bis P<sub>3</sub> fallen zusammen.</p></li><li><p>Im WAB-Satz ist nur die Achse senkrecht zur Bearbeitungsebene programmiert. Die Kontur endet in diesem Fall im Punkt P<sub>0</sub>. Falls DISRP programmiert ist (d. h. die beiden Punkte P<sub>0</sub> und P<sub>1</sub> fallen nicht zusammen), verläuft die Gerade P<sub>1</sub> → P<sub>0</sub> senkrecht zur Bearbeitungsebene. Die Positionen der übrigen beiden Achsen ergeben sich wie unter 1.</p></li><li><p>Es ist mindestens eine Achse der Bearbeitungsebene programmiert. Die eventuell fehlende zweite Achse der Bearbeitungsebene wird aus ihrer letzten Position im Vorgängersatz modal ergänzt.</p></li></ol><p>Die Position der Achse senkrecht zur Bearbeitungsebene wird – abhängig davon, ob diese Achse programmiert ist oder nicht – wie unter 1. oder 2. gebildet. Die so gebildete Position definiert den Endpunkt P<sub>0</sub>. Ist der WAB-Abfahrsatz gleichzeitig der Deaktivierungssatz der Werkzeugradiuskorrektur, so wird in den ersten beiden Fällen eine zusätzliche Wegkomponente in der Bearbeitungsebene von P<sub>1</sub> nach P<sub>0</sub> derart eingefügt, dass sich bei der Deaktivierung der Werkzeugradiuskorrektur am Ende der Wegfahrkontur keine Bewegung ergibt, d. h. dieser Punkt definiert dann nicht eine Position auf einer zu korrigierenden Kontur, sondern den Werkzeugmittelpunkt. Im Fall drei muss die Abwahl der Werkzeugradiuskorrektur nicht gesondert behandelt werden, da der programmierte Punkt P<sub>0</sub> bereits unmittelbar die Position des Werkzeugmittelpunkts am Ende der Gesamtkontur definiert.</p><p>Das Verhalten in den Fällen 1 und 2, d. h. bei nicht explizit programmiertem Endpunkt in der Bearbeitungsebene bei gleichzeitiger Abwahl der Werkzeugradiuskorrektur, ist in folgendem Bild dargestellt:</p><a id="image_783679627_0"></a> <img border="0" src="images/167365903115.png" width="302" height="227"/><h4 class="Blocklabel">An- bzw. Abfahrgeschwindigkeiten</h4><ul><li><p>Geschwindigkeit des Vorgängersatzes (G0)</p><p>Mit dieser Geschwindigkeit werden alle Bewegungen von P<sub>0</sub> bis zu P<sub>2</sub> ausgeführt, d. h. die Bewegung parallel zur Bearbeitungsebene und der Teil der Zustellbewegung bis zum Sicherheitsabstand.</p></li><li><p>Programmierung mit FAD</p><p>Angabe der Vorschubgeschwindigkeit bei</p><ul><li><p>G341: Zustellbewegung senkrecht zur Bearbeitungsebene von P<sub>2</sub> nach P<sub>3</sub></p></li><li><p>G340: von Punkt P<sub>2</sub> bzw. P<sub>3</sub> zum P<sub>4</sub></p><p>Wird FAD nicht programmiert, wird dieser Teil der Kontur ebenfalls mit der modal wirksamen Geschwindigkeit des Vorgängersatzes, falls im WAB-Satz kein F-Wort programmiert ist, verfahren.</p></li></ul></li><li><p>Programmierter Vorschub F</p><p>Dieser Vorschubwert ist ab P<sub>3</sub> bzw. P<sub>2</sub> wirksam, falls FAD nicht programmiert ist. Wird im WAB-Satz kein F-Wort programmiert, wirkt die Geschwindigkeit des Vorgängersatzes.</p></li></ul><p>Beispiel:</p><a id="table_9b9a4c6b-ee7e-4dec-a518-3cbeb7f2c810"></a> <a id="table_3"></a> <TableTitle></TableTitle><a id="table_9b9a4c6b-ee7e-4dec-a518-3cbeb7f2c810"></a> <a id="table_3"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_listing" border="1" id="EEIAC"><colgroup><col width="72.6%"><col width="27.4%"></colgroup><tr valign="top"><th>Programmcode</th><th>Kommentar</th></tr><tr valign="top"><td>$TC_DP1[1,1]=120</td><td>; Fräserwerkzeug T1/D1</td></tr><tr valign="top"><td>$TC_DP6[1,1]=7</td><td>; Werkzeug mit 7mm Radius</td></tr><tr valign="top"><td>N10 G90 G0 X0 Y0 Z20 D1 T1</td><td> </td></tr><tr valign="top"><td>N20 G41 G341 G247 DISCL=AC(5) DISR=13 FAD 500 X40 Y-10 Z=0 F200</td><td> </td></tr><tr valign="top"><td>N30 X50</td><td> </td></tr><tr valign="top"><td>N40 X60</td><td> </td></tr><tr valign="top"><td>...</td><td> </td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><a id="image_783710347_0"></a> <img border="0" src="images/167366046219.png" width="302" height="231"/><p>Beim Abfahren sind die Rollen von modal wirksamem Vorschub aus dem Vorgängersatz und dem im WAB-Satz programmierten Vorschubwert vertauscht, d. h. die eigentliche Abfahrkontur wird mit dem alten Vorschub verfahren, eine neu mit F-Wort programmierte Geschwindigkeit gilt entsprechend ab P<sub>2</sub> bis zum P<sub>0</sub>.</p><a id="image_783726603_0"></a> <img border="0" src="images/91447834123.png" width="306" height="265"/><a id="image_783757323_0"></a> <img border="0" src="images/91447975435.png" width="303" height="265"/><a id="image_783788043_0"></a> <img border="0" src="images/91448078347.png" width="303" height="265"/><h4 class="Blocklabel">Lesen von Positionen</h4><p>Die Punkte P<sub>3</sub> und P<sub>4</sub> können beim Anfahren als Systemvariable im WKS gelesen werden.</p><ul><li><p>$P_APR: Lesen von P </p></li><li><p><sub>3</sub> (Aufstartpunkt)</p></li><li><p>$P_AEP: Lesen von P </p></li><li><p><sub>4</sub> (Konturanfangspunkt)</p></li><li><p>$P_APDV: Lesen, ob $P_APR und $P_AEP gültige Werte enthalten </p></li></ul></div>
  </body>
</html>