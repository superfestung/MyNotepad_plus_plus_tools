<html>
  <head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Achstausch (GET, RELEASE, AXTOCHAN)</title>
  </head>
  <body id="bodyID">
    <div id="nsbanner">
      <div id="TitleRowDefault">
        <h1 class="title">Achstausch (GET, RELEASE, AXTOCHAN)</h1>
      </div>
    </div>
    <div id="nstext" valign="bottom">
      <p>
      </p>
      <p>Über die Befehle <code>GET</code>, <code>RELEASE</code> und <code>AXTOCHAN</code> können Kommandoachsen zwischen Kanälen getauscht werden. </p>
      <h4 class="Blocklabel">Voraussetzung</h4>
      <p>Die Kommandoachse die zwischen den Kanälen geauscht wird, muss als Kanalachse im jeweiligen Kanal bekannt bzw. parametriert sein.</p>
      <a name="block_1">
      </a>
      <h3 class="Blocktitle">Programmierung</h3>
      <h4 class="Blocklabel">Syntax</h4>GET(&lt;Achse 1> [{, &lt;Achse n>}])RELEASE((&lt;Achse 1> [{, &lt;Achse n> }])AXTOCHAN(&lt;Achse 1>, &lt;Kanalnummer 1> [{, &lt;Achse n>, &lt;Kanalnummer n> }])<h4 class="Blocklabel">Bedeutung</h4><a id="table_b4d8d6ff-a625-4531-acba-1d8b7079f1d3"></a> <a id="table_0"></a> <a id="table_b4d8d6ff-a625-4531-acba-1d8b7079f1d3"></a> <a id="table_0"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_invisible" border="0"><colgroup><col width="19.7%"><col width="20.4%"><col width="59.9%"></colgroup><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>GET</code>:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Anforderung zum Tausch einer Achse in den eigenen Kanal</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>RELEASE</code>:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Freigabe einer Achse zum Achstausc</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>AXTOCHAN</code>:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Anforderung einer Achse zum Tausch in den angegebenen Kanal</p></td></tr><tr valign="top"><td rowspan="3"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;Achse n></code>:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Maschinenachsname</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Typ:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">AXIS</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Wertebereich:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">im Kanal definierte Maschinenachsnamen</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;Kanalnummer n></code>:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Kanalnummer</p></td></tr><tr valign="top"><td> </td><td><p type="p_table_l" style="margin-top: 4px" align="left">Typ:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">INTEGER</p></td></tr><tr valign="top"><td> </td><td><p type="p_table_l" style="margin-top: 4px" align="left">Wertebereich:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">1 ... maximale Kanalnummer</p></td></tr></table></p><a name="block_2"></a><h3 class="Blocktitle">Achstyp und Achsstatus bezüglich Achstausch</h3><p>Der zum Aktivierungszeitpunkt der Synchronaktion aktuell gültige Achstyp und Achsstatus kann über die Systemvariablen $AA_AXCHANGE_TYP bzw. $AA_AXCHANGE_STAT abgefragt werden. Abhängig vom Kanal der das Interpolationsrecht dieser Achse besitzt, und vom Zustand für den zulässigen Achstausch, ergibt sich aus der Synchronaktion ein unterschiedlicher Ablauf.</p><p>Aus einer Synchronaktion heraus kann eine Achse mit <code>GET</code> angefordert werden, wenn</p><ul class="comment"><li class="comment"><p class="comment">ein anderer Kanal das Schreibrecht- bzw. Interpolationsrecht für die Achse hat</p></li><li class="comment"><p class="comment">die angeforderte Achse bereits dem angeforderten Kanal zugeordnet ist</p></li><li class="comment"><p class="comment">die Achse im Zustand neutrale Achse vom PLC kontrolliert ist</p></li><li class="comment"><p class="comment">die Achse Kommandoachse, Pendelachse oder konkurrierende PLC-Achse ist</p></li><li class="comment"><p class="comment">die Achse bereits dem NC-Programm des Kanals zugeordnet ist</p><table cellpadding="0" cellspacing="0" border="0"><tr><td><font size="1px"></font></td></tr></table><table class="safety" border="1" bgcolor="#eeeeee"><colgroup><col width="5%"><col width="95%"></colgroup><tr><td><b>Hinweis</b></td></tr><tr><td><p class="safety"><b>Randbedingung:</b> Eine "ausschließlich von der PLC kontrollierte Achse" oder eine "fest zugeordnete PLC-Achse", kann nicht dem NC-Programm zugeordnet werden.</p></td></tr></table></li></ul><p class="comment">Aus einer Synchronaktion heraus kann eine Achse mit <code>RELEASE</code> freigegeben werden, wenn die Achse:</p><ul class="comment"><li class="comment"><p class="comment">bisher dem NC-Programm des Kanals zugeordnet ist.</p></li><li class="comment"><p class="comment">bereits im Zustand neutrale Achse ist.</p></li><li class="comment"><p class="comment">bereits ein anderer Kanal hat das Interpolationsrecht dieser Achse hat.</p></li></ul><a name="block_3"></a><h3 class="Blocktitle">Achse aus anderem Kanal anfordern</h3><p>Hat zum Aktivierungszeitpunkt der Aktion <code>GET</code> ein <b>anderer Kanal </b>das Interpolationsrecht für die Achse $AA_AXCHANGE_TYP[Achse] == 2, so wird die Achse mittels Achstausch von diesem Kanal angefordert $AA_AXCHANGE_TYP[Achse] == 6 und sobald als möglich dem anfordernden Kanal zugeordnet. Sie nimmt dann den Zustand <b>neutrale Achse</b> $AA_AXCHANGE_TYP[Achse] == 3 an.</p><p class="comment">Der Zustandswechsel nach neutraler Achse <b>hat kein</b> Reorganisieren im anfordernden Kanal zur Folge.</p><p class="comment"><b>Angeforderte Achse wurde bereits als neutrale Achse angefordert:</b></p><p class="comment">$AA_AXCHANGE_TYP[&lt;Achse>]==6, so wird die Achse für das NC-Programm angefordert $AA_AXCHANGE_TYP[Achse] == 5 und sobald als möglich dem NC-Programm des Kanals zugeordnet $AA_AXCHANGE_TYP[Achse] == 0. </p><table cellpadding="0" cellspacing="0" border="0"><tr><td><font size="1px"></font></td></tr></table><table class="safety" border="1" bgcolor="#eeeeee"><colgroup><col width="5%"><col width="95%"></colgroup><tr><td><b>Hinweis</b></td></tr><tr><td><p class="safety">Diese Zuordnung <b>hat ein</b> Reorganisieren zur Folge.</p></td></tr></table><a name="block_4"></a><h3 class="Blocktitle">Achse ist bereits dem angeforderten Kanal zugeordnet</h3><p>Ist die angeforderte Achse zum Aktivierungszeitpunkt <b>bereits diesem Kanal </b>zugeordnet, und im Zustand neutrale Achse nicht vom PLC kontrolliert $AA_AXCHANGE_TYP[Achse] == 3, so wird diese Achse dem NC-Programm zugeordnet $AA_AXCHANGE_TYP[Achse] == 0.</p><p>Dies hat <b>einen</b> Reorganisationsvorgang zur Folge.</p><a name="block_5"></a><h3 class="Blocktitle">Achse im Zustand neutrale Achse ist PLC kontrolliert</h3><p>Ist die Achse im Zustand neutrale Achse <b>vom PLC kontrolliert </b>$AA_AXCHANGE_TYP[Achse] == 4, so wird die Achse als neutrale Achse angefordert $AA_AXCHANGE_TYP[Achse] == 8. Dabei wird die Achse für einen automatischen Achstausch zwischen Kanälen gesperrt (Bit 0 == 0), abhängig vom Bit 0 im Maschinendatum:</p><p>MD10722 $MN_AXCHANGE_MASK (Parametrierung des Achstausch-Verhaltens)   </p><p>Dies entspricht $AA_AXCHANGE_STAT[Achse] == 1. </p><a name="block_6"></a><h3 class="Blocktitle">Achse ist als Kommandoachse aktiv / PLC zugeordnet</h3><p>Ist die Achse als Kommandoachse bzw. Pendelachse oder konkurrierende Positionierachse (PLC-Achse) aktiv ($AA_AXCHANGE_TYP[&lt;Achse>] == 1), wird die Achse als neutrale Achse angefordert ($AA_AXCHANGE_TYP[&lt;Achse>] == 8). Dabei wird die Achse, abhängig von der Einstellung im nachfolgenden Maschinendatum, für einen automatischen Achstausch zwischen Kanälen gesperrt,:</p><p>MD10722 $MN_AXCHANGE_MASK (Parametrierung des Achstausch-Verhaltens)</p><p>Dies entspricht $AA_AXCHANGE_STAT[&lt;Achse>] == 1.</p><p>Mit einer erneuten Anforderung <code>GET</code> wird die Achse dann für das NC-Programm angefordert ⇒ $AA_AXCHANGE_TYP[Achse] == 7.</p><a name="block_7"></a><h3 class="Blocktitle">Achse bereits dem NC-Programm des Kanals zugeordnet</h3><p>Ist die Achse bereits dem NC-Programm des Kanals zugeordnet ($AA_AXCHANGE_TYP[&lt;Achse>] == 0) oder ist diese Zuordnung angefordert, z. B. Achstausch vom NC-Programm ausgelöst ($AA_AXCHANGE_TYP[&lt;Achse>] == 5 bzw. $AA_AXCHANGE_TYP[&lt;Achse>] == 7), ergibt sich <b>keine</b> Zustandsänderung.</p><a name="block_8"></a><h3 class="Blocktitle">Achse zum Achstausch freigeben</h3><p>Ist die Achse zum Zeitpunkt der Freigabe dem NC-Programm zugeordnet ($AA_AXCHANGE_TYP[&lt;Achse>] == 0), wird sie in den Zustand neutrale Achse überführt ($AA_AXCHANGE_TYP[&lt;Achse>] == 3) und gegebenenfalls zum Achstausch in einen anderen Kanal freigegeben.</p><p>Dies hat <b>einen</b> Reorganisationsvorgang zur Folge.</p><h4 class="Blocklabel">Freizugebende Achse ist bereits neutrale Achse:</h4><p>Ist die Achse bereits im Zustand neutrale Achse ($AA_AXCHANGE_TYP[&lt;Achse>] == 3) oder als Kommando- bzw. Pendelachse aktiv oder als konkurrierende Positionierachse der PLC zugeordnet ($AA_AXCHANGE_TYP[&lt;Achse>] == 1), wird die Achse für einen automatischen Achstausch zwischen Kanälen freigegeben. </p><p>$AA_AXCHANGE_STAT[&lt;Achse>] wird, falls kein anderer Grund für eine Bindung der Achse an den Kanal vorliegt, von 1 auf 0 zurückgesetzt. Eine derartige Bindung der Achse liegt z. B. vor bei:</p><ul><li><p>aktiver Achskopplung</p></li><li><p>aktivem Schnellabheben</p></li><li><p>aktiver Transformation</p></li><li><p>JOG-Anforderung</p></li><li><p>rotierendes Frame mit PLC-, Kommando- oder Pendelachsbewegung</p></li></ul><a name="block_9"></a><h3 class="Blocktitle">Ein anderer Kanal hat bereits das Interpolationsrecht</h3><p>Hat bereits ein anderer Kanal das Interpolationsrecht ($AA_AXCHANGE_TYP[&lt;Achse>] == 2), ergibt sich keine Zustandsänderung. Das bedeutet auch, dass das Warten auf eine Achse, ausgelöst durch NC-Programm ($AA_AXCHANGE_TYP[&lt;Achse>] == 5) oder eine vorherige Anforderung <code>GET</code> aus einer Synchronaktion ($AA_AXCHANGE_TYP[&lt;Achse>] == 6) nicht durch ein Freigabe<b> </b><code>RELEASE</code> aus eine Synchronaktion abgebrochen werden kann.</p><a name="block_10"></a><h3 class="Blocktitle">Randbedingungen</h3><ul><li><p>Werden im Aktionsteil einer Synchronaktion oder in einem Satz eines Technologiezyklus mehrere Anforderungen <code>GET</code> und Freigaben <code>RELEASE</code> für die gleiche Achse programmiert, heben sich diese Aufträge unter Umständen gegenseitig auf und es wird nur der jeweils letzte Auftrag ausgeführt.</p><p>Beispiel:</p></li></ul><a id="table_1"></a> <a id="table_1"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_invisible" border="0"><colgroup><col width="21.9%"><col width="78.0%"></colgroup><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment">Programmierung:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment"><code>GET(X,Y) RELEASE(Y,Z) GET(Z)</code></p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment">Ausführung:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment">GET(X) RELEASE(Y) GET(Z)</p></td></tr></table></p><ul class="comment"><li class="comment"><p class="comment">Sind im Aktionsteil einer Synchronaktion neben <code>GET</code> / <code>RELEASE</code> noch weitere Befehle programmiert, wird nicht erst auf den Abschluss der <code>GET</code> / <code>RELEASE</code> Anforderung gewartet bevor diese Befehle ausgeführt werden. Dadurch kann es zu einem Fehler kommen, falls z.B. eine mit <code>GET</code> angeforderte Achse für die Positionierbewegung noch nicht verfügbar ist:</p><p class="comment"><code>GET[&lt;Achse>] POS[&lt;Achse>]</code></p></li></ul><a name="block_11"></a><h3 class="Blocktitle">Beispiel 1: <code>GET</code> und <code>RELEASE</code> als Aktion in Synchronaktionen in zwei Kanälen</h3><p class="comment">Voraussetzung: Die Achse Z muss Kanalachse im 1. und 2. Kanal sein</p><h4 class="Blocklabel">1. Programmablauf im 1. Kanal:</h4><a id="table_2"></a> <a id="table_2"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_listing" border="1" id="EKCAC"><colgroup><col width="46.8%"><col width="53.2%"></colgroup><tr valign="top"><th>Programmcode</th><th>Kommentar</th></tr><tr valign="top"><td>WHEN TRUE DO RELEASE(Z)</td><td>; Z-Achse wird neutral</td></tr><tr valign="top"><td colspan="2">; Einlesesperre solange Z-Achse Programmachse ist</td></tr><tr valign="top"><td colspan="2">WHENEVER $AA_TYP[Z] == 1 DO RDISABLE</td></tr><tr valign="top"><td colspan="2">N110 G4 F0.1</td></tr><tr valign="top"><td colspan="2">...</td></tr><tr valign="top"><td colspan="2">; Z-Achse wird wieder NC-Programm-Achse</td></tr><tr valign="top"><td colspan="2">WHEN TRUE DO GET(Z)</td></tr><tr valign="top"><td colspan="2">; Einlesesperre bis Z-Achse Programmachse ist</td></tr><tr valign="top"><td colspan="2">WHENEVER $AA_TYP[Z] &lt;> 1 DO RDISABLE</td></tr><tr valign="top"><td colspan="2">N120 G4 F0.1</td></tr><tr valign="top"><td colspan="2">...</td></tr><tr valign="top"><td>WHEN TRUE DO RELEASE(Z)</td><td>; Z-Achse wird neutral</td></tr><tr valign="top"><td colspan="2">; Einlesesperre solange Z-Achse Programmachse ist</td></tr><tr valign="top"><td colspan="2">WHENEVER $AA_TYP[Z] == 1 DO RDISABLE</td></tr><tr valign="top"><td colspan="2">N130 G4 F0.1</td></tr><tr valign="top"><td colspan="2">...</td></tr><tr valign="top"><td>N140 START(2)</td><td>; 2. Kanal starten</td></tr><tr valign="top"><td colspan="2">N150 ; siehe unten: "3. Fortsetzung: Programmablauf im 1. Kanal"</td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><h4 class="Blocklabel">2. Programmablauf im 2. Kanal:</h4><a id="table_3"></a> <a id="table_3"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_listing" border="1" id="EDFAC"><colgroup><col width="46.8%"><col width="53.2%"></colgroup><tr valign="top"><th>Programmcode</th><th>Kommentar</th></tr><tr valign="top"><td>WHEN TRUE DO GET(Z)</td><td>; Z-Achse in 2. Kanal holen (neutral)</td></tr><tr valign="top"><td colspan="2">; Einlesesperre solange Z-Achse in anderem Kanal ist</td></tr><tr valign="top"><td colspan="2">WHENEVER $AA_TYP[Z] == 0 DO RDISABLE</td></tr><tr valign="top"><td colspan="2">N210 G4 F0.1</td></tr><tr valign="top"><td colspan="2">...</td></tr><tr valign="top"><td>WHEN TRUE DO GET(Z)</td><td>; Z-Achse wird NC-Programm-Achse</td></tr><tr valign="top"><td colspan="2">; Einlesesperre bis Z-Achse Programmachse ist</td></tr><tr valign="top"><td colspan="2">WHENEVER $AA_TYP[Z] &lt;> 1 DO RDISABLE</td></tr><tr valign="top"><td colspan="2">N220 G4 F0.1</td></tr><tr valign="top"><td colspan="2">...</td></tr><tr valign="top"><td>WHEN TRUE DO RELEASE(Z)</td><td>; Z-Achse im 2. Kanal neutral</td></tr><tr valign="top"><td colspan="2">; Einlesesperre solange Z-Achse Programmachse ist</td></tr><tr valign="top"><td colspan="2">WHENEVER $AA_TYP[Z] == 1 DO RDISABLE</td></tr><tr valign="top"><td colspan="2">N230 G4 F0.1</td></tr><tr valign="top"><td colspan="2">...</td></tr><tr valign="top"><td>N250 WAITM(10,1,2)</td><td>; mit Kanal 1 synchronisieren</td></tr><tr valign="top"><td colspan="2">N999 M30</td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><p class="comment"><b>3. Fortsetzung: Programmablauf im 1. Kanal:</b></p><a id="table_4"></a> <a id="table_4"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_listing" border="1" id="E1HAC"><colgroup><col width="46.8%"><col width="53.2%"></colgroup><tr valign="top"><th>Programmcode</th><th>Kommentar</th></tr><tr valign="top"><td>N150 WAITM(10,1,2)</td><td>; mit Kanal 2 synchronisieren</td></tr><tr valign="top"><td colspan="2">...</td></tr><tr valign="top"><td>WHEN TRUE DO GET(Z)</td><td>; Z-Achse in diesen Kanal holen</td></tr><tr valign="top"><td colspan="2">; Einlesesperre solange Z-Achse in anderem Kanal ist</td></tr><tr valign="top"><td colspan="2">WHENEVER $AA_TYP[Z] == 0 DO RDISABLE</td></tr><tr valign="top"><td colspan="2">N160 G4 F0.1</td></tr><tr valign="top"><td colspan="2">...</td></tr><tr valign="top"><td>N199 WAITE(2)</td><td>; warte auf Programmende im Kanal 2</td></tr><tr valign="top"><td colspan="2">N999 M30</td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><a name="block_12"></a><h3 class="Blocktitle">Achse einem anderen Kanal übergeben (<code>AXTOCHAN</code>) </h3><p class="comment">Aus einer Synchronaktion heraus kann mit dem Befehl <code>AXTOCHAN</code> eine Achse für einen beliebigen Kanal angefordert werden.</p><p class="comment">Ist die Achse bereits dem NC-Programm des Kanals zugeordnet ($AA_AXCHANGE_TYP[&lt;Achse>] == 0) ergibt sich <b>keine</b> Zustandsänderung. </p><p class="comment">Wird eine Achse aus einer Synchronaktion für den eigenen Kanal angefordert, wird <code>AXTOCHAN</code> auf den Befehl <code>GET</code> abgebildet.</p><ul class="comment"><li class="comment"><p class="comment">Mit der <b>ersten</b> Anforderung für den eigenen Kanal, wird die Achse zur neutralen Achse.</p></li><li class="comment"><p class="comment">Mit der <b>zweiten</b> Anforderung wird die Achse dem NC-Programm zugeordnet.</p></li></ul><h4 class="Blocklabel">Randbedingung</h4><p class="comment">Eine "PLC kontrollierte Achse" entspricht einer "konkurrierenden Positionierachse" bei der besondere Randbedingungen zu beachten sind. Siehe dazu:</p><p class="comment"><b>Weitere Informationen</b></p><p class="comment">Funktionshandbuch Achsen und Spindeln</p><table cellpadding="0" cellspacing="0" border="0"><tr><td><font size="1px"></font></td></tr></table><table class="safety" border="1" bgcolor="#eeeeee"><colgroup><col width="5%"><col width="95%"></colgroup><tr><td><b>Hinweis</b></td></tr><tr><td><p class="safety">Eine PLC-Achse kann den Kanal nicht wechseln. </p><p class="safety">Eine ausschließlich von der PLC kontrollierte Achse kann nicht dem NC-Programm zugeordnet werden.</p></td></tr></table></div>
  </body>
</html>