<html>
  <head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Frame-Berechnung aus 3 Messpunkten im Raum (MEAFRAME)</title>
  </head>
  <body id="bodyID">
    <div id="nsbanner">
      <div id="TitleRowDefault">
        <h1 class="title">Frame-Berechnung aus 3 Messpunkten im Raum (MEAFRAME)</h1>
      </div>
    </div>
    <div id="nstext" valign="bottom">
      <p>
      </p>
      <p>Die Funktion MEAFRAME wird zur Unterstützung der Messzyklen eingesetzt. Sie berechnet den Frame aus drei idealen und den korrespondierenden gemessenen Punkten.</p>
      <p>Wird ein Werkstück für die Bearbeitung positioniert, ist seine Position relativ zum kartesischen Maschinenkoordinatensystem bezüglich seiner Idealposition i. A. sowohl verschoben als auch gedreht. Für exakte Bearbeitung oder Messung ist entweder eine kostspielige physikalische Justierung oder Änderung der Bewegungen im Teileprogramm nötig.</p>
      <p>Ein Frame kann durch Abtasten dreier Punkte im Raum festgelegt werden, deren Idealpositionen bekannt sind. Abgetastet wird mit einem Berührungs- oder optischen Sensor, der spezielle, auf der Trägerplatte präzise fixierte Löcher oder Messkugeln berührt. </p>
      <a name="block_1">
      </a>
      <h3 class="Blocktitle">Syntax</h3>MEAFRAME(&lt;Ideal-Punkte>,&lt;Messpunkte>,&lt;Qualität>)<a name="block_2"></a><h3 class="Blocktitle">Bedeutung</h3><a id="table_5e274608-ca26-4e91-b4a7-1d171e997887"></a> <a id="table_0"></a> <a id="table_5e274608-ca26-4e91-b4a7-1d171e997887"></a> <a id="table_0"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_default" border="1"><colgroup><col width="26.6%"><col width="11.3%"><col width="11.3%"><col width="50.8%"></colgroup><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>MEAFRAME</code>:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Funktionsaufruf</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;Ideal-Punkte></code>:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">2-dim. REAL-Feld, das die drei Koordinaten der Ideal-Punkte enthält</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;Messpunkte></code>:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">2-dim. REAL-Feld, das die drei Koordinaten der gemessenen Punkte enthält</p></td></tr><tr valign="top"><td rowspan="6"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;Qualität></code>:</p><p type="p_table_l" align="left"></p><p type="p_table_l" align="left"></p><p type="p_table_l" align="left"></p><p type="p_table_l" align="left"></p><p type="p_table_l" align="left"></p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Variable, mit der Informationen zur Qualität der FRAME-Berechnung zurückgegeben werden</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Typ:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">VAR REAL</p></td></tr><tr valign="top"><td rowspan="4"><p type="p_table_l" style="margin-top: 4px" align="left">Wert:</p><p type="p_table_l" align="left"></p><p type="p_table_l" align="left"></p><p type="p_table_l" align="left"></p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">-1</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Die idealen Punkte liegen nahezu auf einer Geraden: Der Frame konnte nicht berechnet werden. Die zurückgegebene FRAME-Variable enthält einen neutralen Frame.</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">-2</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Die Messpunkte liegen nahezu auf einer Geraden: Der Frame konnte nicht berechnet werden. Die zurückgegebene FRAME-Variable enthält einen neutralen Frame.</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">-4</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Die Berechnung der Rotationsmatrix schlägt aus einem anderen Grund fehl.</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">≥ 0.0</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Summe der Verzerrungen (Abstände zwischen den Punkten), die zur Überführung des gemessenen Dreiecks in ein zum idealen Dreieck kongruentes benötigt wird.</p></td></tr></table></p><p class="comment"></p><table cellpadding="0" cellspacing="0" border="0"><tr><td><font size="1px"></font></td></tr></table><table class="safety" border="1" bgcolor="#eeeeee" style="margin-bottom:10px"><colgroup><col width="5%"><col width="95%"></colgroup><tr><td><b>Hinweis</b></td></tr><tr><td><h4 class="Blocklabel">Qualität der Messung</h4><p class="safety">Damit die gemessenen den idealen Koordinaten mit einer kombinierten Rotation/Translation zugeordnet werden können, muss das von den Messpunkten aufgespannte Dreieck kongruent zum idealen Dreieck sein. Dies wird bewerkstelligt von einem Kompensationsalgorithmus, der die Summe der Quadrate der Abweichungen minimiert, die das gemessene in das ideale Dreieck überführen.</p><p class="safety">Die effektiv benötigte Verzerrung der Messpunkte kann als Indikator für die Qualität der Messung dienen und wird deshalb als zusätzliche Variable von MEAFRAME ausgegeben.</p></td></tr></table><table cellpadding="0" cellspacing="0" border="0"><tr><td><font size="1px"></font></td></tr></table><table class="safety" border="1" bgcolor="#eeeeee"><colgroup><col width="5%"><col width="95%"></colgroup><tr><td><b>Hinweis</b></td></tr><tr><td><p class="safety">Das von MEAFRAME erzeugte Frame kann durch die Funktion ADDFRAME in ein anderes Frame in der Frame-Kette transformiert werden (siehe Beispiel "Verkettung mit ADDFRAME").</p></td></tr></table><a name="block_3"></a><h3 class="Blocktitle">Beispiele</h3><h4 class="Blocklabel">Beispiel 1:</h4><p>Teileprogramm 1:</p><a id="table_56c24ced-a7a5-4a76-9062-ecc86184a489"></a> <a id="table_1"></a> <a id="table_56c24ced-a7a5-4a76-9062-ecc86184a489"></a> <a id="table_1"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_listing" border="1" id="EZE"><colgroup><col width="58.0%"><col width="42.0%"></colgroup><tr valign="top"><th>Programmcode</th><th> </th></tr><tr valign="top"><td>...</td><td> </td></tr><tr valign="top"><td>DEF FRAME CORR_FRAME</td><td> </td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><p></p><p>Setzen von Messpunkten:</p><a id="table_838fb602-8fa3-4439-9fdc-1bd4b6a55b62"></a> <a id="table_2"></a> <a id="table_838fb602-8fa3-4439-9fdc-1bd4b6a55b62"></a> <a id="table_2"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_listing" border="1" id="ETF"><colgroup><col width="58.0%"><col width="42.0%"></colgroup><tr valign="top"><th>Programmcode</th><th>Kommentar</th></tr><tr valign="top"><td colspan="2">DEF REAL IDEAL_POINT[3,3]=
SET(10.0,0.0,0.0,0.0,10.0,0.0,0.0,0.0,10.0)</td></tr><tr valign="top"><td>DEF REAL MEAS_POINT[3,3]=
SET(10.1,0.2,-0.2,-0.2,10.2,0.1,-0.2,0.2,9.8)</td><td>; Für Test.</td></tr><tr valign="top"><td colspan="2"> </td></tr><tr valign="top"><td colspan="2">DEF REAL FIT_QUALITY=0</td></tr><tr valign="top"><td>DEF REAL ROT_FRAME_LIMIT=5</td><td>; Erlaubt max. 5 Grad-Verdrehung der Teileposition.</td></tr><tr valign="top"><td>DEF REAL FIT_QUALITY_LIMIT=3</td><td>; Erlaubt max. 3 mm-Verschiebung zwischen 
dem idealen und dem gemessenen Dreieck.</td></tr><tr valign="top"><td>DEF REAL SHOW_MCS_POS1[3]</td><td> </td></tr><tr valign="top"><td>DEF REAL SHOW_MCS_POS2[3]</td><td> </td></tr><tr valign="top"><td>DEF REAL SHOW_MCS_POS3[3]</td><td> </td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><p></p><a id="table_f1156932-5964-4528-bd51-58cef85ca0c6"></a> <a id="table_3"></a> <a id="table_f1156932-5964-4528-bd51-58cef85ca0c6"></a> <a id="table_3"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_listing" border="1" id="EVH"><colgroup><col width="58.0%"><col width="42.0%"></colgroup><tr valign="top"><th>Programmcode</th><th>Kommentar</th></tr><tr valign="top"><td>N100 G01 G90 F5000</td><td> </td></tr><tr valign="top"><td>N110 X0 Y0 Z0</td><td> </td></tr><tr valign="top"><td colspan="2">N200 CORR_FRAME=MEAFRAME(IDEAL_POINT,MEAS_POINT,FIT_QUALITY)</td></tr><tr valign="top"><td>N230 IF FIT_QUALITY &lt; 0SETAL(65000)GOTOF NO_FRAMEENDIF</td><td> </td></tr><tr valign="top"><td>N240 IF FIT_QUALITY > FIT_QUALITY_LIMITSETAL(65010)GOTOF NO_FRAMEENDIF</td><td> </td></tr><tr valign="top"><td>N250 IF CORR_FRAME[X,RT] > ROT_FRAME_LIMIT</td><td>; Begrenzung des 1. RPY- Winkels​.</td></tr><tr valign="top"><td>SETAL(65020)GOTOF NO_FRAMEENDIF</td><td> </td></tr><tr valign="top"><td>N260 IF CORR_FRAME[Y,RT] > ROT_FRAME_LIMIT</td><td>; Begrenzung des 2. RPY-Winkels.</td></tr><tr valign="top"><td>SETAL(65021)GOTOF NO_FRAMEENDIF</td><td> </td></tr><tr valign="top"><td>N270 IF CORR_FRAME[Z,RT] > ROT_FRAME_LIMIT</td><td>; Begrenzung des 3. RPY- Winkels.</td></tr><tr valign="top"><td>SETAL(65022)GOTOF NO_FRAMEENDIF</td><td> </td></tr><tr valign="top"><td>N300 $P_IFRAME=CORR_FRAME</td><td>; Abtast-Frame mit einem setzbaren Frame aktivieren.</td></tr><tr valign="top"><td> </td><td>; Frame prüfen durch Positionieren der Geometrieachsen auf die idealen Punkte.</td></tr><tr valign="top"><td>N400 X=IDEAL_POINT[0,0] Y=IDEAL_POINT[0,1] 
Z=IDEAL_POINT[0,2]</td><td> </td></tr><tr valign="top"><td>N410 SHOW_MCS_POS1[0]=$AA_IM[X]</td><td> </td></tr><tr valign="top"><td>N420 SHOW_MCS_POS1[1]=$AA_IM[Y]</td><td> </td></tr><tr valign="top"><td>N430 SHOW_MCS_POS1[2]=$AA_IM[Z]</td><td> </td></tr><tr valign="top"><td colspan="2">N500 X=IDEAL_POINT[1,0] Y=IDEAL_POINT[1,1] Z=IDEAL_POINT[1,2]</td></tr><tr valign="top"><td>N510 SHOW_MCS_POS2[0]=$AA_IM[X]</td><td> </td></tr><tr valign="top"><td>N520 SHOW_MCS_POS2[1]=$AA_IM[Y]</td><td> </td></tr><tr valign="top"><td>N530 SHOW_MCS_POS2[2]=$AA_IM[Z]</td><td> </td></tr><tr valign="top"><td colspan="2">N600 X=IDEAL_POINT[2,0] Y=IDEAL_POINT[2,1] Z=IDEAL_POINT[2,2]</td></tr><tr valign="top"><td>N610 SHOW_MCS_POS3[0]=$AA_IM[X]</td><td> </td></tr><tr valign="top"><td>N620 SHOW_MCS_POS3[1]=$AA_IM[Y]</td><td> </td></tr><tr valign="top"><td>N630 SHOW_MCS_POS3[2]=$AA_IM[Z]</td><td> </td></tr><tr valign="top"><td>N700 G500</td><td>; Setzbaren Frame deaktivieren, da mit Nullframe (kein Wert eingetragen vorbesetzt). </td></tr><tr valign="top"><td>No_FRAME</td><td>; Setzbaren Frame deaktivieren, da mit Nullframe (kein Wert eingetragen) vorbesetzt.</td></tr><tr valign="top"><td>M0</td><td> </td></tr><tr valign="top"><td>M30</td><td> </td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><p></p><h4 class="Blocklabel">Beispiel 2: Verkettung von Frames</h4><p><b>Verkettung von MEAFRAME für Korrekturen</b></p><p>Die Funktion MEAFRAME liefert ein Korrektur-Frame. Wird dieser Korrektur-Frame mit dem einstellbaren Frame $P_UIFR[1] verkettet, der bei Aufruf der Funktion aktiv war (z. B. G54), so erhält man einen einstellbaren Frame für weitere Umrechnungen zum Verfahren oder Bearbeiten.</p><p><b>Verkettung mit ADDFRAME</b></p><p>Soll dieser Korrektur-Frame in der Frame-Kette an einer anderen Stelle wirken oder sind vor dem einstellbaren Frame noch andere Frames aktiv, dann kann die Funktion ADDFRAME zum Einketten in einem der Kanal-Basisframes oder einem Systemframe genutzt werden.</p><p>In den Frames darf hierbei nicht aktiv sein:</p><ul><li><p>Spiegelung mit MIRROR</p></li><li><p>Skalierung mit SCALE</p></li></ul><p>Die Eingangsparameter für Soll- und Istwerte sind die Werkstückkoordinaten. Im Grundsystem der Steuerung sind diese Koordinaten stets metrisch oder in Inch (G71/G70) und als radiusbezogenes (DIAMOF) Maß anzugeben.</p><p><b>Weitere Informationen</b> zu ADDFRAME siehe Funktionshandbuch Basisfunktionen.</p></div>
  </body>
</html>