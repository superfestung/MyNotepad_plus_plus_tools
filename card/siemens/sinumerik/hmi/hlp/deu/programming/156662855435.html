<html>
  <head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Überprüfung auf Schutzbereichsverletzung, Arbeitsfeldbegrenzung und Software-Endschalter (CALCPOSI)</title>
  </head>
  <body id="bodyID">
    <div id="nsbanner">
      <div id="TitleRowDefault">
        <h1 class="title">Überprüfung auf Schutzbereichsverletzung, Arbeitsfeldbegrenzung und Software-Endschalter (CALCPOSI)</h1>
      </div>
    </div>
    <div id="nstext" valign="bottom">
      <p>
      </p>
      <ul>
      </ul>
      <a name="block_1">
      </a>
      <h3 class="BlocktitleFirst">Funktion</h3>
      <p>Die Funktion CALCPOSI überprüft im Werkstückkoordinatensystem (WKS), ob ausgehend von der Startposition die <b>Geometrieachsen</b> einen vorgegebenen Weg verfahren können, ohne aktive Begrenzungen zu verletzen. Für den Fall, dass der Verfahrweg aufgrund von Begrenzungen nicht vollständig abgefahren werden kann, werden ein positiver, dezimal codierter Statuswert und der maximal mögliche Verfahrweg zurückgegeben.</p>
      <a name="block_2">
      </a>
      <h3 class="Blocktitle">Definition</h3>INT CALCPOSI(VAR REAL[3] &lt;Start>, VAR REAL[3] &lt;Dist>, VAR REAL[5] &lt;Limit>, VAR REAL[3] &lt;MaxDist>, BOOL &lt;MeasSys>, INT &lt;TestLim>)<a name="block_3"></a><h3 class="Blocktitle">Syntax</h3>&lt;Status> = CALCPOSI(VAR &lt;Start>, VAR &lt;Dist>, VAR &lt;Limit>, VAR &lt;MaxDist>, &lt;MeasSys>, &lt;TestLim>)<a name="block_4"></a><h3 class="Blocktitle">Bedeutung</h3><a id="table_dc7626fe-3412-4464-9c5d-7e46e8fb435e"></a> <a id="table_0"></a> <a id="table_dc7626fe-3412-4464-9c5d-7e46e8fb435e"></a> <a id="table_0"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_default" border="1"><colgroup><col width="20.0%"><col width="10.1%"><col width="14.0%"><col width="55.9%"></colgroup><tr valign="top"><td rowspan="3"><p type="p_table_l" style="margin-top: 4px" align="left"><code>CALCPOSI(...)</code>:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Vordefinierte Funktion für den Test auf Begrenzungsverletzungen bezüglich der Geometrieachsen</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Vorlaufstopp:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">nein</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Alleine im Satz:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">ja</p></td></tr><tr valign="top"><td rowspan="13"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;Status></code>:</p><p type="p_table_c" align="center">(Teil 1)</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Rückgabewert der Funktion. Negative Werte zeigen Fehlerzustände an.</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Datentyp:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">INT</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Wertebereich:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">-8 ≤ x ≤ 100000</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center"><b>Wert</b></p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left"><b>Bedeutung</b></p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">0</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Der Verfahrweg kann vollständig abgefahren werden</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">-1</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">In &lt;Limit> ist mindestens eine Komponente negativ.</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">-2</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Fehler bei einer Transformationsberechnung.</p><p type="p_table_l" align="left">Beispiel: Der Verfahrweg führt durch eine Singularität, sodass die Achspositionen nicht definiert sind.</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">-3</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Der angegebene Verfahrweg &lt;Dist> und der maximal mögliche Verfahrweg &lt;MaxDist> sind linear abhängig. </p><p type="p_table_l" align="left"><b>Hinweis </b><br />Kann nur im Zusammenhang mit &lt;TestLim>, Bit 4 == 1 auftreten.</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">-4</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Die Projektion der in &lt;Dist> enthaltenen Verfahrrichtung auf die Begrenzungsfläche ist der Nullvektor bzw. die Verfahrrichtung steht senkrecht auf der verletzten Begrenzungsfläche. </p><p type="p_table_l" align="left"><b>Hinweis <br /></b>Kann nur im Zusammenhang mit &lt;TestLim>, Bit 5 == 1 auftreten.</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">-5</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">In &lt;TestLim> sind Bit 4 == 1 UND Bit 5 == 1</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">-6</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Mindestens eine Maschinenachse, die für die Überprüfung der Verfahrgrenzen betrachtet werden muss, ist nicht referenziert.</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">-7</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Funktion Kollisionsvermeidung: Ungültige Definition der kinematischen Kette oder der Schutzbereiche.</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">-8</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Funktion Kollisionsvermeidung: Die Funktion kann wegen Speichermangel nicht ausgeführt werden.</p></td></tr><tr valign="top"><td rowspan="10"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;Status></code>:</p><p type="p_table_c" align="center">(Teil 2)</p></td><td colspan="3"><p type="p_table_c" style="margin-top: 4px" align="center">Einerstelle</p><p type="p_table_l" align="left"><b>Hinweis</b><br />Sind gleichzeitig mehrere Grenzen verletzt, wird diejenige gemeldet, die zur stärksten Einschränkung des vorgegebenen Verfahrwegs führt.</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center"><b>Wert</b></p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left"><b>Bedeutung</b></p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">1</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Software-Endschalter begrenzen den Verfahrweg</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">2</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Arbeitsfeldbegrenzung begrenzt den Verfahrweg</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">3</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Schutzbereiche begrenzen den Verfahrweg</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">4</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Funktion Kollisionsvermeidung: Schutzbereiche begrenzen den Verfahrweg</p></td></tr><tr valign="top"><td colspan="3"><p type="p_table_c" style="margin-top: 4px" align="center">Zehnerstelle</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center"><b>Wert</b></p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left"><b>Bedeutung</b></p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">1x</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Der Anfangswert verletzt die Grenze</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">2x</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Die vorgegebene Gerade verletzt die Grenze. </p><p type="p_table_l" align="left">Dieser Wert wird auch dann zurückgegeben, wenn der Endpunkt selbst keine Grenze verletzt, auf dem Weg vom Start- zum Endpunkt aber eine Verletzung eines Grenzwerts auftreten würde (z. B. Durchfahren eines Schutzbereichs, gekrümmte Software-Endschalter im WKS bei nichtlinearen Transformationen, z. B. Transmit).</p></td></tr><tr valign="top"><td rowspan="6"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;Status></code>:</p><p type="p_table_c" align="center">(Teil 3)</p></td><td colspan="3"><p type="p_table_c" style="margin-top: 4px" align="center">Hunderterstelle</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center"><b>Wert</b></p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left"><b>Bedeutung</b></p></td></tr><tr valign="top"><td rowspan="2"><p type="p_table_c" style="margin-top: 4px" align="center">1xx</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">UND Einerstelle == 1 oder 2: <br />Der positive Grenzwert ist verletzt.</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">UND Einerstelle == 3 <sup>1)</sup>:<br />Es ist ein NC-spez. Schutzbereich verletzt.</p></td></tr><tr valign="top"><td rowspan="2"><p type="p_table_c" style="margin-top: 4px" align="center">2xx</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">UND Einerstelle == 1 oder 2: <br />Der negative Grenzwert ist verletzt.</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">UND Einerstelle == 3 <sup>1)</sup>: <br />Es ist ein kanalspezifischer Schutzbereich verletzt.</p></td></tr><tr valign="top"><td rowspan="3"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;Status></code>:</p><p type="p_table_c" align="center">(Teil 4)</p></td><td colspan="3"><p type="p_table_c" style="margin-top: 4px" align="center">Tausenderstelle </p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center"><b>Wert</b></p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left"><b>Bedeutung</b></p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">1xxx</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">UND Einerstelle == 1 oder 2: <br />Faktor, mit dem die Achsnummer multipliziert wird, die die Grenze verletzt. Die Zählung der Achsen beginnt bei 1.</p><p type="p_table_l" align="left">Bezug:</p><ul class="table"><li><p>Software-Endschalter: Maschinenachsen</p></li><li><p>Arbeitsfeldbegrenzung: Geometrieachsen</p></li></ul><p type="p_table_l" align="left">UND Einerstelle == 3 <sup>1)</sup>: <br />Faktor, mit dem die Nummer des verletzten Schutzbereichs multipliziert wird.<b> </b></p></td></tr><tr valign="top"><td rowspan="4"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;Status></code>:</p><p type="p_table_c" align="center">(Teil 5)</p></td><td colspan="3"><p type="p_table_c" style="margin-top: 4px" align="center">Einhunderttausenderstelle</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center"><b>Wert</b></p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left"><b>Bedeutung</b></p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">0xxxxx</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Einhunderttausenderstelle == 0: &lt;Dist> bleibt unverändert</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">1xxxxx</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">In &lt;Dist> wird ein Richtungsvektor zurückgegeben, der die weitere Bewegungsrichtung auf der Begrenzungsfläche definiert. </p><p type="p_table_l" align="left">Kann nur bei folgenden Randbedingungen auftreten:</p><ul class="table"><li><p>Software-Endschalter oder Arbeitsfeldbegrenzung verletzt (nicht im Startpunkt)</p></li><li><p>Eine Transformation ist <b>nicht </b>aktiv</p></li><li><p>&lt;TestID>, Bit 4 oder Bit 5 == 1</p></li></ul></td></tr><tr valign="top"><td rowspan="4"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;Start></code>:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Referenz auf einen Vektor mit den Startpositionen:</p><ul class="table"><li><p>&lt;Start> [0]: 1. Geometrieachse</p></li><li><p>&lt;Start> [1]: 2. Geometrieachse</p></li><li><p>&lt;Start> [2]: 3. Geometrieachse</p></li></ul></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Parametertyp:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Eingang</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Datentyp:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">VAR REAL[3]</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Wertebereich:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">-max. REAL-Wert ≤ x[&lt;n>] ≤ +max. REAL-Wert</p></td></tr><tr valign="top"><td rowspan="9"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;Dist></code>:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Referenz auf einen Vektor.</p></td></tr><tr valign="top"><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left"><b>Eingang</b>: inkrementeller Verfahrweg</p><ul class="table"><li><p>&lt;Dist> [0]: 1. Geometrieachse</p></li><li><p>&lt;Dist> [1]: 2. Geometrieachse</p></li><li><p>&lt;Dist> [2]: 3. Geometrieachse</p></li></ul></td></tr><tr valign="top"><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left"><b>Ausgang </b>(nur bei gesetzter Einhunderttausenderstelle im &lt;Status>):</p></td></tr><tr valign="top"><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">&lt;Dist> enthält als Ausgangswert einen Einheitsvektor <b>v</b>, der die weitere Verfahrrichtung im WKS definiert.</p></td></tr><tr valign="top"><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left"><b>Fall 1</b>: Bildung des Vektors <b>v</b> bei &lt;TestID>, Bit 4 == 1</p><p type="p_table_l" align="left">Die Eingangsvektoren &lt;Dist> und &lt;MaxDist> spannen die Bewegungsebene auf. Diese Ebene wird mit der verletzten Begrenzungsfläche geschnitten. Die Schnittgerade der beiden Ebenen definiert die Richtung des Vektors <b>v</b>. Dabei wird die Orientierung (Vorzeichen) so gewählt, dass der Winkel zwischen dem Eingangsvektor &lt;MaxDist> und <b>v </b>nicht größer als 90 Grad ist.</p></td></tr><tr valign="top"><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left"><b>Fall 2</b>: Bildung des Vektors <b>v</b> bei &lt;TestID>, Bit 5 == 1</p><p type="p_table_l" align="left">Der Vektor <b>v</b> ist der Einheitsvektor in Richtung der Projektion des in &lt;Dist> enthaltenen Verfahrvektors auf die Begrenzungsfläche. Ist die Projektion des Verfahrvektors auf die Begrenzungsfläche der Nullvektor, wird ein Fehler zurückgeben.</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Parametertyp:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Ein/Ausgang</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Datentyp:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">VAR REAL[3]</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Wertebereich:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">-max. REAL-Wert ≤ x[&lt;n>] ≤ +max. REAL-Wert</p></td></tr><tr valign="top"><td rowspan="4"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;Limit></code>:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Referenz auf ein Feld der Länge 5.</p><ul class="table"><li><p>&lt;Limit> [0 - 2]: Mindestabstände der Geometrieachsen zu den Begrenzungen:</p><ul><li><p>&lt;Limit> [0]: 1. Geometrieachse</p></li><li><p>&lt;Limit> [1]: 2. Geometrieachse</p></li><li><p>&lt;Limit> [2]: 3. Geometrieachse</p></li></ul><p>Die Mindestabstände werden eingehalten bei:</p><ul><li><p>Arbeitsfeldbegrenzung: Keine Einschränkungen</p></li><li><p>Software-Endschalter: Wenn keine Transformation aktiv ist, oder eine Transformation aktiv ist, bei der eine eindeutige Zuordnung der Geometrieachsen zu linearen Maschinenachsen möglich ist, z. B. 5-Achs-Transformationen.</p></li></ul></li><li><p>&lt;Limit> [3]: Enthält den Mindestabstand für lineare Maschinenachsen, die z. B. auf Grund einer nichtlinearen Transformation keiner Geometrieachse zugeordnet werden können. Dieser Wert wird außerdem als Grenzwert bei der Überwachung der konventionellen Schutzbereiche und der Schutzbereiche der Kollisionsvermeidung verwendet.</p></li><li><p>&lt;Limit> [4]: Enthält den Mindestabstand für rotatorische Maschinenachsen, die z. B. auf Grund einer nichtlinearen Transformation keiner Geometrieachse zugeordnet werden können.<br /><b>Hinweis</b><br />Dieser Wert wird nur bei der Überwachung der Software-Endschalter von speziellen Transformationen wirksam.</p></li></ul></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Parametertyp:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Eingang</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Datentyp:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">VAR REAL[5]</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Wertebereich:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">-max. REAL-Wert ≤ x[n] ≤ +max. REAL-Wert</p></td></tr><tr valign="top"><td rowspan="5"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;MaxDist></code>:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Referenz auf einen Vektor mit dem inkrementellen Verfahrweg, bei dem der vorgegebene Mindestabstand von einer Achsgrenze von allen beteiligten Maschinenachsen nicht unterschritten wird:</p><ul class="table"><li><p>&lt;Dist> [0]: 1. Geometrieachse</p></li><li><p>&lt;Dist> [1]: 2. Geometrieachse</p></li><li><p>&lt;Dist> [2]: 3. Geometrieachse</p></li></ul><p type="p_table_l" align="left">Ist der Verfahrweg nicht eingeschränkt, ist der Inhalt dieses Rückgabeparameters gleich dem Inhalt von &lt;Dist>.</p></td></tr><tr valign="top"><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Bei &lt;TestID>, Bit 4 == 1: &lt;Dist> und &lt;MaxDist></p><p type="p_table_l" align="left">&lt;MaxDist> und &lt;Dist> müssen als Eingangswerte Vektoren enthalten, die eine Bewegungsebene aufspannt. Die beiden Vektoren müssen voneinander linear unabhängig sein. Der Betrag von &lt;MaxDist> ist beliebig. Zur Berechnung der Bewegungsrichtung siehe die Beschreibung zu &lt;Dist>.</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Parametertyp:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">Ausgang</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Datentyp:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">VAR REAL[3]</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Wertebereich:</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">-max. REAL-Wert ≤ x[&lt;n>] ≤ +max. REAL-Wert</p></td></tr><tr valign="top"><td rowspan="5"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;MeasSys></code>:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Maßsystem (inch/metrisch) für Positions- und Längenangaben (<b>optional</b>)</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Datentyp:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">BOOL</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center"><b>Wert</b></p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left"><b>Bedeutung</b></p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">FALSE </p><p type="p_table_c" align="center">(Default) </p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Maßsystem entsprechend des aktuell aktiven G-Befehls aus G-Gruppe 13 (G70, G71, G700, G710).</p><p type="p_table_l" align="left"><b>Hinweis</b><br />Bei aktivem G70 und Grundsystem metrisch oder aktivem G71 und Grundsystem inch werden die Systemvariablen $AA_IW und $AA_MW im Grundsystem geliefert und müssen bei Verwendung für CALCPOSI gegebenenfalls umgerechnet werden.</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">TRUE </p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Maßsystem gemäß eingestelltem Grundsystem:</p><p type="p_table_l" align="left">MD52806 $MN_ISO_SCALING_SYSTEM</p></td></tr><tr valign="top"><td rowspan="13"><p type="p_table_l" style="margin-top: 4px" align="left"><code>&lt;TestLim></code>:</p></td><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left">Bitcodierte Auswahl der zu überwachenden Begrenzungen (<b>optional</b>)</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Datentyp:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">INT</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">Default:</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Bit 0, 1, 2, 3, 6, 7 = 1 (207)</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center"><b>Wert</b></p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left"><b>Bedeutung</b></p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">1</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Software-Endschalter</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">2</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Arbeitsfeldbegrenzung</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">4</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Aktivierte konventionelle Schutzbereiche</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">8</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Voraktivierte konventionelle Schutzbereiche</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">16</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Bei verletzten Software-Endschaltern bzw. Arbeitsfeldbegrenzungen in &lt;Dist> die Verfahrrichtung entsprechend <b>Fall 1</b> (siehe oben) zurückliefern.</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">32</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Bei verletzten Software-Endschaltern bzw. Arbeitsfeldbegrenzungen in &lt;Dist> die Verfahrrichtung entsprechend <b>Fall 2</b>  (siehe oben) zurückliefern.</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">64</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Aktivierte Schutzbereiche der Kollisionsvermeidung</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">128</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Voraktivierte Schutzbereiche der Kollisionsvermeidung</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center">256</p></td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left">Paare von aktivierten und voraktivierten Schutzbereichen der Kollisionsvermeidung</p></td></tr><tr valign="top"><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left"><sup>1)</sup> Sind mehrere Schutzbereiche verletzt, wird der Schutzbereich zurückgegeben, der zur stärksten Einschränkung des vorgegebenen Verfahrwegs führt.</p></td></tr></table></p><a name="block_5"></a><h3 class="Blocktitle">Beispiel</h3><h4 class="Blocklabel">Begrenzungen</h4><a id="image_792211851_0"></a> <img border="0" src="images/175111413259.png" width="500" height="328"/><p>Im Beispiel sind die wirksamen Software-Endschalter und Arbeitsfeldbegrenzungen in der X-Y-Ebene und folgende drei Schutzbereiche dargestellt:</p><ul><li><p>C2: Werkzeugbezogener kanalspezifischer Schutzbereich, aktiv, kreisförmig, Radius = 2 mm</p></li><li><p>C4: Werkstückbezogener, kanalspezifischer Schutzbereich, voraktiviert, quadratisch, Seitenlänge = 10 mm</p></li><li><p>N3: Maschinenspezifischer Schutzbereich, aktiv, rechteckig, Seitenlänge = 10 mm x 15 mm</p></li></ul><h4 class="Blocklabel">NC-Programm</h4><p>Im NC-Programm werden zunächst die Schutzbereiche und Arbeitsfeldbegrenzungen definiert. Anschließend wird die Funktion <code>CALCPOSI()</code> mit verschiedenen Parametrierungen aufgerufen.</p><a id="table_9b1c0865-9b37-4767-8b7f-51e3b43e9a4d"></a> <a id="table_1"></a> <a id="table_9b1c0865-9b37-4767-8b7f-51e3b43e9a4d"></a> <a id="table_1"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_sourcecode" border="1" id="EKGAE"><colgroup><col width="100.0%"></colgroup><tr valign="top"><th><p type="p_table_lb" align="left" class="comment">Programmcode</p></th></tr><tr valign="top"><td>N10 DEF REAL _START[3]N20 DEF REAL _DIST[3]N30 DEF REAL _LIMIT[5]N40 DEF REAL _MAXDIST[3]N50 DEF INT _PAN60 DEF INT _STATUS</td></tr><tr valign="top"><td>; Werkzeugbezogener Schutzbereich C2N70 CPROTDEF(2, TRUE, 0)N80 G17 G1 X-2 Y0N90 G3 I2 X2N100 I-2 X-2N110 EXECUTE(_PA)</td></tr><tr valign="top"><td>; Werkstückbezogener Schutzbereich C4N120 CPROTDEF(4, FALSE, 0)N130 G17 G1 X0 Y15N140 X10N150 Y25N160 X0N170 Y15N180 EXECUTE(_PA)</td></tr><tr valign="top"><td>; Maschinenspezifischer Schutzbereich N3N190 NPROTDEF(3, FALSE, 0)N200 G17 G1 X10 Y5N210 X25N220 Y15N230 X10N240 Y5N250 EXECUTE(_PA)</td></tr><tr valign="top"><td>; Schutzbereiche aktivieren bzw. voraktivierenN260 CPROT(2, 2, 0, 0, 0)N270 CPROT(4, 1, 0, 0, 0)N280 NPROT(3, 2, 0, 0, 0)</td></tr><tr valign="top"><td>; Arbeitsfeldbegrenzungen definierenN290 G25 XX=-10 YY=-10N300 G26 XX=20 YY=21</td></tr><tr valign="top"><td>N310 _START[0] = 0.N320 _START[1] = 0.N330 _START[2] = 0.</td></tr><tr valign="top"><td>N340 _DIST[0] = 35.N350 _DIST[1] = 20.N360 _DIST[2] =  0.</td></tr><tr valign="top"><td>N370 _LIMIT[0] = 0.N380 _LIMIT[1] = 0.N390 _LIMIT[2] = 0.N400 _LIMIT[3] = 0.N410 _LIMIT[4] = 0.</td></tr><tr valign="top"><td>N420 _STATUS = CALCPOSI(_START, _DIST, _LIMIT, _MAXDIST)N430 _STATUS = CALCPOSI(_START, _DIST, _LIMIT, _MAXDIST,,3)N440 _STATUS = CALCPOSI(_START, _DIST, _LIMIT, _MAXDIST,,1)</td></tr><tr valign="top"><td>N450 _START[0] =  5.N460 _START[1] = 17.N470 _START[2] =  0.</td></tr><tr valign="top"><td>N480 _DIST[0] =  0.N490 _DIST[1] =-27.N500 _DIST[2] =  0.</td></tr><tr valign="top"><td>N510 _STATUS = CALCPOSI(_START, _DIST, _LIMIT, _MAXDIST,,14)N520 _STATUS = CALCPOSI(_START, _DIST, _LIMIT, _MAXDIST,, 6)</td></tr><tr valign="top"><td>N530 _LIMIT[1] = 2.</td></tr><tr valign="top"><td>N540 _STATUS = CALCPOSI(_START, _DIST, _LIMIT, _MAXDIST,, 6)</td></tr><tr valign="top"><td>N550 _START[0] = 27.N560 _START[1] = 17.1N570 _START[2] =  0.</td></tr><tr valign="top"><td>N580 _DIST[0] =-27.N590 _DIST[1] =  0.N600 _DIST[2] =  0.</td></tr><tr valign="top"><td>N610 _LIMIT[3] = 2.</td></tr><tr valign="top"><td>N620 _STATUS = CALCPOSI(_START, _DIST, _LIMIT, _MAXDIST,,12)</td></tr><tr valign="top"><td>N630 _START[0] = 0.N640 _START[1] = 0.N650 _START[2] = 0.</td></tr><tr valign="top"><td>N660 _DIST[0] =  0.N670 _DIST[1] = 30.N680 _DIST[2] =  0.</td></tr><tr valign="top"><td>N690 TRANS X10N700 AROT Z45</td></tr><tr valign="top"><td>N710 _STATUS = CALCPOSI(_START,_DIST, _LIMIT, _MAXDIST)</td></tr><tr valign="top"><td>; Frames aus N690 und N700 wieder löschenN720 TRANS</td></tr><tr valign="top"><td>N730 _START[0] =  0.N740 _START[1] = 10.N750 _START[2] =  0.</td></tr><tr valign="top"><td>; Vektoren _DIST und _MAXDIST definieren die BewegungsebeneN760 _DIST[0] = 30.N770 _DIST[1] = 30.N780 _DIST[2] =  0.</td></tr><tr valign="top"><td>N790 _MAXDIST[0] = 1.N800 _MAXDIST[1] = 0.N810 _MAXDIST[2] = 1.</td></tr><tr valign="top"><td>N820 _STATUS = CALCPOSI(_START, _DIST, _LIMIT, _MAXDIST,,17)</td></tr><tr valign="top"><td>N830 M30</td></tr></table><textarea id="textarea" style="display: none;" value="">clipboard</textarea></p><h4 class="Blocklabel">Ergebnisse von CALCPOSI()</h4><a id="table_80179661-8e2c-4f85-93b3-fe6441e7c26b"></a> <a id="table_2"></a> <a id="table_80179661-8e2c-4f85-93b3-fe6441e7c26b"></a> <a id="table_2"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_default" border="1"><colgroup><col width="5.6%"><col width="11.2%"><col width="20.0%"><col width="20.0%"><col width="43.2%"></colgroup><tr valign="top"><th><p type="p_table_cb" align="center" class="comment">N...</p></th><th><p type="p_table_cb" align="center" class="comment">&lt;Status></p></th><th><p type="p_table_cb" align="center" class="comment">&lt;MaxDist>[0] ≙ X</p></th><th><p type="p_table_cb" align="center" class="comment">&lt;MaxDist>[1] ≙ Y</p></th><th><p type="p_table_lb" align="left" class="comment">Bemerkungen</p></th></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center" class="comment">420</p></td><td><p type="p_table_c" style="margin-top: 4px" align="center" class="comment">3123</p></td><td><p type="p_table_c" style="margin-top: 4px" align="center" class="comment">8.040</p></td><td><p type="p_table_c" style="margin-top: 4px" align="center" class="comment">4.594</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment">N3 wird verletzt.</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center" class="comment">430</p></td><td><p type="p_table_c" style="margin-top: 4px" align="center" class="comment">1122</p></td><td><p type="p_table_c" style="margin-top: 4px" align="center" class="comment">20.000</p></td><td><p type="p_table_c" style="margin-top: 4px" align="center" class="comment">11.429</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment">Keine Überwachung der Schutzbereiche,<br />Arbeitsfeldbegrenzung wird verletzt.</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center" class="comment">440</p></td><td><p type="p_table_c" style="margin-top: 4px" align="center" class="comment">1121</p></td><td><p type="p_table_c" style="margin-top: 4px" align="center" class="comment">30.000</p></td><td><p type="p_table_c" style="margin-top: 4px" align="center" class="comment">17.143</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment">Nur noch Überwachung der Software-Endschalter aktiv.</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center" class="comment">510</p></td><td><p type="p_table_c" style="margin-top: 4px" align="center" class="comment">4213</p></td><td><p type="p_table_c" style="margin-top: 4px" align="center" class="comment">0.000</p></td><td><p type="p_table_c" style="margin-top: 4px" align="center" class="comment">0.000</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment">Startpunkt verletzt C4</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center" class="comment">520</p></td><td><p type="p_table_c" style="margin-top: 4px" align="center" class="comment">0000</p></td><td><p type="p_table_c" style="margin-top: 4px" align="center" class="comment">0.000</p></td><td><p type="p_table_c" style="margin-top: 4px" align="center" class="comment">-27.000</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment">Voraktivierter C4 wird nicht überwacht. Der vorgegebene Weg kann vollständig verfahren werden.</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center" class="comment">540</p></td><td><p type="p_table_c" style="margin-top: 4px" align="center" class="comment">2222</p></td><td><p type="p_table_c" style="margin-top: 4px" align="center" class="comment">0.000</p></td><td><p type="p_table_c" style="margin-top: 4px" align="center" class="comment">-25.000</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment">Wegen _LIMIT[1] = 2 wird der Verfahrweg durch die Arbeitsfeldbegrenzung eingeschränkt.</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center" class="comment">620</p></td><td><p type="p_table_c" style="margin-top: 4px" align="center" class="comment">4223</p></td><td><p type="p_table_c" style="margin-top: 4px" align="center" class="comment">-13.000</p></td><td><p type="p_table_c" style="margin-top: 4px" align="center" class="comment">0.000</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment">Abstand zu C4 wegen C2 und _LIMIT[3] insgesamt 4 mm. Abstand C2 → N3 von 0,1 mm führt nicht zur Beschränkung des Verfahrwegs.</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center" class="comment">710</p></td><td><p type="p_table_c" style="margin-top: 4px" align="center" class="comment">1221</p></td><td><p type="p_table_c" style="margin-top: 4px" align="center" class="comment">0.000</p></td><td><p type="p_table_c" style="margin-top: 4px" align="center" class="comment">21.213</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment">Frame mit Translation und Rotation aktiv. Der zulässige Verfahrweg in _DIST gilt im verschobenen und gedrehten WKS.</p></td></tr><tr valign="top"><td><p type="p_table_c" style="margin-top: 4px" align="center" class="comment">820</p></td><td><p type="p_table_c" style="margin-top: 4px" align="center" class="comment">102121</p></td><td><p type="p_table_c" style="margin-top: 4px" align="center" class="comment">18.000</p></td><td><p type="p_table_c" style="margin-top: 4px" align="center" class="comment">18.000</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment">Der Software-Endschalter der Y-Achse wird verletzt. Mit &lt;_TESTLIM> = 17 wird die Berechnung einer Weiterfahrrichtung angefordert. Diese Richtung steht in &lt;_DIST> (0.707, 0.0, 0.707). Sie ist gültig, da in &lt;_STATUS> die Einhunderttausenderstelle gesetzt ist.</p></td></tr></table></p></div>
    <p>Siehe auch:<br />    <a href="156662860939.html">Überprüfung auf Schutzbereichsverletzung, Arbeitsfeldbegrenzung und Software-Endschalter (CALCPOSI): Weitere Informationen</a><br />    <a href="156662840203.html">Schutzbereiche definieren (CPROTDEF, NPROTDEF)</a><br />    <a href="156662848139.html">Schutzbereiche aktivieren/deaktivieren (CPROT, NPROT)</a></p>
  </body>
</html>