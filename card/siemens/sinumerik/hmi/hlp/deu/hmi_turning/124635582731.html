<html>
  <head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Anwenderprotokoll</title>
  </head>
  <body id="bodyID">
    <div id="nsbanner">
      <div id="TitleRowDefault">
        <h1 class="title">Anwenderprotokoll</h1>
      </div>
    </div>
    <div id="nstext" valign="bottom">
      <p>
      </p>
      <a name="block_1">
      </a>
      <h3 class="BlocktitleFirst">Funktion</h3>
      <p>Die Funktion beruht darauf, dass der Anwender den Inhalt seiner Protokollzeilen selbst frei definiert und in einem Feld von Stringvariablen (Stringlänge 200) hinterlegt.</p>
      <p>Durch Aufruf eines neuen Zyklus CYCLE160 wird der Inhalt dieses Stringfeldes protokolliert. Die Protokollierung beginnt immer beim Feldindex 0 und es wird so lange protokolliert, bis ein Leerstring (d. h. Stringlänge 0) vorgefunden wird.</p>
      <p>Für einfache Anwendungen ist im Baustein PGUD ein NCK-globales Feld von Stringvariablen vordefiniert:</p>
      <p>DEF NCK STRING[200] S_PROTTXT[10]</p>
      <p>D. h., es können sofort 10 Zeilen protokolliert werden.</p>
      <p>Sollte das nicht ausreichen, kann vom Anwender alternativ in einem eigenen GUD-Baustein (z. B. MGUD oder UGUD) ein zweites Stringfeld mit dem vordefinierten Namen S_USERTXT[n] von beliebiger Länge angelegt werden:   </p>
      <p>DEF NCK STRING[200] S_USERTXT[n]</p>
      <p>Die Protokollierfunktion prüft das Vorhandensein dieses Feldes S_USERTXT. Wenn es vorhanden ist, wird der Inhalt dieses Feldes protokolliert, wenn es nicht vorhanden ist, der Inhalt von S_PROTTXT.</p>
      <p>An der Programmstelle, an welcher der CYCLE160 aufgerufen wird, erfolgt die Protokollierung entsprechend dem durch den CYCLE150-Aufruf eingestellten Protokollierziel – genau wie beim Protokollieren von Messergebnissen.</p>
      <p>Mit dieser Funktion ist es möglich, sowohl ein komplett anwenderspezifisches Protokoll (ohne Bezug zum Messen) auszugeben oder zusätzliche Zeilen in Standardprotokolle einzufügen.</p>
      <p>Sollen zusätzliche Zeilen in Standardprotokolle im Tabellenformat geschrieben werden, muss der Anwender selbst für die Spaltenformatierung in diesen Strings sorgen (Trennzeichen „;“ einfügen).</p>
      <a name="block_2">
      </a>
      <h3 class="Blocktitle">Vorgehensweise</h3>
      <p>In der Eingabemaske des CYCLE150 zur Protokollsteuerung wird "Anwenderprotokoll“ ausgewählt.</p>
      <p>Es gibt keinen Unterschied zwischen Textformat und Tabellenformat – der Anwender bestimmt den Inhalt selbst. Das entsprechende Auswahlfeld wird bei Anwenderprotokoll weggeblendet.</p>
      <p>Wird der Pfad eingegeben, erfolgt das mit demselben Dialog wie beim Standardprotokoll.</p>
      <a id="image_67147309707_0">
      </a> <img border="0" src="images/67147318795.png" width="500" height="375" alt="Eingabemaske Anwenderprotokoll"/><p class="imgtitle">Eingabemaske Anwenderprotokoll</p><p>Im Teileprogramm ist Folgendes zu schreiben:</p><ul><li><p> CYCLE150-Aufruf zum Einschalten des Anwenderprotokolls</p></li><li><p> Zuweisung des Protokollinhalts an die vordefinierten Stringvariablen</p></li><li><p>CYCLE160 zur Ausgabe des Protokollinhalts</p></li></ul><p>Der CYCLE160 hat keine Übergabeparameter.  Der Anwender muss ihn ohne Eingabemaske selbst programmieren.</p><h4 class="Blocklabel">Frei definierbares Anwenderprotokoll</h4><p>Programmierbeispiel:</p><a id="table_04b94434-414a-42ec-a363-25246103b980"></a> <a id="table_0"></a> <a id="table_04b94434-414a-42ec-a363-25246103b980"></a> <a id="table_0"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_invisible" border="0"><colgroup><col width="50.0%"><col width="50.0%"></colgroup><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">...</p></td><td> </td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>N50 CYCLE150(10,1111,“MY_PROT.TXT“)</code></p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">; Protokollieren EIN  </p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>N51 S_USERTXT[0]=REP("")</code></p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">; Feld alte Daten löschen</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>N52 S_USERTXT[0]="MASCHINE: ABC_12345"</code></p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">; Protokollinhalt zusammenstellen</p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left"><code>N53 S_USERTXT[1]="LOGFILE KOMPENSATIONSDATEN"</code></p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>N54 S_USERTXT[2]=" "</code></p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">; Programmierung Leerzeile: 1 x Blank</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>N55 S_USERTXT[3]="WERT1 = "&lt;&lt;R101</code></p></td><td> </td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>N56 S_USERTXT[4]="WERT2 = "&lt;&lt;R102</code></p></td><td> </td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>N60 CYCLE160</code></p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">; Anwenderprotokoll schreiben</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">...</p></td><td> </td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>M30</code></p></td><td> </td></tr></table></p><p class="comment"><b>Protokollauszug:</b></p><p class="comment"><code>MASCHINE: ABC_12345</code></p><p class="comment"><code>LOGFILE KOMPENSATIONSDATEN </code></p><p class="comment"></p><p class="comment"><code>WERT1 = 123.456</code></p><p class="comment"><code>WERT2 = 789.333</code></p><p class="comment">Erläuterungen:</p><ul class="comment"><li class="comment"><p class="comment">N50 … Protokollieren wird eingeschaltet</p><ul class="comment"><li class="comment"><p class="comment">Ziel: in denselben Pfad wie das aufrufende Programm</p></li><li class="comment"><p class="comment">das Protokoll wird fortgeschrieben</p></li><li class="comment"><p class="comment">Protokolltyp: Anwenderprotokoll</p></li><li class="comment"><p class="comment">Protokollieren "ein"</p></li></ul></li><li class="comment"><p class="comment">N52 - N56 Protokollinhalt</p></li><li class="comment"><p class="comment">N60 … CYCLE160-Aufruf: jetzt werden Daten geschrieben</p></li><li class="comment"><p class="comment">Wert 1 und Wert 2 spiegeln die Inhalte der R-Parameter R101 und R102 zum Zeitpunkt der Protokollausgabe wider. </p></li></ul><a name="block_3"></a><h3 class="Blocktitle">Standardprotokoll mit zusätzlichen Anwenderdaten</h3><p>Programmierbeispiel:</p><a id="table_1db0ebe1-8920-a19d-1c4c-aff7a611930f"></a> <a id="table_1"></a> <a id="table_1db0ebe1-8920-a19d-1c4c-aff7a611930f"></a> <a id="table_1"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_invisible" border="0"><colgroup><col width="50.0%"><col width="50.0%"></colgroup><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">---</p></td><td> </td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>N50 CYCLE150(10,1001,…)</code></p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">; Protokollieren EIN, Kopf schreiben</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>N51 S_PROTTXT[0]=REP("")</code></p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">; Feld alte Daten löschen</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>N52 S_PROTTXT[0]="BOHRUNG DM 20H7"</code></p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">; Anwenderdaten beschreiben</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>N53 S_PROTTXT[1]="GROESSTMASS:20.021"</code></p></td><td> </td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>N54 S_PROTTXT[2]="KLEINSTMASS:20.000"</code></p></td><td> </td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left"><code>N55 S_PROTTXT[3]="SPINDELTEMPERATUR:"&lt;&lt;R99&lt;&lt;" GRD"</code></p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>N60 CYCLE160</code></p></td><td><p type="p_table_l" style="margin-top: 4px" align="left">; Anwenderdaten ins Protokoll schreiben</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>T="3D_TASTER_FR" D1 M6</code></p></td><td> </td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>G0 X0 Y0 Z5</code></p></td><td> </td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left"><code>N70 CYCLE977(201,,4000001,1,24,,,2,8,0,1,1,,,1," ",,0,1.01,1.01,-1.01,0.34,1,0,,1,1)</code></p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left">...</p></td><td> </td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left"><code>M30</code></p></td><td> </td></tr></table></p><p class="comment">Protokollauszug:</p><a id="table_4fcce232-0de8-7de4-0d71-6182cddcf89a"></a> <a id="table_2"></a> <a id="table_4fcce232-0de8-7de4-0d71-6182cddcf89a"></a> <a id="table_2"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_invisible" border="0"><colgroup><col width="50.0%"><col width="50.0%"></colgroup><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left" class="comment">**************************************************************************************************</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment"><code>Date    :  2013-08-0</code>5 </p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment"><code>Time:  11:59:10</code></p></td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left" class="comment"><code>Protocol: /_N_WKS_DIR/_N_WP1_WPD/_PROT_TE_977_BOHR_TXT</code></p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment"><code>Program : _N_TE_977_BOHR_MPF</code></p></td><td> </td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment"><code>Workpiece No: 123</code></p></td><td> </td></tr><tr valign="top"><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left" class="comment">*************************************************************************************************</p></td></tr></table></p><p class="comment"><code>BOHRUNG DM 20H7</code></p><p class="comment"><code>GROESSTMASS:20.021</code></p><p class="comment"><code>KLEINSTMASS:20.000</code></p><p class="comment"><code>SPINDELTEMPERATUR:68.7 GRD</code></p><a id="table_6ff91ed7-73c9-7831-39d0-120d96c63d9a"></a> <a id="table_3"></a> <a id="table_6ff91ed7-73c9-7831-39d0-120d96c63d9a"></a> <a id="table_3"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_invisible" border="0"><colgroup><col width="33.5%"><col width="33.1%"><col width="33.3%"></colgroup><tr valign="top"><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left" class="comment">----------------------------------------------------------------------------------------------------------------</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment"><code>1</code></p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment">:<code> 977 / 101</code></p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment"><code>Time: 11:58:10</code></p></td></tr><tr valign="top"><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left" class="comment"><code>Results measure: 1 Hole / CYCLE977</code></p></td></tr><tr valign="top"><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left" class="comment">----------------------------------------------------------------------------------------------------------------</p></td></tr><tr valign="top"><td colspan="3"><p type="p_table_l" style="margin-top: 4px" align="left" class="comment"><code>Correction into: Work offset, Coarse</code></p></td></tr><tr valign="top"><td> </td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment"><code>G508</code></p></td><td> </td></tr><tr valign="top"><td> </td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment"><code>Coarse [mm]</code></p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment"><code>Rotation [deg]</code></p></td></tr><tr valign="top"><td> </td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left" class="comment">--------------------------------------------------------------------------</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment"><code>X</code></p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment"><code>-0.0200</code></p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment"><code> 0.0000    </code> </p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment"><code>Y</code></p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment"><code> 0.0300</code></p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment"><code>45.0000</code></p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment"><code>Z</code></p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment"><code>-0.0128</code></p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment"><code> 0.0000 </code></p></td></tr><tr valign="top"><td> </td><td colspan="2"><p type="p_table_l" style="margin-top: 4px" align="left" class="comment">--------------------------------------------------------------------------</p></td></tr></table></p><a id="table_3d721400-af4c-de58-6c63-b9f3c381d5a9"></a> <a id="table_4"></a> <a id="table_3d721400-af4c-de58-6c63-b9f3c381d5a9"></a> <a id="table_4"></a> <p><table width="100%" cellspacing="0" cellpadding="0" class="table_invisible" border="0"><colgroup><col width="25.0%"><col width="25.3%"><col width="25.4%"><col width="24.3%"></colgroup><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment"><code>Results:</code></p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment">Setpoint </p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment">Measured</p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment">Difference</p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment"><code>X</code></p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment"><code>12.9900</code></p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment"><code>12.9700</code></p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment"><code>-0.0200  mm</code></p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment"><code>Y</code></p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment"><code> 7.5000</code></p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment"><code> 7.5300</code></p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment"><code> 0.0300  mm</code></p></td></tr><tr valign="top"><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment"><code>Diameter</code></p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment"><code>24.0000</code></p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment"><code>23.8400</code></p></td><td><p type="p_table_l" style="margin-top: 4px" align="left" class="comment"><code>-0.1600  mm</code></p></td></tr><tr valign="top"><td colspan="4"><p type="p_table_l" style="margin-top: 4px" align="left" class="comment">---------------------------------------------------------------------------------------------------------------</p></td></tr></table></p></div>
  </body>
</html>